<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, viewport-fit=cover">
  <title>FATHOM - See What Your Journeys Really Cost</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;500;600;700&display=swap" rel="stylesheet">
  <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <style>
    /* Interstate Font Family - Brand/Display Font */
    @font-face {
      font-family: 'Interstate';
      src: url('https://steveyoung74.github.io/journeymaps/fonts/Interstate-light.ttf') format('truetype');
      font-weight: 300;
      font-style: normal;
      font-display: swap;
    }
    @font-face {
      font-family: 'Interstate';
      src: url('https://steveyoung74.github.io/journeymaps/fonts/Interstate-regular.ttf') format('truetype');
      font-weight: 400;
      font-style: normal;
      font-display: swap;
    }
    @font-face {
      font-family: 'Interstate';
      src: url('https://steveyoung74.github.io/journeymaps/fonts/Interstate-bold.ttf') format('truetype');
      font-weight: 700;
      font-style: normal;
      font-display: swap;
    }
    @font-face {
      font-family: 'Interstate Condensed';
      src: url('https://steveyoung74.github.io/journeymaps/fonts/Interstate-boldcondensed.ttf') format('truetype');
      font-weight: 700;
      font-style: normal;
      font-display: swap;
    }
    
    /* CSS Custom Properties - Fathom Color Palette */
    :root {
      /* Font Families */
      --font-display: 'Interstate', -apple-system, BlinkMacSystemFont, sans-serif;
      --font-body: 'Open Sans', -apple-system, BlinkMacSystemFont, sans-serif;
      
      --navy-950: #0C1620;
      --navy-900: #111E2E;
      --navy-800: #15243A;
      --navy-700: #192B45;
      --navy-600: #243D5C;
      --navy-500: #2F5070;
      --navy-400: #456A8A;
      --navy-300: #6889A8;
      --navy-200: #9BB1C7;
      --navy-100: #C8D5E2;
      --navy-50: #E9EEF4;
      --steel-700: #3A6070;
      --steel-600: #4A7485;
      --steel-500: #5B8A9A;
      --steel-400: #74A0AE;
      --steel-300: #96BCC7;
      --steel-100: #E1EEF2;
      --amber-700: #8B6914;
      --amber-600: #A67D1D;
      --amber-500: #C4942A;
      --amber-400: #D4A84A;
      --amber-200: #E8D5A3;
      --amber-100: #FAF0D6;
      --amber-50: #FDF8ED;
      --success: #2D8A6E;
      --success-light: #D4EDE5;
      --error: #B84A5A;
      --error-light: #F5E0E3;
      --slate-900: #1A2332;
      --slate-700: #3D4A5C;
      --slate-600: #556275;
      --slate-500: #6E7B8C;
      --slate-400: #8A95A5;
      --slate-300: #A9B2BE;
      --slate-200: #C8CED6;
      --slate-100: #E4E7EB;
      --slate-50: #F4F5F7;
    }
    
    * { box-sizing: border-box; margin: 0; padding: 0; }
    html { 
      scroll-behavior: smooth; 
      overflow-x: hidden;
      width: 100%;
      
    }
    body { 
      font-family: var(--font-body); 
      background: #FFF; 
      color: var(--slate-900);
      line-height: 1.6;
      margin: 0;
      overflow-x: hidden;
      width: 100%;
      max-width: 100vw;
      position: relative;
    }
    
    /* Typography - Display font for headings */
    h1, h2, h3, h4, h5, h6 {
      font-family: var(--font-display);
    }
    
    /* Prevent text from causing horizontal overflow */
    h1, h2, h3, h4, h5, h6, p, span, a, button {
      word-wrap: break-word;
      overflow-wrap: break-word;
    }
    
    /* Buttons */
    .btn { 
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      padding: 14px 28px; 
      border-radius: 8px; 
      font-size: 15px; 
      font-weight: 500; 
      cursor: pointer; 
      transition: all 0.2s;
      border: none;
      font-family: inherit;
      text-decoration: none;
    }
    .btn:disabled { opacity: 0.5; cursor: not-allowed; }
    .btn-primary { background: var(--navy-700); color: #FFF; }
    .btn-primary:hover:not(:disabled) { background: var(--navy-800); transform: translateY(-1px); }
    .btn-secondary { background: #FFF; color: var(--navy-700); border: 2px solid var(--navy-700); }
    .btn-secondary:hover:not(:disabled) { background: var(--navy-50); }
    .btn-ghost { background: transparent; color: var(--slate-600); }
    .btn-ghost:hover:not(:disabled) { background: var(--slate-100); }
    .btn-light { background: rgba(255,255,255,0.15); color: #FFF; border: 1px solid rgba(255,255,255,0.3); }
    .btn-light:hover:not(:disabled) { background: rgba(255,255,255,0.25); }
    
    /* Form Elements */
    .input {
      width: 100%;
      padding: 14px 16px;
      border: 1px solid var(--slate-200);
      border-radius: 8px;
      font-size: 15px;
      font-family: inherit;
      transition: border-color 0.15s, box-shadow 0.15s;
    }
    .input:focus { 
      outline: none;
      border-color: var(--steel-500); 
      box-shadow: 0 0 0 3px rgba(91, 138, 154, 0.15);
    }
    .label {
      display: block;
      font-size: 14px;
      font-weight: 500;
      color: var(--slate-700);
      margin-bottom: 8px;
    }
    
    /* Cards */
    .card {
      background: #FFF;
      border-radius: 16px;
      box-shadow: 0 4px 24px rgba(25, 43, 69, 0.08);
    }
    
    /* Modal */
    .modal-overlay {
      position: fixed;
      inset: 0;
      background: rgba(12, 22, 32, 0.7);
      backdrop-filter: blur(4px);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 9999;
      padding: 20px;
      opacity: 0;
      animation: fadeIn 0.2s ease forwards;
    }
    @keyframes fadeIn {
      to { opacity: 1; }
    }
    
    /* Hero logo entrance animation */
    .hero-logo {
      animation: heroLogoIn 0.8s ease-out forwards;
      opacity: 0;
    }
    @keyframes heroLogoIn {
      0% {
        opacity: 0;
        transform: translateY(-20px);
      }
      100% {
        opacity: 1;
        transform: translateY(0);
      }
    }
    
    /* Hero content staggered entrance */
    .hero-badge {
      animation: heroContentIn 0.7s ease-out 0.2s forwards;
      opacity: 0;
    }
    .hero-headline {
      animation: heroContentIn 0.7s ease-out 0.35s forwards;
      opacity: 0;
    }
    .hero-subhead {
      animation: heroContentIn 0.7s ease-out 0.5s forwards;
      opacity: 0;
    }
    .hero-buttons {
      animation: heroContentIn 0.7s ease-out 0.65s forwards;
      opacity: 0;
    }
    .stats-bar {
      animation: heroContentIn 0.7s ease-out 0.85s forwards;
      opacity: 0;
    }
    @keyframes heroContentIn {
      0% {
        opacity: 0;
        transform: translateY(20px);
      }
      100% {
        opacity: 1;
        transform: translateY(0);
      }
    }
    .modal {
      background: #FFF;
      border-radius: 20px;
      max-width: 440px;
      width: 100%;
      max-height: 90vh;
      overflow-y: auto;
      transform: translateY(20px);
      animation: slideUp 0.3s ease forwards;
    }
    @keyframes slideUp {
      to { transform: translateY(0); }
    }
    
    /* Badge */
    .badge {
      display: inline-flex;
      align-items: center;
      padding: 6px 12px;
      border-radius: 20px;
      font-size: 12px;
      font-weight: 500;
    }
    .badge-owner { background: var(--steel-100); color: var(--navy-600); }
    .badge-edit { background: var(--success-light); color: var(--success); }
    .badge-view { background: var(--slate-100); color: var(--slate-600); }
    
    /* Utility */
    .text-muted { color: var(--slate-600); }
    .text-small { font-size: 13px; }
    .text-error { color: var(--error); font-size: 13px; }
    
    /* Hero gradient background with topographic pattern */
    .hero-bg {
      background: linear-gradient(135deg, var(--navy-700) 0%, var(--navy-950) 100%);
      position: relative;
      overflow: hidden;
    }
    .hero-bg::before {
      content: '';
      position: absolute;
      inset: 0;
      background: url('topography-dark.svg') center/600px 600px repeat;
      opacity: 1;
      pointer-events: none;
    }
    .hero-bg::after {
      content: '';
      position: absolute;
      top: -50%;
      right: 0;
      width: 60%;
      height: 200%;
      background: radial-gradient(ellipse at center, rgba(91, 138, 154, 0.1) 0%, transparent 60%);
      pointer-events: none;
    }
    
    /* Section styling */
    .section {
      padding: 100px 24px;
    }
    .section-alt {
      background: var(--slate-50);
      position: relative;
    }
    .section-alt::before {
      content: '';
      position: absolute;
      inset: 0;
      background: url('topography-light.svg') center/600px 600px repeat;
      opacity: 1;
      pointer-events: none;
      z-index: 0;
    }
    .section-alt > .container {
      position: relative;
      z-index: 1;
    }
    
    /* Dashboard background with topographic pattern */
    .dashboard-bg {
      min-height: 100vh;
      background: var(--slate-50);
      position: relative;
      display: flex;
      flex-direction: column;
      overflow-x: hidden;
      width: 100%;
      max-width: 100vw;
    }
    .dashboard-bg::before {
      content: '';
      position: absolute;
      inset: 0;
      background: url('topography-light.svg') center/600px 600px repeat;
      opacity: 1;
      pointer-events: none;
      z-index: 0;
    }
    .dashboard-bg > nav {
      position: relative;
      z-index: 10;
      flex-shrink: 0;
      min-height: 64px;
      background: linear-gradient(135deg, var(--navy-700) 0%, var(--navy-900) 100%);
    }
    .dashboard-bg > main {
      position: relative;
      flex: 1;
      z-index: 1;
    }
    .dashboard-bg > footer {
      position: relative;
      z-index: 1;
    }
    
    /* Navigation */
    .nav {
      background: linear-gradient(135deg, var(--navy-700) 0%, var(--navy-900) 100%);
      position: sticky;
      top: 0;
      z-index: 9999;
      flex-shrink: 0;
      min-height: 64px;
      width: 100%;
      overflow: hidden;
      touch-action: manipulation;
    }
    .nav::before {
      content: '';
      position: absolute;
      inset: 0;
      background: url('topography-dark.svg') center/600px 600px repeat;
      opacity: 1;
      pointer-events: none;
      z-index: 0;
    }
    .nav-inner {
      max-width: 1200px;
      margin: 0 auto;
      padding: 0 24px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      height: 64px;
      position: relative;
      z-index: 1;
    }
    .nav-left {
      display: flex;
      align-items: center;
      gap: 32px;
    }
    .nav-logo {
      height: 32px;
    }
    .nav-links {
      display: flex;
      align-items: center;
      gap: 4px;
    }
    .nav-link {
      color: rgba(255,255,255,0.7);
      text-decoration: none;
      padding: 8px 16px;
      border-radius: 6px;
      font-size: 14px;
      font-weight: 500;
      transition: all 0.15s;
      cursor: pointer;
      background: none;
      border: none;
      font-family: inherit;
    }
    .nav-link:hover {
      color: #FFF;
      background: rgba(255,255,255,0.1);
    }
    .nav-link.active {
      color: #FFF;
      background: rgba(255,255,255,0.15);
    }
    .nav-dropdown {
      position: relative;
    }
    .nav-dropdown-menu {
      position: absolute;
      top: 100%;
      left: 0;
      background: #FFF;
      border-radius: 8px;
      box-shadow: 0 4px 24px rgba(0,0,0,0.15);
      min-width: 180px;
      padding: 8px 0;
      opacity: 0;
      visibility: hidden;
      transform: translateY(8px);
      transition: all 0.2s;
      z-index: 1001;
    }
    .nav-dropdown:hover .nav-dropdown-menu {
      opacity: 1;
      visibility: visible;
      transform: translateY(0);
    }
    .nav-dropdown-item {
      display: block;
      padding: 10px 16px;
      color: var(--slate-700);
      text-decoration: none;
      font-size: 14px;
      transition: background 0.15s;
    }
    .nav-dropdown-item:hover {
      background: var(--slate-50);
      color: var(--navy-700);
    }
    .nav-right {
      display: flex;
      align-items: center;
      gap: 16px;
    }
    .nav-user {
      color: rgba(255,255,255,0.8);
      font-size: 14px;
    }
    .nav-signout {
      color: rgba(255,255,255,0.6);
      background: rgba(255,255,255,0.1);
      border: 1px solid rgba(255,255,255,0.2);
      padding: 6px 14px;
      border-radius: 6px;
      font-size: 13px;
      cursor: pointer;
      font-family: inherit;
      transition: all 0.15s;
    }
    .nav-signout:hover {
      background: rgba(255,255,255,0.2);
      color: #FFF;
    }
    @media (max-width: 768px) {
      .nav-links { display: none; }
      .nav-inner { padding: 0 16px; }
    }
    
    /* CTA section with topographic pattern */
    .cta-section {
      background: linear-gradient(135deg, var(--navy-700) 0%, var(--navy-900) 100%);
      padding: 100px 24px;
      position: relative;
    }
    .cta-section::before {
      content: '';
      position: absolute;
      inset: 0;
      background: url('topography-dark.svg') center/600px 600px repeat;
      opacity: 1;
      pointer-events: none;
    }
    .cta-section > * {
      position: relative;
      z-index: 1;
    }
    .container {
      max-width: 1140px;
      margin: 0 auto;
    }
    
    /* Feature cards */
    .feature-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(min(320px, 100%), 1fr));
      gap: 24px;
    }
    .feature-card {
      padding: 32px;
      border-radius: 16px;
      transition: all 0.25s;
      color: #FFF;
      background: linear-gradient(145deg, var(--steel-500) 0%, var(--steel-700) 100%);
      position: relative;
      overflow: hidden;
    }
    .feature-card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 4px;
    }
    .feature-card:hover {
      transform: translateY(-4px);
      box-shadow: 0 20px 40px rgba(25, 43, 69, 0.25);
    }
    .feature-card.accent-steel::before { background: linear-gradient(90deg, var(--steel-400) 0%, var(--steel-600) 100%); }
    .feature-card.accent-amber::before { background: linear-gradient(90deg, var(--amber-400) 0%, var(--amber-600) 100%); }
    .feature-card.accent-teal::before { background: linear-gradient(90deg, #2dd4bf 0%, #14b8a6 100%); }
    .feature-card.accent-rose::before { background: linear-gradient(90deg, #fb7185 0%, #e11d48 100%); }
    .feature-card.accent-indigo::before { background: linear-gradient(90deg, #818cf8 0%, #6366f1 100%); }
    .feature-card.accent-emerald::before { background: linear-gradient(90deg, #34d399 0%, #10b981 100%); }
    .feature-card.accent-purple::before { background: linear-gradient(90deg, #c084fc 0%, #a855f7 100%); }
    .feature-card.accent-cyan::before { background: linear-gradient(90deg, #22d3ee 0%, #06b6d4 100%); }
    .feature-icon {
      width: 56px;
      height: 56px;
      background: rgba(255,255,255,0.12);
      border-radius: 14px;
      display: flex;
      align-items: center;
      justify-content: center;
      margin-bottom: 20px;
      font-size: 26px;
    }
    
    /* Steps */
    .steps {
      display: flex;
      gap: 32px;
      flex-wrap: wrap;
      justify-content: center;
    }
    .step {
      flex: 1;
      min-width: min(280px, 100%);
      max-width: 340px;
      text-align: center;
      padding: 40px 28px;
      background: #FFF;
      border-radius: 16px;
      box-shadow: 0 2px 12px rgba(25, 43, 69, 0.06);
    }
    .step-number {
      width: 56px;
      height: 56px;
      background: var(--navy-700);
      color: #FFF;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 22px;
      font-weight: 700;
      margin: 0 auto 24px;
    }
    
    /* Stats bar */
    .stats-bar {
      display: flex;
      gap: 48px;
      flex-wrap: wrap;
      justify-content: center;
      padding: 48px 0;
    }
    .stat-item {
      text-align: center;
    }
    .stat-value {
      font-size: 48px;
      font-weight: 300;
      color: var(--steel-400);
      line-height: 1;
    }
    .stat-label {
      font-size: 14px;
      color: rgba(255,255,255,0.6);
      margin-top: 8px;
    }
    
    /* Dashboard Main Content - base styles */
    .dashboard-main {
      padding: 48px 40px;
      width: 100%;
      box-sizing: border-box;
    }
    
    /* Responsive - Tablet */
    @media (max-width: 768px) {
      .section { padding: 60px 20px; }
      .hero-content h1 { font-size: 36px !important; }
      .hero-buttons { flex-direction: column; }
      .nav-links { display: none !important; }
      .stat-value { font-size: 36px; }
      .stats-bar { gap: 32px; }
      
      /* Dashboard Navigation - ensure visible on mobile */
      .dashboard-bg > nav {
        display: block !important;
        visibility: visible !important;
        min-height: 56px !important;
      }
      .nav-inner {
        padding: 0 16px !important;
        height: 56px !important;
      }
      .nav-right {
        gap: 10px !important;
      }
      .nav-user {
        font-size: 12px !important;
      }
      .nav-signout {
        padding: 5px 10px !important;
        font-size: 11px !important;
      }
      
      /* Dashboard Main Content */
      .dashboard-main {
        padding: 24px 16px !important;
        width: 100% !important;
        max-width: 100vw !important;
        overflow-x: hidden !important;
      }
      
      /* Dashboard Title Section */
      .dashboard-title-section {
        flex-direction: column !important;
        align-items: flex-start !important;
        gap: 16px !important;
      }
      .dashboard-title {
        font-size: 24px !important;
      }
      
      /* Tabs and View Toggle */
      .dashboard-tabs {
        flex-direction: column !important;
        align-items: stretch !important;
        gap: 12px !important;
      }
      .dashboard-tab-buttons {
        width: 100% !important;
        justify-content: center !important;
      }
      .dashboard-tab-actions {
        width: 100% !important;
        justify-content: center !important;
      }
      
      /* Hide view toggle on mobile - only grid view available */
      .view-toggle {
        display: none !important;
      }
      
      /* Journey Preview Cards on Landing */
      .journey-preview-stages {
        flex-direction: column !important;
        gap: 8px !important;
      }
      .journey-preview-stage {
        flex: none !important;
        width: 100% !important;
      }
      
      /* List View - force card view on mobile */
      .list-view-container {
        display: none !important;
      }
      .card-view-mobile-hint {
        display: block !important;
        text-align: center;
        padding: 16px;
        color: var(--slate-500);
        font-size: 13px;
      }
      
      /* Landing page showcase sections */
      .showcase-flex {
        flex-direction: column !important;
        gap: 32px !important;
      }
      .showcase-content {
        flex: none !important;
        width: 100% !important;
      }
      .showcase-visual {
        flex: none !important;
        width: 100% !important;
        order: 0 !important;
      }
    }
    
    /* Responsive - Mobile */
    @media (max-width: 480px) {
      .section { padding: 40px 16px; }
      .hero-content h1 { font-size: 28px !important; }
      .stat-value { font-size: 28px; }
      .stats-bar { gap: 24px; }
      
      /* Navigation */
      .nav-inner {
        padding: 0 12px !important;
        height: 56px !important;
      }
      .nav-right {
        gap: 8px !important;
      }
      .nav-user {
        font-size: 11px !important;
        max-width: 80px;
        overflow: hidden;
        text-overflow: ellipsis;
        white-space: nowrap;
      }
      .nav-signout {
        padding: 4px 8px !important;
        font-size: 10px !important;
      }
      
      /* Container */
      .container {
        padding: 0 16px !important;
      }
      
      /* Dashboard */
      .dashboard-title {
        font-size: 22px !important;
      }
    }
    
    /* Hide mobile hint by default */
    .card-view-mobile-hint {
      display: none;
    }
    
    /* Mobile Menu */
    .nav-mobile-toggle {
      display: none;
      background: none;
      border: none;
      color: #FFF;
      font-size: 24px;
      cursor: pointer;
      padding: 8px 12px;
      line-height: 1;
      position: relative;
      z-index: 10;
    }
    /* Mobile Menu - Threads-style Side Sliding */
    .nav-mobile-backdrop {
      position: fixed;
      inset: 0;
      background: rgba(0, 0, 0, 0.5);
      z-index: 9999;
      opacity: 0;
      visibility: hidden;
      transition: opacity 0.3s ease, visibility 0.3s ease;
    }
    .nav-mobile-backdrop.open {
      opacity: 1;
      visibility: visible;
    }
    .nav-mobile-menu {
      position: fixed;
      top: 0;
      right: 0;
      bottom: 0;
      width: 280px;
      max-width: 85vw;
      background: var(--navy-800);
      z-index: 10000;
      display: flex;
      flex-direction: column;
      transform: translateX(100%);
      transition: transform 0.3s ease;
      box-shadow: -4px 0 24px rgba(0, 0, 0, 0.3);
    }
    .nav-mobile-menu.open {
      transform: translateX(0);
    }
    .nav-mobile-header {
      display: flex;
      justify-content: flex-end;
      padding: 16px 20px;
      border-bottom: 1px solid rgba(255,255,255,0.1);
    }
    .nav-mobile-close {
      background: rgba(255,255,255,0.1);
      border: none;
      color: #FFF;
      font-size: 20px;
      cursor: pointer;
      padding: 8px 12px;
      line-height: 1;
      border-radius: 20px;
      transition: background 0.15s;
    }
    .nav-mobile-close:hover {
      background: rgba(255,255,255,0.2);
    }
    .nav-mobile-links {
      display: flex;
      flex-direction: column;
      gap: 8px;
      padding: 20px;
      flex: 1;
      overflow-y: auto;
    }
    .nav-mobile-link {
      color: rgba(255,255,255,0.9);
      text-decoration: none;
      padding: 14px 20px;
      border-radius: 24px;
      font-size: 15px;
      font-weight: 500;
      background: rgba(255,255,255,0.05);
      transition: all 0.15s;
      text-align: center;
    }
    .nav-mobile-link:hover {
      background: rgba(255,255,255,0.15);
      color: #FFF;
    }
    .nav-mobile-link.active {
      background: rgba(255,255,255,0.2);
      color: #FFF;
    }
    .nav-mobile-section-label {
      color: rgba(255,255,255,0.4);
      font-size: 11px;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      padding: 16px 20px 8px;
    }
    .nav-mobile-user {
      padding: 20px;
      border-top: 1px solid rgba(255,255,255,0.1);
      background: rgba(0,0,0,0.2);
    }
    .nav-mobile-user-name {
      color: rgba(255,255,255,0.6);
      font-size: 13px;
      margin-bottom: 12px;
      text-align: center;
    }
    .nav-mobile-signout {
      width: 100%;
      padding: 12px;
      background: transparent;
      border: 1px solid rgba(255,255,255,0.3);
      color: rgba(255,255,255,0.9);
      border-radius: 24px;
      font-size: 14px;
      font-weight: 500;
      cursor: pointer;
      font-family: inherit;
      transition: all 0.15s;
    }
    .nav-mobile-signout:hover {
      background: rgba(255,255,255,0.1);
      border-color: rgba(255,255,255,0.4);
    }
    
    @media (max-width: 768px) {
      .nav-mobile-toggle {
        display: flex !important;
        align-items: center;
        justify-content: center;
      }
      .nav-right {
        display: none !important;
      }
    }
  </style>
</head>
<body>
  <div id="root"></div>
  
  <script type="text/babel">
    const { useState, useEffect } = React;
    
    const APP_VERSION = '8.8.0';
    
    // Helper to safely format dates
    const formatDate = (dateStr) => {
      if (!dateStr) return 'Unknown';
      const date = new Date(dateStr);
      if (isNaN(date.getTime())) return 'Unknown';
      return date.toLocaleDateString();
    };
    
    // GitHub configuration
    const GITHUB_CONFIG = {
      owner: 'steveyoung74',
      repo: 'journeymaps',
      branch: 'main',
      mapsPath: 'maps',
      indexFile: 'maps/index.json'
    };
    
    const getRawUrl = (path) => 
      `https://raw.githubusercontent.com/${GITHUB_CONFIG.owner}/${GITHUB_CONFIG.repo}/${GITHUB_CONFIG.branch}/${path}`;
    
    const getApiUrl = (path) => 
      `https://api.github.com/repos/${GITHUB_CONFIG.owner}/${GITHUB_CONFIG.repo}/contents/${path}`;
    
    async function fetchFromGitHub(path) {
      // Use cache-bust query param to avoid CDN caching
      // Don't use custom headers as they trigger CORS preflight which raw.githubusercontent.com doesn't support
      const cacheBust = `${Date.now()}-${Math.random().toString(36).substr(2, 9)}`;
      const url = getRawUrl(path) + '?t=' + cacheBust;
      console.log('Fetching:', url);
      const response = await fetch(url);
      if (!response.ok) {
        if (response.status === 404) return null;
        throw new Error(`GitHub fetch failed: ${response.status}`);
      }
      return response.json();
    }
    
    async function saveToGitHub(path, content, token, message = 'Update from Fathom') {
      const apiUrl = getApiUrl(path);
      let sha = null;
      
      try {
        const existingResponse = await fetch(apiUrl, {
          headers: { 'Authorization': `token ${token}` }
        });
        if (existingResponse.ok) {
          const existing = await existingResponse.json();
          sha = existing.sha;
        }
      } catch (e) {}
      
      const body = {
        message,
        content: btoa(unescape(encodeURIComponent(JSON.stringify(content, null, 2)))),
        branch: GITHUB_CONFIG.branch
      };
      if (sha) body.sha = sha;
      
      const response = await fetch(apiUrl, {
        method: 'PUT',
        headers: {
          'Authorization': `token ${token}`,
          'Content-Type': 'application/json'
        },
        body: JSON.stringify(body)
      });
      
      if (!response.ok) {
        const error = await response.json();
        throw new Error(error.message || 'Failed to save');
      }
      
      return response.json();
    }
    
    async function deleteFromGitHub(path, token, message = 'Delete from Fathom') {
      const apiUrl = getApiUrl(path);
      const existingResponse = await fetch(apiUrl, {
        headers: { 'Authorization': `token ${token}` }
      });
      if (!existingResponse.ok) throw new Error('File not found');
      const existing = await existingResponse.json();
      
      const response = await fetch(apiUrl, {
        method: 'DELETE',
        headers: {
          'Authorization': `token ${token}`,
          'Content-Type': 'application/json'
        },
        body: JSON.stringify({
          message,
          sha: existing.sha,
          branch: GITHUB_CONFIG.branch
        })
      });
      
      if (!response.ok) throw new Error('Failed to delete');
      return true;
    }
    
    // ============================================
    // LANDING PAGE
    // ============================================
    // NEW: Interactive Demo Component (add BEFORE LandingPage)
    function InteractiveDemo({ context, onClose }) {
      const [selectedStage, setSelectedStage] = useState(0);
      
      const demoData = {
        journeys: {
          title: 'Client Onboarding Journey',
          stages: [
            {
              name: 'Initial Contact',
              steps: [
                { name: 'Enquiry received', time: 15, cost: 12, friction: 'low' },
                { name: 'Qualification call', time: 30, cost: 45, friction: 'low' },
                { name: 'Information pack sent', time: 20, cost: 16, friction: 'low' }
              ]
            },
            {
              name: 'KYC & Compliance',
              steps: [
                { name: 'ID verification', time: 30, cost: 75, friction: 'medium' },
                { name: 'AML screening', time: 45, cost: 95, friction: 'high' },
                { name: 'Source of wealth check', time: 120, cost: 180, friction: 'high' }
              ]
            },
            {
              name: 'Account Setup',
              steps: [
                { name: 'Platform account creation', time: 45, cost: 85, friction: 'medium' },
                { name: 'Initial investment', time: 60, cost: 120, friction: 'low' }
              ]
            }
          ]
        },
        projects: {
          title: 'Construction Tender Response',
          stages: [
            {
              name: 'Tender Analysis',
              steps: [
                { name: 'Document review', time: 480, cost: 1240, friction: 'medium' },
                { name: 'Site visit', time: 240, cost: 840, friction: 'low' },
                { name: 'Risk assessment', time: 360, cost: 1080, friction: 'high' }
              ]
            },
            {
              name: 'Pricing & Planning',
              steps: [
                { name: 'Cost estimation', time: 720, cost: 2160, friction: 'medium' },
                { name: 'Subcontractor quotes', time: 480, cost: 960, friction: 'high' }
              ]
            }
          ]
        },
        events: {
          title: 'Tax Season Surge (Week 1)',
          stages: [
            {
              name: 'Client Intake',
              steps: [
                { name: 'Document collection (3x volume)', time: 1440, cost: 2880, friction: 'high' },
                { name: 'Data entry (3x volume)', time: 960, cost: 1440, friction: 'medium' }
              ]
            },
            {
              name: 'Processing',
              steps: [
                { name: 'Tax return preparation (3.5x)', time: 2520, cost: 5040, friction: 'high' },
                { name: 'Review queue (2.5x)', time: 1200, cost: 3000, friction: 'medium' }
              ]
            }
          ]
        }
      };
      
      const data = demoData[context];
      const totalCost = data.stages.reduce((sum, stage) => 
        sum + stage.steps.reduce((stageSum, step) => stageSum + step.cost, 0), 0
      );
      const totalTime = data.stages.reduce((sum, stage) => 
        sum + stage.steps.reduce((stageSum, step) => stageSum + step.time, 0), 0
      );
      
      const frictionColors = {
        low: 'var(--success)',
        medium: 'var(--amber-500)',
        high: 'var(--error)'
      };
      
      return (
        <div className="modal-overlay" onClick={onClose}>
          <div className="modal" onClick={e => e.stopPropagation()} style={{ maxWidth: '600px' }}>
            <div style={{ padding: '40px' }}>
              <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '24px' }}>
                <h2 style={{ fontSize: '24px', fontWeight: 400, color: 'var(--navy-700)' }}>
                  Interactive Demo
                </h2>
                <button 
                  onClick={onClose}
                  style={{ 
                    background: 'none', 
                    border: 'none', 
                    fontSize: '28px', 
                    color: 'var(--slate-400)', 
                    cursor: 'pointer',
                    lineHeight: 1,
                    padding: '0'
                  }}
                >
                  √ó
                </button>
              </div>
              
              <h3 style={{ fontSize: '18px', fontWeight: 600, color: 'var(--steel-600)', marginBottom: '16px' }}>
                {data.title}
              </h3>
              
              {/* Summary Metrics */}
              <div style={{ 
                marginBottom: '24px', 
                padding: '20px', 
                background: 'var(--slate-50)', 
                borderRadius: '12px',
                display: 'flex',
                gap: '32px',
                flexWrap: 'wrap'
              }}>
                <div>
                  <div style={{ fontSize: '12px', color: 'var(--slate-500)', marginBottom: '4px' }}>Total Time</div>
                  <div style={{ fontSize: '20px', fontWeight: 600, color: 'var(--navy-700)' }}>
                    {Math.round(totalTime / 60)}h {totalTime % 60}m
                  </div>
                </div>
                <div>
                  <div style={{ fontSize: '12px', color: 'var(--slate-500)', marginBottom: '4px' }}>Total Cost</div>
                  <div style={{ fontSize: '20px', fontWeight: 600, color: 'var(--navy-700)' }}>
                    ¬£{totalCost.toLocaleString()}
                  </div>
                </div>
                <div>
                  <div style={{ fontSize: '12px', color: 'var(--slate-500)', marginBottom: '4px' }}>Stages</div>
                  <div style={{ fontSize: '20px', fontWeight: 600, color: 'var(--navy-700)' }}>
                    {data.stages.length}
                  </div>
                </div>
              </div>
              
              {/* Stage List */}
              {data.stages.map((stage, idx) => (
                <div key={idx} style={{ marginBottom: '12px' }}>
                  <div 
                    onClick={() => setSelectedStage(idx)}
                    style={{
                      padding: '16px',
                      background: selectedStage === idx ? 'var(--steel-100)' : 'var(--slate-50)',
                      borderRadius: '12px',
                      cursor: 'pointer',
                      border: `2px solid ${selectedStage === idx ? 'var(--steel-500)' : 'transparent'}`,
                      transition: 'all 0.2s'
                    }}
                  >
                    <div style={{ 
                      display: 'flex', 
                      justifyContent: 'space-between', 
                      alignItems: 'center',
                      marginBottom: selectedStage === idx ? '12px' : '0'
                    }}>
                      <div style={{ fontWeight: 600, color: 'var(--navy-700)' }}>
                        {idx + 1}. {stage.name}
                      </div>
                      <div style={{ fontSize: '13px', color: 'var(--slate-500)' }}>
                        {stage.steps.length} steps
                      </div>
                    </div>
                    
                    {selectedStage === idx && (
                      <div style={{ marginTop: '12px' }}>
                        {stage.steps.map((step, stepIdx) => (
                          <div 
                            key={stepIdx} 
                            style={{ 
                              padding: '12px', 
                              background: '#FFF', 
                              borderRadius: '8px', 
                              marginBottom: '8px',
                              display: 'flex',
                              justifyContent: 'space-between',
                              alignItems: 'center',
                              borderLeft: `3px solid ${frictionColors[step.friction]}`
                            }}
                          >
                            <div style={{ fontSize: '14px', color: 'var(--slate-700)' }}>
                              {step.name}
                            </div>
                            <div style={{ 
                              display: 'flex', 
                              gap: '12px', 
                              fontSize: '13px', 
                              color: 'var(--slate-500)',
                              alignItems: 'center'
                            }}>
                              <span>‚è±Ô∏è {step.time}min</span>
                              <span>üí∞ ¬£{step.cost}</span>
                              <span style={{ 
                                fontSize: '10px',
                                padding: '2px 8px',
                                borderRadius: '4px',
                                background: frictionColors[step.friction],
                                color: '#FFF',
                                fontWeight: 600,
                                textTransform: 'uppercase'
                              }}>
                                {step.friction}
                              </span>
                            </div>
                          </div>
                        ))}
                      </div>
                    )}
                  </div>
                </div>
              ))}
              
              {/* CTA */}
              <div style={{ 
                marginTop: '24px', 
                padding: '20px', 
                background: 'var(--slate-50)', 
                borderRadius: '12px', 
                textAlign: 'center' 
              }}>
                <p style={{ color: 'var(--slate-600)', marginBottom: '16px', fontSize: '14px' }}>
                  This is just one example. Build your own with real data.
                </p>
                <button onClick={onClose} className="btn btn-primary" style={{ width: '100%' }}>
                  Get Started Free
                </button>
              </div>
            </div>
          </div>
        </div>
      );
    }
    
    function LandingPage({ onGetStarted }) {
      const [scrolled, setScrolled] = useState(false);
      const [logoVisible, setLogoVisible] = useState(false);
      
      // NEW: Context and industry state
      const [activeContext, setActiveContext] = useState('journeys');
      const [activeIndustry, setActiveIndustry] = useState('all');
      const [showDemo, setShowDemo] = useState(false);
      const [isTransitioning, setIsTransitioning] = useState(false);
      
      // URL deep linking
      useEffect(() => {
        const params = new URLSearchParams(window.location.search);
        const context = params.get('context');
        const industry = params.get('industry');
        if (context && ['journeys', 'projects', 'events'].includes(context)) {
          setActiveContext(context);
        }
        if (industry) {
          setActiveIndustry(industry);
        }
      }, []);
      
      // Update URL when context/industry changes
      useEffect(() => {
        const params = new URLSearchParams();
        params.set('context', activeContext);
        params.set('industry', activeIndustry);
        window.history.replaceState({}, '', `${window.location.pathname}?${params}`);
      }, [activeContext, activeIndustry]);
      
      useEffect(() => {
        const handleScroll = () => {
          const scrollY = window.scrollY;
          setScrolled(scrollY > 50);
          setLogoVisible(scrollY > 200);
        };
        window.addEventListener('scroll', handleScroll);
        return () => window.removeEventListener('scroll', handleScroll);
      }, []);
      
      // Context change handler with transition
      const handleContextChange = (newContext) => {
        if (newContext === activeContext) return;
        setIsTransitioning(true);
        setTimeout(() => {
          setActiveContext(newContext);
          setIsTransitioning(false);
        }, 150);
      };
      
      // Context configurations
      const CONTEXTS = {
        journeys: {
          badge: 'JOURNEY INTELLIGENCE PLATFORM',
          headline: React.createElement(React.Fragment, null,
            "See what your journeys ",
            React.createElement("br"),
            React.createElement("span", { style: { color: 'var(--steel-400)', fontWeight: 600 } }, "really cost")
          ),
          subhead: 'Map operational processes with precision. Capture ground-truth data from the people who do the work. Transform assumptions into actionable insights.',
          icon: 'üó∫Ô∏è',
          color: 'var(--steel-500)'
        },
        projects: {
          badge: 'PROJECT INTELLIGENCE PLATFORM',
          headline: React.createElement(React.Fragment, null,
            "Know what delivery ",
            React.createElement("br"),
            React.createElement("span", { style: { color: 'var(--amber-400)', fontWeight: 600 } }, "really costs")
          ),
          subhead: 'Quantify project work with milestone-based cost tracking. From construction tenders to software implementations, see the true cost of delivery.',
          icon: 'üìã',
          color: 'var(--amber-500)'
        },
        events: {
          badge: 'EVENT INTELLIGENCE PLATFORM',
          headline: React.createElement(React.Fragment, null,
            "Understand peak load ",
            React.createElement("br"),
            React.createElement("span", { style: { color: 'var(--success)', fontWeight: 600 } }, "operations")
          ),
          subhead: 'Model one-time or seasonal events with peak capacity planning. From matchday operations to tax season surges, quantify what it takes.',
          icon: '‚ö°',
          color: 'var(--success)'
        }
      };
      
      const context = CONTEXTS[activeContext];
      
      return (
        <div>
          {/* Navigation - UNCHANGED */}
          <nav style={{
            position: 'fixed',
            top: 0,
            left: 0,
            right: 0,
            zIndex: 100,
            padding: '16px 32px',
            display: 'flex',
            justifyContent: 'space-between',
            alignItems: 'center',
            background: scrolled ? 'rgba(25, 43, 69, 0.98)' : 'transparent',
            backdropFilter: scrolled ? 'blur(12px)' : 'none',
            transition: 'all 0.3s',
            borderBottom: scrolled ? '1px solid rgba(255,255,255,0.1)' : 'none'
          }}>
            <img 
              src="logo_light.png" 
              alt="FATHOM" 
              style={{ 
                height: '28px',
                opacity: logoVisible ? 1 : 0,
                transform: logoVisible ? 'translateY(0)' : 'translateY(-8px)',
                transition: 'opacity 0.4s ease, transform 0.4s ease'
              }} 
            />
            <div className="nav-links" style={{ display: 'flex', gap: '40px', alignItems: 'center' }}>
              <a href="#features" style={{ color: 'rgba(255,255,255,0.8)', textDecoration: 'none', fontSize: '14px', fontWeight: 500 }}>Features</a>
              <a href="#how-it-works" style={{ color: 'rgba(255,255,255,0.8)', textDecoration: 'none', fontSize: '14px', fontWeight: 500 }}>How It Works</a>
              <a href="#templates" style={{ color: 'rgba(255,255,255,0.8)', textDecoration: 'none', fontSize: '14px', fontWeight: 500 }}>Templates</a>
              <a href="#use-cases" style={{ color: 'rgba(255,255,255,0.8)', textDecoration: 'none', fontSize: '14px', fontWeight: 500 }}>Use Cases</a>
              <button onClick={onGetStarted} className="btn btn-light" style={{ padding: '10px 24px' }}>
                Sign In
              </button>
            </div>
          </nav>
          {/* Hero Section - ENHANCED */}
          <section className="hero-bg" style={{ minHeight: '100vh', display: 'flex', flexDirection: 'column', justifyContent: 'center', padding: '120px 24px 60px' }}>
            <div className="container" style={{ position: 'relative', zIndex: 1 }}>
              <div className="hero-content" style={{ maxWidth: '720px', marginBottom: '48px' }}>
                {/* Large Hero Logo - UNCHANGED */}
                <img 
                  src="logo_light.png" 
                  alt="FATHOM" 
                  className="hero-logo"
                  style={{ 
                    height: '80px',
                    marginBottom: '48px'
                  }} 
                />
                
                {/* NEW: Context Switcher */}
                <div style={{
                  display: 'flex',
                  justifyContent: 'flex-start',
                  marginBottom: '32px'
                }}>
                  <div style={{
                    display: 'inline-flex',
                    gap: 0,
                    background: 'rgba(255, 255, 255, 0.08)',
                    border: '1px solid rgba(255, 255, 255, 0.15)',
                    borderRadius: '12px',
                    padding: '6px',
                    backdropFilter: 'blur(10px)'
                  }}>
                    {Object.keys(CONTEXTS).map(ctx => (
                      <button
                        key={ctx}
                        onClick={() => handleContextChange(ctx)}
                        style={{
                          padding: '12px 24px',
                          background: activeContext === ctx ? 'rgba(255,255,255,0.2)' : 'transparent',
                          border: 'none',
                          borderRadius: '8px',
                          color: activeContext === ctx ? '#FFF' : 'rgba(255,255,255,0.6)',
                          fontSize: '14px',
                          fontWeight: 500,
                          cursor: 'pointer',
                          transition: 'all 0.3s cubic-bezier(0.4, 0, 0.2, 1)',
                          fontFamily: 'var(--font-display)',
                          textTransform: 'capitalize',
                          boxShadow: activeContext === ctx ? '0 2px 8px rgba(0,0,0,0.2)' : 'none',
                          transform: activeContext === ctx ? 'scale(1.02)' : 'scale(1)'
                        }}
                      >
                        {CONTEXTS[ctx].icon} {ctx}
                      </button>
                    ))}
                  </div>
                </div>
                
                {/* NEW: Industry Pills */}
                <div style={{
                  display: 'flex',
                  gap: '8px',
                  flexWrap: 'wrap',
                  marginBottom: '40px'
                }}>
                  {['All', 'Financial Services', 'Professional Services', 'SaaS & Tech', 'Construction'].map(ind => {
                    const slug = ind.toLowerCase().replace(/ & /g, '-').replace(/ /g, '-');
                    return (
                      <button
                        key={ind}
                        onClick={() => setActiveIndustry(slug)}
                        style={{
                          padding: '8px 16px',
                          background: activeIndustry === slug 
                            ? 'rgba(255,255,255,0.2)' 
                            : 'rgba(255,255,255,0.06)',
                          border: `1px solid ${activeIndustry === slug
                            ? 'rgba(255,255,255,0.3)'
                            : 'rgba(255,255,255,0.12)'}`,
                          borderRadius: '20px',
                          color: activeIndustry === slug
                            ? '#FFF'
                            : 'rgba(255,255,255,0.6)',
                          fontSize: '13px',
                          fontWeight: 500,
                          cursor: 'pointer',
                          transition: 'all 0.2s',
                          fontFamily: 'var(--font-body)'
                        }}
                      >
                        {ind}
                      </button>
                    );
                  })}
                </div>
                
                {/* Dynamic Badge */}
                <div 
                  className={`hero-badge ${isTransitioning ? 'context-content-exit' : 'context-content'}`}
                  style={{ 
                    display: 'inline-block',
                    padding: '10px 20px', 
                    background: 'rgba(91, 138, 154, 0.2)', 
                    borderRadius: '24px', 
                    marginBottom: '28px',
                    fontSize: '13px',
                    color: 'var(--steel-300)',
                    fontWeight: 500,
                    letterSpacing: '0.5px'
                  }}
                >
                  {context.badge}
                </div>
                
                {/* Dynamic Headline */}
                <h1 
                  className={`hero-headline ${isTransitioning ? 'context-content-exit' : 'context-content'}`}
                  style={{ 
                    fontSize: '60px', 
                    fontWeight: 300, 
                    color: '#FFF', 
                    marginBottom: '24px',
                    lineHeight: 1.08,
                    letterSpacing: '-1.5px'
                  }}
                >
                  {context.headline}
                </h1>
                
                {/* Dynamic Subhead */}
                <p 
                  className={`hero-subhead ${isTransitioning ? 'context-content-exit' : 'context-content'}`}
                  style={{ 
                    fontSize: '20px', 
                    color: 'var(--slate-300)', 
                    marginBottom: '40px',
                    lineHeight: 1.7,
                    maxWidth: '560px'
                  }}
                >
                  {context.subhead}
                </p>
                
                {/* Hero Buttons */}
                <div className="hero-buttons" style={{ display: 'flex', gap: '16px', flexWrap: 'wrap' }}>
                  <button onClick={onGetStarted} className="btn btn-primary" style={{ padding: '18px 36px', fontSize: '16px' }}>
                    Get Started Free
                    <span style={{ marginLeft: '4px' }}>‚Üí</span>
                  </button>
                  <a href="#features" className="btn btn-secondary" style={{ padding: '18px 36px', background: 'transparent', borderColor: 'rgba(255,255,255,0.3)', color: '#FFF' }}>
                    See How It Works
                  </a>
                  <button 
                    onClick={() => setShowDemo(true)}
                    className="btn btn-secondary"
                    style={{ padding: '18px 36px', background: 'transparent', borderColor: 'rgba(255,255,255,0.3)', color: '#FFF' }}
                  >
                    üìä Interactive Demo
                  </button>
                </div>
              </div>
              
              {/* Benefits Bar - UNCHANGED */}
              <div style={{ 
                display: 'flex', 
                justifyContent: 'center', 
                gap: '40px', 
                flexWrap: 'wrap',
                borderTop: '1px solid rgba(255,255,255,0.1)', 
                marginTop: '40px',
                paddingTop: '32px'
              }}>
                <div style={{ display: 'flex', alignItems: 'center', gap: '10px' }}>
                  <span style={{ color: 'var(--steel-400)', fontSize: '18px' }}>‚úì</span>
                  <span style={{ color: 'var(--steel-300)', fontSize: '15px' }}>Map any journey in minutes</span>
                </div>
                <div style={{ display: 'flex', alignItems: 'center', gap: '10px' }}>
                  <span style={{ color: 'var(--steel-400)', fontSize: '18px' }}>‚úì</span>
                  <span style={{ color: 'var(--steel-300)', fontSize: '15px' }}>See true costs, not estimates</span>
                </div>
                <div style={{ display: 'flex', alignItems: 'center', gap: '10px' }}>
                  <span style={{ color: 'var(--steel-400)', fontSize: '18px' }}>‚úì</span>
                  <span style={{ color: 'var(--steel-300)', fontSize: '15px' }}>Find waste before you fix it</span>
                </div>
              </div>
            </div>
          </section>
          {/* Problem vs Solution Visual */}
          <section className="section" style={{ background: '#FFF' }}>
            <div className="container">
              <div style={{ textAlign: 'center', marginBottom: '48px' }}>
                <h2 style={{ fontSize: '36px', fontWeight: 300, marginBottom: '16px', color: 'var(--navy-700)', lineHeight: 1.3 }}>
                  Your operations are more expensive than you think
                </h2>
                <p style={{ fontSize: '18px', color: 'var(--slate-600)', maxWidth: '700px', margin: '0 auto' }}>
                  <strong style={{ color: 'var(--navy-700)' }}>Fathom makes the invisible visible</strong> ‚Äî so you can fix what matters most.
                </p>
              </div>
              
              <div style={{ display: 'flex', gap: '32px', justifyContent: 'center', flexWrap: 'wrap', maxWidth: '1000px', margin: '0 auto' }}>
                {/* The Problem - Chaos */}
                <div style={{ flex: '1 1 420px', maxWidth: '480px' }}>
                  <div style={{ 
                    background: 'linear-gradient(145deg, #fef2f2 0%, #fee2e2 100%)',
                    borderRadius: '20px',
                    padding: '32px',
                    border: '1px solid #fecaca',
                    height: '100%',
                    minHeight: '380px',
                    display: 'flex',
                    flexDirection: 'column'
                  }}>
                    <div style={{ display: 'flex', alignItems: 'center', gap: '8px', marginBottom: '24px' }}>
                      <span style={{ fontSize: '20px' }}>üòµ</span>
                      <span style={{ fontSize: '14px', fontWeight: 600, color: '#dc2626', textTransform: 'uppercase', letterSpacing: '1px' }}>Before Fathom</span>
                    </div>
                    
                    {/* Chaotic visual - stacked with slight offsets */}
                    <div style={{ flex: 1, display: 'flex', flexDirection: 'column', gap: '12px', paddingBottom: '16px' }}>
                      <div style={{ background: '#FFF', padding: '10px 14px', borderRadius: '8px', fontSize: '13px', color: '#991b1b', border: '1px solid #fca5a5', transform: 'rotate(-1deg)', boxShadow: '0 2px 8px rgba(220,38,38,0.1)', marginLeft: '0px' }}>
                        üìä spreadsheet_v4_FINAL.xlsx
                      </div>
                      <div style={{ background: '#FFF', padding: '10px 14px', borderRadius: '8px', fontSize: '13px', color: '#991b1b', border: '1px solid #fca5a5', transform: 'rotate(1.5deg)', boxShadow: '0 2px 8px rgba(220,38,38,0.1)', marginLeft: '40px' }}>
                        ‚ùì "How long does this take?"
                      </div>
                      <div style={{ background: '#FFF', padding: '10px 14px', borderRadius: '8px', fontSize: '13px', color: '#991b1b', border: '1px solid #fca5a5', transform: 'rotate(-0.5deg)', boxShadow: '0 2px 8px rgba(220,38,38,0.1)', marginLeft: '10px' }}>
                        üí∏ "It's about ¬£500... maybe?"
                      </div>
                      <div style={{ background: '#FFF', padding: '10px 14px', borderRadius: '8px', fontSize: '13px', color: '#991b1b', border: '1px solid #fca5a5', transform: 'rotate(2deg)', boxShadow: '0 2px 8px rgba(220,38,38,0.1)', marginLeft: '50px' }}>
                        ü§∑ "Ask Sarah, she knows"
                      </div>
                      <div style={{ background: '#FFF', padding: '10px 14px', borderRadius: '8px', fontSize: '13px', color: '#991b1b', border: '1px solid #fca5a5', transform: 'rotate(-1.5deg)', boxShadow: '0 2px 8px rgba(220,38,38,0.1)', marginLeft: '20px' }}>
                        üìß Meeting to discuss the process
                      </div>
                    </div>
                    
                    <div style={{ fontSize: '14px', color: '#7f1d1d', fontStyle: 'italic', textAlign: 'center', marginTop: 'auto' }}>
                      Guesswork, tribal knowledge, and endless meetings
                    </div>
                  </div>
                </div>
                
                {/* The Solution - Clarity */}
                <div style={{ flex: '1 1 420px', maxWidth: '480px' }}>
                  <div style={{ 
                    background: 'linear-gradient(145deg, #f0fdf4 0%, #dcfce7 100%)',
                    borderRadius: '20px',
                    padding: '32px',
                    border: '1px solid #bbf7d0',
                    height: '100%',
                    minHeight: '380px',
                    display: 'flex',
                    flexDirection: 'column'
                  }}>
                    <div style={{ display: 'flex', alignItems: 'center', gap: '8px', marginBottom: '24px' }}>
                      <span style={{ fontSize: '20px' }}>‚ú®</span>
                      <span style={{ fontSize: '14px', fontWeight: 600, color: '#16a34a', textTransform: 'uppercase', letterSpacing: '1px' }}>With Fathom</span>
                    </div>
                    
                    {/* Organized visual */}
                    <div style={{ flex: 1, display: 'flex', flexDirection: 'column', gap: '12px' }}>
                      <div style={{ background: '#FFF', padding: '14px 16px', borderRadius: '10px', display: 'flex', justifyContent: 'space-between', alignItems: 'center', border: '1px solid #86efac' }}>
                        <div style={{ display: 'flex', alignItems: 'center', gap: '10px' }}>
                          <div style={{ width: '8px', height: '8px', borderRadius: '50%', background: '#22c55e' }}></div>
                          <span style={{ fontSize: '13px', color: 'var(--navy-700)', fontWeight: 500 }}>Discovery & Qualification</span>
                        </div>
                        <span style={{ fontSize: '12px', color: '#15803d', fontWeight: 600 }}>1h 35m ¬∑ ¬£47</span>
                      </div>
                      <div style={{ background: '#FFF', padding: '14px 16px', borderRadius: '10px', display: 'flex', justifyContent: 'space-between', alignItems: 'center', border: '1px solid #86efac' }}>
                        <div style={{ display: 'flex', alignItems: 'center', gap: '10px' }}>
                          <div style={{ width: '8px', height: '8px', borderRadius: '50%', background: '#f59e0b' }}></div>
                          <span style={{ fontSize: '13px', color: 'var(--navy-700)', fontWeight: 500 }}>KYC & Compliance</span>
                        </div>
                        <span style={{ fontSize: '12px', color: '#15803d', fontWeight: 600 }}>3h 10m ¬∑ ¬£284</span>
                      </div>
                      <div style={{ background: '#FFF', padding: '14px 16px', borderRadius: '10px', display: 'flex', justifyContent: 'space-between', alignItems: 'center', border: '1px solid #86efac' }}>
                        <div style={{ display: 'flex', alignItems: 'center', gap: '10px' }}>
                          <div style={{ width: '8px', height: '8px', borderRadius: '50%', background: '#22c55e' }}></div>
                          <span style={{ fontSize: '13px', color: 'var(--navy-700)', fontWeight: 500 }}>Implementation</span>
                        </div>
                        <span style={{ fontSize: '12px', color: '#15803d', fontWeight: 600 }}>2h 45m ¬∑ ¬£156</span>
                      </div>
                      <div style={{ background: 'linear-gradient(90deg, var(--navy-700) 0%, var(--navy-600) 100%)', padding: '14px 16px', borderRadius: '10px', display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginTop: 'auto' }}>
                        <span style={{ fontSize: '13px', color: '#FFF', fontWeight: 600 }}>Total Journey Cost</span>
                        <span style={{ fontSize: '14px', color: '#FFF', fontWeight: 700 }}>¬£2,847</span>
                      </div>
                    </div>
                    
                    <div style={{ fontSize: '14px', color: '#166534', fontStyle: 'italic', textAlign: 'center', marginTop: '16px' }}>
                      Every step measured, every cost visible
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </section>
          
          {/* Features Section */}
          <section id="features" className="section section-alt">
            <div className="container">
              <div style={{ textAlign: 'center', marginBottom: '64px' }}>
                <div style={{ fontSize: '13px', color: 'var(--steel-500)', fontWeight: 600, letterSpacing: '1px', marginBottom: '12px' }}>CAPABILITIES</div>
                <h2 style={{ fontSize: '40px', fontWeight: 300, marginBottom: '16px', color: 'var(--navy-700)' }}>
                  Understand <span style={{ fontWeight: 600 }}>deeply</span>. Improve decisively.
                </h2>
                <p style={{ fontSize: '18px', color: 'var(--slate-600)', maxWidth: '600px', margin: '0 auto' }}>
                  Everything you need to map, measure, and optimise your operational journeys.
                </p>
              </div>
              
              <div className="feature-grid">
                <div className="feature-card accent-steel">
                  <div className="feature-icon">‚è±Ô∏è</div>
                  <h3 style={{ fontSize: '20px', fontWeight: 600, marginBottom: '12px', color: '#FFF' }}>
                    Time Tracking
                  </h3>
                  <p style={{ color: 'rgba(255,255,255,0.75)', fontSize: '15px', lineHeight: 1.7 }}>
                    Capture time at every step, broken down by role. See where hours accumulate and where bottlenecks form across your entire journey.
                  </p>
                </div>
                
                <div className="feature-card accent-amber">
                  <div className="feature-icon">üí∑</div>
                  <h3 style={{ fontSize: '20px', fontWeight: 600, marginBottom: '12px', color: '#FFF' }}>
                    True Cost Analysis
                  </h3>
                  <p style={{ color: 'rgba(255,255,255,0.75)', fontSize: '15px', lineHeight: 1.7 }}>
                    Fully-burdened costs including salary, employer NI, pension, workspace, and third-party services. See the real numbers, not estimates.
                  </p>
                </div>
                
                <div className="feature-card accent-rose">
                  <div className="feature-icon">üìâ</div>
                  <h3 style={{ fontSize: '20px', fontWeight: 600, marginBottom: '12px', color: '#FFF' }}>
                    Funnel Analysis
                  </h3>
                  <p style={{ color: 'rgba(255,255,255,0.75)', fontSize: '15px', lineHeight: 1.7 }}>
                    Track client volumes through each stage. See drop-offs, calculate wasted investment, and identify your leakiest stages instantly.
                  </p>
                </div>
                
                <div className="feature-card accent-teal">
                  <div className="feature-icon">üë•</div>
                  <h3 style={{ fontSize: '20px', fontWeight: 600, marginBottom: '12px', color: '#FFF' }}>
                    Multi-Perspective Views
                  </h3>
                  <p style={{ color: 'rgba(255,255,255,0.75)', fontSize: '15px', lineHeight: 1.7 }}>
                    See the journey from any role's perspective ‚Äî client, advisor, operations, compliance. Different views reveal different truths.
                  </p>
                </div>
                
                <div className="feature-card accent-purple">
                  <div className="feature-icon">üò§</div>
                  <h3 style={{ fontSize: '20px', fontWeight: 600, marginBottom: '12px', color: '#FFF' }}>
                    Friction Mapping
                  </h3>
                  <p style={{ color: 'rgba(255,255,255,0.75)', fontSize: '15px', lineHeight: 1.7 }}>
                    Identify pain points, emotional states, and cognitive load. Not all work is equal ‚Äî some steps drain more than they should.
                  </p>
                </div>
                
                <div className="feature-card accent-emerald">
                  <div className="feature-icon">üéØ</div>
                  <h3 style={{ fontSize: '20px', fontWeight: 600, marginBottom: '12px', color: '#FFF' }}>
                    Opportunity Scoring
                  </h3>
                  <p style={{ color: 'rgba(255,255,255,0.75)', fontSize: '15px', lineHeight: 1.7 }}>
                    Automatically flag automation opportunities. See potential savings before you start the transformation project.
                  </p>
                </div>
                
                <div className="feature-card accent-indigo">
                  <div className="feature-icon">üìã</div>
                  <h3 style={{ fontSize: '20px', fontWeight: 600, marginBottom: '12px', color: '#FFF' }}>
                    Employee Surveys
                  </h3>
                  <p style={{ color: 'rgba(255,255,255,0.75)', fontSize: '15px', lineHeight: 1.7 }}>
                    Collect ground-truth data from the people who do the work. Role-specific questionnaires capture time, friction, and improvement ideas.
                  </p>
                </div>
                
                <div className="feature-card accent-cyan">
                  <div className="feature-icon">üìä</div>
                  <h3 style={{ fontSize: '20px', fontWeight: 600, marginBottom: '12px', color: '#FFF' }}>
                    Executive Reports
                  </h3>
                  <p style={{ color: 'rgba(255,255,255,0.75)', fontSize: '15px', lineHeight: 1.7 }}>
                    One-click PDF exports with cost summaries, opportunity rankings, and funnel analysis. Board-ready insight without the busywork.
                  </p>
                </div>
              </div>
            </div>
          </section>
          
          {/* How It Works */}
          <section id="how-it-works" style={{ background: 'linear-gradient(145deg, var(--navy-700) 0%, var(--navy-900) 100%)', padding: '100px 0' }}>
            <div className="container">
              <div style={{ textAlign: 'center', marginBottom: '72px' }}>
                <div style={{ fontSize: '13px', color: 'var(--steel-400)', fontWeight: 600, letterSpacing: '1.5px', marginBottom: '16px' }}>HOW IT WORKS</div>
                <h2 style={{ fontSize: '44px', fontWeight: 300, marginBottom: '16px', color: '#FFF', lineHeight: 1.2 }}>
                  From <span style={{ fontWeight: 600 }}>chaos</span> to <span style={{ fontWeight: 600, color: 'var(--steel-400)' }}>clarity</span> in three steps
                </h2>
                <p style={{ fontSize: '18px', color: 'rgba(255,255,255,0.6)', maxWidth: '500px', margin: '0 auto' }}>
                  No consultants. No months of workshops. Just you and your process.
                </p>
              </div>
              
              {/* Timeline */}
              <div style={{ position: 'relative', maxWidth: '1100px', margin: '0 auto' }}>
                {/* Connecting Line */}
                <div style={{ 
                  position: 'absolute', 
                  top: '60px', 
                  left: '15%', 
                  right: '15%', 
                  height: '2px', 
                  background: 'linear-gradient(90deg, var(--steel-500) 0%, var(--amber-500) 50%, #22c55e 100%)',
                  opacity: 0.4,
                  display: 'none'
                }} className="timeline-line"></div>
                
                <div style={{ display: 'grid', gridTemplateColumns: 'repeat(auto-fit, minmax(min(300px, 100%), 1fr))', gap: '32px' }}>
                  {/* Step 1 */}
                  <div style={{ 
                    background: 'rgba(255,255,255,0.05)', 
                    borderRadius: '20px', 
                    padding: '40px 32px',
                    border: '1px solid rgba(255,255,255,0.1)',
                    position: 'relative',
                    overflow: 'hidden'
                  }}>
                    <div style={{ 
                      width: '56px', 
                      height: '56px', 
                      background: 'linear-gradient(135deg, var(--steel-400) 0%, var(--steel-600) 100%)',
                      borderRadius: '16px',
                      display: 'flex',
                      alignItems: 'center',
                      justifyContent: 'center',
                      marginBottom: '24px',
                      fontSize: '24px',
                      fontWeight: 700,
                      color: '#FFF'
                    }}>1</div>
                    <h3 style={{ fontSize: '22px', fontWeight: 600, marginBottom: '12px', color: '#FFF' }}>
                      Map Your Journey
                    </h3>
                    <p style={{ color: 'rgba(255,255,255,0.7)', fontSize: '15px', lineHeight: 1.7, marginBottom: '24px' }}>
                      Define stages and steps. Assign roles, times, and touchpoints. Capture reality ‚Äî not documentation fiction.
                    </p>
                    <div style={{ 
                      background: 'rgba(0,0,0,0.2)', 
                      borderRadius: '10px', 
                      padding: '16px',
                      display: 'flex',
                      gap: '8px',
                      flexWrap: 'wrap'
                    }}>
                      <span style={{ background: 'var(--steel-500)', color: '#FFF', padding: '4px 10px', borderRadius: '6px', fontSize: '12px', fontWeight: 500 }}>üéØ Drag & Drop</span>
                      <span style={{ background: 'var(--steel-500)', color: '#FFF', padding: '4px 10px', borderRadius: '6px', fontSize: '12px', fontWeight: 500 }}>üìã 23 Templates</span>
                    </div>
                  </div>
                  
                  {/* Step 2 */}
                  <div style={{ 
                    background: 'rgba(255,255,255,0.05)', 
                    borderRadius: '20px', 
                    padding: '40px 32px',
                    border: '1px solid rgba(255,255,255,0.1)',
                    position: 'relative',
                    overflow: 'hidden'
                  }}>
                    <div style={{ 
                      width: '56px', 
                      height: '56px', 
                      background: 'linear-gradient(135deg, var(--amber-400) 0%, var(--amber-600) 100%)',
                      borderRadius: '16px',
                      display: 'flex',
                      alignItems: 'center',
                      justifyContent: 'center',
                      marginBottom: '24px',
                      fontSize: '24px',
                      fontWeight: 700,
                      color: '#FFF'
                    }}>2</div>
                    <h3 style={{ fontSize: '22px', fontWeight: 600, marginBottom: '12px', color: '#FFF' }}>
                      Add the Numbers
                    </h3>
                    <p style={{ color: 'rgba(255,255,255,0.7)', fontSize: '15px', lineHeight: 1.7, marginBottom: '24px' }}>
                      Input salaries and volumes. Fathom calculates true costs ‚Äî NI, pension, workspace, the lot.
                    </p>
                    <div style={{ 
                      background: 'rgba(0,0,0,0.2)', 
                      borderRadius: '10px', 
                      padding: '16px',
                      display: 'flex',
                      gap: '8px',
                      flexWrap: 'wrap'
                    }}>
                      <span style={{ background: 'var(--amber-600)', color: '#FFF', padding: '4px 10px', borderRadius: '6px', fontSize: '12px', fontWeight: 500 }}>üí∑ True Cost</span>
                      <span style={{ background: 'var(--amber-600)', color: '#FFF', padding: '4px 10px', borderRadius: '6px', fontSize: '12px', fontWeight: 500 }}>üìâ Drop-off Waste</span>
                    </div>
                  </div>
                  
                  {/* Step 3 */}
                  <div style={{ 
                    background: 'rgba(255,255,255,0.05)', 
                    borderRadius: '20px', 
                    padding: '40px 32px',
                    border: '1px solid rgba(255,255,255,0.1)',
                    position: 'relative',
                    overflow: 'hidden'
                  }}>
                    <div style={{ 
                      width: '56px', 
                      height: '56px', 
                      background: 'linear-gradient(135deg, #34d399 0%, #16a34a 100%)',
                      borderRadius: '16px',
                      display: 'flex',
                      alignItems: 'center',
                      justifyContent: 'center',
                      marginBottom: '24px',
                      fontSize: '24px',
                      fontWeight: 700,
                      color: '#FFF'
                    }}>3</div>
                    <h3 style={{ fontSize: '22px', fontWeight: 600, marginBottom: '12px', color: '#FFF' }}>
                      Decide with Confidence
                    </h3>
                    <p style={{ color: 'rgba(255,255,255,0.7)', fontSize: '15px', lineHeight: 1.7, marginBottom: '24px' }}>
                      Export reports, share with stakeholders, and prioritise based on real impact ‚Äî not hunches.
                    </p>
                    <div style={{ 
                      background: 'rgba(0,0,0,0.2)', 
                      borderRadius: '10px', 
                      padding: '16px',
                      display: 'flex',
                      gap: '8px',
                      flexWrap: 'wrap'
                    }}>
                      <span style={{ background: '#16a34a', color: '#FFF', padding: '4px 10px', borderRadius: '6px', fontSize: '12px', fontWeight: 500 }}>üìä PDF Reports</span>
                      <span style={{ background: '#16a34a', color: '#FFF', padding: '4px 10px', borderRadius: '6px', fontSize: '12px', fontWeight: 500 }}>üéØ ROI Ready</span>
                    </div>
                  </div>
                </div>
              </div>
              
              {/* CTA */}
              <div style={{ textAlign: 'center', marginTop: '56px' }}>
                <button onClick={onGetStarted} className="btn" style={{ 
                  background: '#FFF', 
                  color: 'var(--navy-700)', 
                  padding: '18px 40px', 
                  fontSize: '16px', 
                  fontWeight: 600,
                  borderRadius: '12px'
                }}>
                  Start Mapping Now ‚Üí
                </button>
              </div>
            </div>
          </section>
          
          {/* Visual Journey Editor Showcase */}
          <section className="section section-alt">
            <div className="container">
              <div className="showcase-flex" style={{ display: 'flex', gap: '80px', alignItems: 'center', flexWrap: 'wrap' }}>
                <div className="showcase-content" style={{ flex: '1 1 440px' }}>
                  <div style={{ 
                    padding: '10px 18px', 
                    background: 'var(--steel-100)', 
                    borderRadius: '24px', 
                    display: 'inline-block',
                    marginBottom: '24px',
                    fontSize: '13px',
                    color: 'var(--steel-500)',
                    fontWeight: 600,
                    letterSpacing: '0.5px'
                  }}>
                    VISUAL EDITOR
                  </div>
                  <h2 style={{ fontSize: '36px', fontWeight: 300, marginBottom: '24px', color: 'var(--navy-700)', lineHeight: 1.25 }}>
                    See the whole journey.<br/>Zoom into any step.
                  </h2>
                  <p style={{ color: 'var(--slate-600)', fontSize: '17px', marginBottom: '20px', lineHeight: 1.8 }}>
                    Fathom's editor shows your entire process at a glance ‚Äî stages flow left to right, steps stack within each stage. Click any step to see the full picture: who does it, how long it takes, what pain points exist.
                  </p>
                  <p style={{ color: 'var(--slate-600)', fontSize: '17px', marginBottom: '32px', lineHeight: 1.8 }}>
                    Colour-coded time bars show duration at a glance. Friction indicators reveal where work is hardest. Status icons flag checkpoints, regulatory requirements, and improvement opportunities.
                  </p>
                  
                  <div style={{ display: 'flex', flexDirection: 'column', gap: '16px' }}>
                    <div style={{ display: 'flex', alignItems: 'flex-start', gap: '14px' }}>
                      <div style={{ width: '28px', height: '28px', borderRadius: '50%', background: 'var(--steel-100)', display: 'flex', alignItems: 'center', justifyContent: 'center', flexShrink: 0, marginTop: '2px' }}>
                        <span style={{ color: 'var(--steel-500)', fontSize: '14px' }}>‚úì</span>
                      </div>
                      <div>
                        <div style={{ fontWeight: 600, color: 'var(--navy-700)', marginBottom: '2px' }}>Drag and drop organisation</div>
                        <div style={{ fontSize: '14px', color: 'var(--slate-600)' }}>Reorder stages and steps with simple drag gestures</div>
                      </div>
                    </div>
                    <div style={{ display: 'flex', alignItems: 'flex-start', gap: '14px' }}>
                      <div style={{ width: '28px', height: '28px', borderRadius: '50%', background: 'var(--steel-100)', display: 'flex', alignItems: 'center', justifyContent: 'center', flexShrink: 0, marginTop: '2px' }}>
                        <span style={{ color: 'var(--steel-500)', fontSize: '14px' }}>‚úì</span>
                      </div>
                      <div>
                        <div style={{ fontWeight: 600, color: 'var(--navy-700)', marginBottom: '2px' }}>Role-based perspectives</div>
                        <div style={{ fontSize: '14px', color: 'var(--slate-600)' }}>Filter to see just client-facing steps, or just back-office</div>
                      </div>
                    </div>
                    <div style={{ display: 'flex', alignItems: 'flex-start', gap: '14px' }}>
                      <div style={{ width: '28px', height: '28px', borderRadius: '50%', background: 'var(--steel-100)', display: 'flex', alignItems: 'center', justifyContent: 'center', flexShrink: 0, marginTop: '2px' }}>
                        <span style={{ color: 'var(--steel-500)', fontSize: '14px' }}>‚úì</span>
                      </div>
                      <div>
                        <div style={{ fontWeight: 600, color: 'var(--navy-700)', marginBottom: '2px' }}>Industry templates</div>
                        <div style={{ fontSize: '14px', color: 'var(--slate-600)' }}>Start from financial services, insurance, or HR templates</div>
                      </div>
                    </div>
                  </div>
                </div>
                
                <div className="showcase-visual" style={{ flex: '1 1 480px' }}>
                  <div style={{ 
                    background: 'linear-gradient(145deg, #FFF 0%, var(--slate-50) 100%)',
                    borderRadius: '20px',
                    padding: '24px',
                    boxShadow: '0 8px 32px rgba(0,0,0,0.08)',
                    border: '1px solid var(--slate-200)'
                  }}>
                    {/* Mini Stage Cards */}
                    <div className="journey-preview-stages" style={{ display: 'flex', gap: '12px', overflowX: 'auto' }}>
                      {[
                        { name: 'Discovery', time: '2h 15m', steps: ['Initial Call', 'Requirements', 'Proposal'] },
                        { name: 'Compliance', time: '4h 30m', steps: ['KYC Check', 'AML Verify', 'Risk Profile'], highlight: true },
                        { name: 'Onboarding', time: '1h 45m', steps: ['Account Setup', 'Welcome Pack'] }
                      ].map((stage, i) => (
                        <div key={i} className="journey-preview-stage" style={{ 
                          flex: '1 0 160px',
                          background: '#FFF',
                          borderRadius: '12px',
                          overflow: 'hidden',
                          border: '1px solid var(--slate-200)'
                        }}>
                          <div style={{ 
                            background: stage.highlight ? 'var(--navy-700)' : 'var(--navy-900)', 
                            color: '#FFF', 
                            padding: '12px 14px',
                            display: 'flex',
                            justifyContent: 'space-between',
                            alignItems: 'center'
                          }}>
                            <div style={{ fontSize: '12px', fontWeight: 600 }}>{stage.name}</div>
                            <div style={{ fontSize: '11px', opacity: 0.8 }}>{stage.time}</div>
                          </div>
                          <div style={{ padding: '10px' }}>
                            {stage.steps.map((step, j) => (
                              <div key={j} style={{ 
                                padding: '8px 10px', 
                                marginBottom: '6px',
                                background: 'var(--slate-50)', 
                                borderRadius: '6px',
                                fontSize: '11px',
                                color: 'var(--navy-700)',
                                display: 'flex',
                                alignItems: 'center',
                                gap: '6px'
                              }}>
                                <span style={{ color: 'var(--slate-400)', fontSize: '10px' }}>{i+1}.{j+1}</span>
                                {step}
                                {j === 1 && stage.highlight && <span style={{ marginLeft: 'auto', fontSize: '10px' }}>üò§</span>}
                              </div>
                            ))}
                          </div>
                        </div>
                      ))}
                    </div>
                    
                    {/* Stats Preview */}
                    <div style={{ 
                      marginTop: '16px', 
                      padding: '14px 18px', 
                      background: '#FFF', 
                      borderRadius: '10px',
                      border: '1px solid var(--slate-200)',
                      display: 'flex',
                      gap: '24px',
                      justifyContent: 'center',
                      flexWrap: 'wrap'
                    }}>
                      <div style={{ textAlign: 'center' }}>
                        <div style={{ fontSize: '10px', color: 'var(--slate-500)', textTransform: 'uppercase', marginBottom: '4px' }}>Total Time</div>
                        <div style={{ fontSize: '16px', fontWeight: 600, color: 'var(--navy-700)' }}>8h 30m</div>
                      </div>
                      <div style={{ textAlign: 'center' }}>
                        <div style={{ fontSize: '10px', color: 'var(--slate-500)', textTransform: 'uppercase', marginBottom: '4px' }}>Steps</div>
                        <div style={{ fontSize: '16px', fontWeight: 600, color: 'var(--navy-700)' }}>8</div>
                      </div>
                      <div style={{ textAlign: 'center' }}>
                        <div style={{ fontSize: '10px', color: 'var(--slate-500)', textTransform: 'uppercase', marginBottom: '4px' }}>Pain Points</div>
                        <div style={{ fontSize: '16px', fontWeight: 600, color: 'var(--error)' }}>3</div>
                      </div>
                      <div style={{ textAlign: 'center' }}>
                        <div style={{ fontSize: '10px', color: 'var(--slate-500)', textTransform: 'uppercase', marginBottom: '4px' }}>Opportunities</div>
                        <div style={{ fontSize: '16px', fontWeight: 600, color: 'var(--success)' }}>4</div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </section>
          
          {/* Cost Analysis Showcase */}
          <section className="section">
            <div className="container">
              <div style={{ display: 'flex', gap: '80px', alignItems: 'center', flexWrap: 'wrap' }}>
                <div style={{ flex: '1 1 480px', order: 1 }}>
                  <div style={{ 
                    background: 'linear-gradient(145deg, #FFF 0%, var(--slate-50) 100%)',
                    borderRadius: '20px',
                    padding: '28px',
                    boxShadow: '0 8px 32px rgba(0,0,0,0.08)',
                    border: '1px solid var(--slate-200)'
                  }}>
                    {/* Cost Header */}
                    <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '20px' }}>
                      <div>
                        <div style={{ fontSize: '11px', color: 'var(--slate-500)', textTransform: 'uppercase', letterSpacing: '0.5px' }}>Cost per Journey</div>
                        <div style={{ fontSize: '32px', fontWeight: 300, color: 'var(--navy-700)' }}>¬£2,847</div>
                      </div>
                      <div style={{ 
                        background: 'var(--success-light)', 
                        padding: '8px 14px', 
                        borderRadius: '20px',
                        fontSize: '13px',
                        color: 'var(--success)',
                        fontWeight: 600
                      }}>
                        üí∑ Cost View
                      </div>
                    </div>
                    
                    {/* Cost Breakdown Bars */}
                    <div style={{ marginBottom: '20px' }}>
                      {[
                        { label: 'Compliance Team', good: 65, bad: 35, total: '¬£1,240' },
                        { label: 'Client-Facing', good: 85, bad: 15, total: '¬£890' },
                        { label: 'Operations', good: 45, bad: 55, total: '¬£520' },
                        { label: 'External Services', good: 100, bad: 0, total: '¬£197' }
                      ].map((row, i) => (
                        <div key={i} style={{ marginBottom: '12px' }}>
                          <div style={{ display: 'flex', justifyContent: 'space-between', marginBottom: '4px' }}>
                            <span style={{ fontSize: '12px', color: 'var(--slate-600)' }}>{row.label}</span>
                            <span style={{ fontSize: '12px', fontWeight: 600, color: 'var(--navy-700)' }}>{row.total}</span>
                          </div>
                          <div style={{ display: 'flex', height: '8px', borderRadius: '4px', overflow: 'hidden', background: 'var(--slate-100)' }}>
                            <div style={{ width: `${row.good}%`, background: 'var(--success)' }}></div>
                            <div style={{ width: `${row.bad}%`, background: 'var(--error)', opacity: 0.7 }}></div>
                          </div>
                        </div>
                      ))}
                    </div>
                    
                    {/* Legend */}
                    <div style={{ display: 'flex', gap: '20px', padding: '12px 16px', background: '#FFF', borderRadius: '8px', border: '1px solid var(--slate-200)' }}>
                      <div style={{ display: 'flex', alignItems: 'center', gap: '8px' }}>
                        <div style={{ width: '12px', height: '12px', borderRadius: '3px', background: 'var(--success)' }}></div>
                        <span style={{ fontSize: '12px', color: 'var(--slate-600)' }}>Good Cost (productive)</span>
                      </div>
                      <div style={{ display: 'flex', alignItems: 'center', gap: '8px' }}>
                        <div style={{ width: '12px', height: '12px', borderRadius: '3px', background: 'var(--error)', opacity: 0.7 }}></div>
                        <span style={{ fontSize: '12px', color: 'var(--slate-600)' }}>Bad Cost (waste)</span>
                      </div>
                    </div>
                  </div>
                </div>
                
                <div style={{ flex: '1 1 440px', order: 2 }}>
                  <div style={{ 
                    padding: '10px 18px', 
                    background: 'var(--amber-100)', 
                    borderRadius: '24px', 
                    display: 'inline-block',
                    marginBottom: '24px',
                    fontSize: '13px',
                    color: 'var(--amber-700)',
                    fontWeight: 600,
                    letterSpacing: '0.5px'
                  }}>
                    TRUE COST ANALYSIS
                  </div>
                  <h2 style={{ fontSize: '36px', fontWeight: 300, marginBottom: '24px', color: 'var(--navy-700)', lineHeight: 1.25 }}>
                    Know the real cost.<br/>Not just salaries.
                  </h2>
                  <p style={{ color: 'var(--slate-600)', fontSize: '17px', marginBottom: '20px', lineHeight: 1.8 }}>
                    A ¬£50k salary costs far more than ¬£50k. Add employer NI, pension contributions, workspace, equipment, and software licenses ‚Äî the true cost is often <strong style={{ color: 'var(--navy-700)' }}>40% higher</strong>.
                  </p>
                  <p style={{ color: 'var(--slate-600)', fontSize: '17px', marginBottom: '32px', lineHeight: 1.8 }}>
                    Fathom calculates fully-burdened costs automatically. See exactly what each step costs, who's spending the money, and whether it's productive work or waste waiting to be eliminated.
                  </p>
                  
                  <div style={{ display: 'flex', flexDirection: 'column', gap: '16px' }}>
                    <div style={{ display: 'flex', alignItems: 'flex-start', gap: '14px' }}>
                      <div style={{ width: '28px', height: '28px', borderRadius: '50%', background: 'var(--amber-100)', display: 'flex', alignItems: 'center', justifyContent: 'center', flexShrink: 0, marginTop: '2px' }}>
                        <span style={{ color: 'var(--amber-700)', fontSize: '14px' }}>‚úì</span>
                      </div>
                      <div>
                        <div style={{ fontWeight: 600, color: 'var(--navy-700)', marginBottom: '2px' }}>Burden multipliers built in</div>
                        <div style={{ fontSize: '14px', color: 'var(--slate-600)' }}>Configure NI, pension, and overhead rates per role</div>
                      </div>
                    </div>
                    <div style={{ display: 'flex', alignItems: 'flex-start', gap: '14px' }}>
                      <div style={{ width: '28px', height: '28px', borderRadius: '50%', background: 'var(--amber-100)', display: 'flex', alignItems: 'center', justifyContent: 'center', flexShrink: 0, marginTop: '2px' }}>
                        <span style={{ color: 'var(--amber-700)', fontSize: '14px' }}>‚úì</span>
                      </div>
                      <div>
                        <div style={{ fontWeight: 600, color: 'var(--navy-700)', marginBottom: '2px' }}>Good cost vs bad cost</div>
                        <div style={{ fontSize: '14px', color: 'var(--slate-600)' }}>See productive spend versus waste from drop-offs</div>
                      </div>
                    </div>
                    <div style={{ display: 'flex', alignItems: 'flex-start', gap: '14px' }}>
                      <div style={{ width: '28px', height: '28px', borderRadius: '50%', background: 'var(--amber-100)', display: 'flex', alignItems: 'center', justifyContent: 'center', flexShrink: 0, marginTop: '2px' }}>
                        <span style={{ color: 'var(--amber-700)', fontSize: '14px' }}>‚úì</span>
                      </div>
                      <div>
                        <div style={{ fontWeight: 600, color: 'var(--navy-700)', marginBottom: '2px' }}>Third-party costs included</div>
                        <div style={{ fontSize: '14px', color: 'var(--slate-600)' }}>Credit checks, verification services, and external fees</div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </section>
          
          {/* Funnel Analysis Showcase */}
          <section className="section section-alt">
            <div className="container">
              <div style={{ display: 'flex', gap: '80px', alignItems: 'center', flexWrap: 'wrap' }}>
                <div style={{ flex: '1 1 440px' }}>
                  <div style={{ 
                    padding: '10px 18px', 
                    background: 'var(--error-light)', 
                    borderRadius: '24px', 
                    display: 'inline-block',
                    marginBottom: '24px',
                    fontSize: '13px',
                    color: 'var(--error)',
                    fontWeight: 600,
                    letterSpacing: '0.5px'
                  }}>
                    FUNNEL ANALYSIS
                  </div>
                  <h2 style={{ fontSize: '36px', fontWeight: 300, marginBottom: '24px', color: 'var(--navy-700)', lineHeight: 1.25 }}>
                    Find the leaks.<br/>Stop the waste.
                  </h2>
                  <p style={{ color: 'var(--slate-600)', fontSize: '17px', marginBottom: '20px', lineHeight: 1.8 }}>
                    Not everyone who starts a journey finishes it. Clients drop out, applications stall, deals fall through. Each drop-off represents wasted investment ‚Äî time and money spent on someone who never converted.
                  </p>
                  <p style={{ color: 'var(--slate-600)', fontSize: '17px', marginBottom: '32px', lineHeight: 1.8 }}>
                    Fathom tracks volumes through every stage. See exactly where people drop off, calculate the cost of each lost client, and identify which stages leak the most value.
                  </p>
                  
                  <div style={{ display: 'flex', flexDirection: 'column', gap: '16px' }}>
                    <div style={{ display: 'flex', alignItems: 'flex-start', gap: '14px' }}>
                      <div style={{ width: '28px', height: '28px', borderRadius: '50%', background: 'var(--error-light)', display: 'flex', alignItems: 'center', justifyContent: 'center', flexShrink: 0, marginTop: '2px' }}>
                        <span style={{ color: 'var(--error)', fontSize: '14px' }}>‚úì</span>
                      </div>
                      <div>
                        <div style={{ fontWeight: 600, color: 'var(--navy-700)', marginBottom: '2px' }}>Volume tracking per stage</div>
                        <div style={{ fontSize: '14px', color: 'var(--slate-600)' }}>Enter starting volumes and drop-off counts</div>
                      </div>
                    </div>
                    <div style={{ display: 'flex', alignItems: 'flex-start', gap: '14px' }}>
                      <div style={{ width: '28px', height: '28px', borderRadius: '50%', background: 'var(--error-light)', display: 'flex', alignItems: 'center', justifyContent: 'center', flexShrink: 0, marginTop: '2px' }}>
                        <span style={{ color: 'var(--error)', fontSize: '14px' }}>‚úì</span>
                      </div>
                      <div>
                        <div style={{ fontWeight: 600, color: 'var(--navy-700)', marginBottom: '2px' }}>Waste calculation</div>
                        <div style={{ fontSize: '14px', color: 'var(--slate-600)' }}>See exactly how much each drop-off costs you</div>
                      </div>
                    </div>
                    <div style={{ display: 'flex', alignItems: 'flex-start', gap: '14px' }}>
                      <div style={{ width: '28px', height: '28px', borderRadius: '50%', background: 'var(--error-light)', display: 'flex', alignItems: 'center', justifyContent: 'center', flexShrink: 0, marginTop: '2px' }}>
                        <span style={{ color: 'var(--error)', fontSize: '14px' }}>‚úì</span>
                      </div>
                      <div>
                        <div style={{ fontWeight: 600, color: 'var(--navy-700)', marginBottom: '2px' }}>Conversion benchmarking</div>
                        <div style={{ fontSize: '14px', color: 'var(--slate-600)' }}>Compare actual vs target completion rates</div>
                      </div>
                    </div>
                  </div>
                </div>
                
                <div style={{ flex: '1 1 480px' }}>
                  <div style={{ 
                    background: 'linear-gradient(145deg, #FFF 0%, var(--slate-50) 100%)',
                    borderRadius: '20px',
                    padding: '28px',
                    boxShadow: '0 8px 32px rgba(0,0,0,0.08)',
                    border: '1px solid var(--slate-200)'
                  }}>
                    {/* Funnel Header */}
                    <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '24px' }}>
                      <div>
                        <div style={{ fontSize: '11px', color: 'var(--slate-500)', textTransform: 'uppercase', letterSpacing: '0.5px' }}>Annual Volume</div>
                        <div style={{ fontSize: '28px', fontWeight: 300, color: 'var(--navy-700)' }}>1,000 clients</div>
                      </div>
                      <div style={{ textAlign: 'right' }}>
                        <div style={{ fontSize: '11px', color: 'var(--slate-500)', textTransform: 'uppercase' }}>Waste</div>
                        <div style={{ fontSize: '24px', fontWeight: 600, color: 'var(--error)' }}>¬£284k</div>
                      </div>
                    </div>
                    
                    {/* Funnel Stages */}
                    <div style={{ position: 'relative' }}>
                      {[
                        { stage: 'Discovery', entered: 1000, passed: 850, width: '100%' },
                        { stage: 'Compliance', entered: 850, passed: 680, width: '85%' },
                        { stage: 'Proposal', entered: 680, passed: 620, width: '68%' },
                        { stage: 'Onboarding', entered: 620, passed: 580, width: '62%' }
                      ].map((row, i) => (
                        <div key={i} style={{ marginBottom: '12px' }}>
                          <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '6px' }}>
                            <span style={{ fontSize: '13px', fontWeight: 600, color: 'var(--navy-700)' }}>{row.stage}</span>
                            <div style={{ display: 'flex', alignItems: 'center', gap: '12px' }}>
                              <span style={{ fontSize: '12px', color: 'var(--slate-600)' }}>{row.entered} ‚Üí {row.passed}</span>
                              {row.entered - row.passed > 0 && (
                                <span style={{ fontSize: '11px', color: 'var(--error)', fontWeight: 600 }}>
                                  -{row.entered - row.passed} dropped
                                </span>
                              )}
                            </div>
                          </div>
                          <div style={{ 
                            height: '24px', 
                            background: 'var(--slate-100)', 
                            borderRadius: '6px',
                            overflow: 'hidden',
                            position: 'relative'
                          }}>
                            <div style={{ 
                              width: row.width, 
                              height: '100%', 
                              background: 'linear-gradient(90deg, var(--steel-500) 0%, var(--steel-400) 100%)',
                              borderRadius: '6px',
                              display: 'flex',
                              alignItems: 'center',
                              justifyContent: 'flex-end',
                              paddingRight: '10px'
                            }}>
                              <span style={{ fontSize: '11px', color: '#FFF', fontWeight: 600 }}>{row.passed}</span>
                            </div>
                          </div>
                        </div>
                      ))}
                    </div>
                    
                    {/* Completion Rate */}
                    <div style={{ 
                      marginTop: '20px', 
                      padding: '14px 18px', 
                      background: '#FFF', 
                      borderRadius: '10px',
                      border: '1px solid var(--slate-200)',
                      display: 'flex',
                      justifyContent: 'space-between',
                      alignItems: 'center'
                    }}>
                      <div>
                        <div style={{ fontSize: '11px', color: 'var(--slate-500)', textTransform: 'uppercase' }}>Completion Rate</div>
                        <div style={{ fontSize: '20px', fontWeight: 600, color: 'var(--navy-700)' }}>58%</div>
                      </div>
                      <div style={{ textAlign: 'right' }}>
                        <div style={{ fontSize: '11px', color: 'var(--slate-500)', textTransform: 'uppercase' }}>Lost Clients</div>
                        <div style={{ fontSize: '20px', fontWeight: 600, color: 'var(--error)' }}>420</div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </section>
          
          {/* Collaborative Intelligence Section */}
          <section className="section section-alt">
            <div className="container">
              <div style={{ display: 'flex', gap: '80px', alignItems: 'center', flexWrap: 'wrap' }}>
                <div style={{ flex: '1 1 400px' }}>
                  <div style={{ 
                    background: 'linear-gradient(145deg, #FFF 0%, var(--slate-50) 100%)',
                    borderRadius: '20px',
                    padding: '40px',
                    boxShadow: '0 8px 32px rgba(0,0,0,0.08)',
                    border: '1px solid var(--slate-200)'
                  }}>
                    {/* Survey Preview */}
                    <div style={{ marginBottom: '24px' }}>
                      <div style={{ display: 'flex', alignItems: 'center', gap: '12px', marginBottom: '20px' }}>
                        <div style={{ width: '40px', height: '40px', borderRadius: '10px', background: 'var(--navy-900)', display: 'flex', alignItems: 'center', justifyContent: 'center', color: '#FFF', fontSize: '18px' }}>üìã</div>
                        <div>
                          <div style={{ fontSize: '13px', color: 'var(--slate-500)' }}>Process Survey</div>
                          <div style={{ fontWeight: 600, color: 'var(--navy-700)' }}>Client Onboarding</div>
                        </div>
                      </div>
                    </div>
                    
                    <div style={{ background: '#FFF', borderRadius: '12px', padding: '20px', border: '1px solid var(--slate-200)', marginBottom: '16px' }}>
                      <div style={{ fontSize: '11px', color: 'var(--steel-500)', fontWeight: 600, textTransform: 'uppercase', letterSpacing: '0.5px', marginBottom: '8px' }}>Stage 2 ¬∑ Opportunity Qualification</div>
                      <div style={{ fontWeight: 600, color: 'var(--navy-700)', marginBottom: '16px' }}>Initial Client Call</div>
                      
                      <div style={{ marginBottom: '16px' }}>
                        <div style={{ fontSize: '13px', color: 'var(--slate-600)', marginBottom: '6px' }}>How long does this typically take you?</div>
                        <div style={{ display: 'flex', alignItems: 'center', gap: '8px' }}>
                          <div style={{ flex: 1, height: '38px', background: 'var(--slate-100)', borderRadius: '6px', border: '2px solid var(--slate-200)', display: 'flex', alignItems: 'center', paddingLeft: '12px', color: 'var(--slate-500)', fontSize: '14px' }}>25</div>
                          <div style={{ background: 'var(--slate-100)', padding: '8px 14px', borderRadius: '6px', fontSize: '13px', color: 'var(--slate-600)' }}>minutes</div>
                        </div>
                      </div>
                      
                      <div>
                        <div style={{ fontSize: '13px', color: 'var(--slate-600)', marginBottom: '8px' }}>How much friction do you experience?</div>
                        <div style={{ display: 'flex', gap: '8px' }}>
                          {[
                            { emoji: 'üòä', label: 'None' },
                            { emoji: 'üôÇ', label: 'Low', selected: true },
                            { emoji: 'üòê', label: 'Medium' },
                            { emoji: 'üò´', label: 'High' }
                          ].map((opt, i) => (
                            <div key={i} style={{ 
                              flex: 1, 
                              padding: '10px 6px', 
                              border: opt.selected ? '2px solid var(--steel-500)' : '1px solid var(--slate-200)', 
                              borderRadius: '8px', 
                              textAlign: 'center',
                              background: opt.selected ? 'rgba(91, 138, 154, 0.1)' : '#FFF'
                            }}>
                              <div style={{ fontSize: '20px', marginBottom: '2px' }}>{opt.emoji}</div>
                              <div style={{ fontSize: '10px', fontWeight: 600, color: 'var(--slate-600)' }}>{opt.label}</div>
                            </div>
                          ))}
                        </div>
                      </div>
                    </div>
                    
                    <div style={{ display: 'flex', alignItems: 'center', gap: '8px', color: 'var(--slate-500)', fontSize: '13px' }}>
                      <span>‚úì</span>
                      <span>Step 2 of 5 ¬∑ About 4 minutes remaining</span>
                    </div>
                  </div>
                </div>
                
                <div style={{ flex: '1 1 440px' }}>
                  <div style={{ 
                    padding: '10px 18px', 
                    background: 'var(--success-light)', 
                    borderRadius: '24px', 
                    display: 'inline-block',
                    marginBottom: '24px',
                    fontSize: '13px',
                    color: 'var(--success)',
                    fontWeight: 600,
                    letterSpacing: '0.5px'
                  }}>
                    COLLABORATIVE INTELLIGENCE
                  </div>
                  <h2 style={{ fontSize: '36px', fontWeight: 300, marginBottom: '24px', color: 'var(--navy-700)', lineHeight: 1.25 }}>
                    Don't guess.<br/>Ask the people who do the work.
                  </h2>
                  <p style={{ color: 'var(--slate-600)', fontSize: '17px', marginBottom: '20px', lineHeight: 1.8 }}>
                    Top-down process mapping misses the truth. The people doing the work know where time is wasted, what causes friction, and what could be better ‚Äî <strong style={{ color: 'var(--navy-700)' }}>but no one asks them</strong>.
                  </p>
                  <p style={{ color: 'var(--slate-600)', fontSize: '17px', marginBottom: '32px', lineHeight: 1.8 }}>
                    Fathom's built-in survey system sends personalised questionnaires to everyone involved in your process. Each person only sees the steps relevant to their role. Responses flow back into your journey map automatically ‚Äî giving you ground-truth data, not boardroom assumptions.
                  </p>
                  
                  <div style={{ display: 'flex', flexDirection: 'column', gap: '16px' }}>
                    <div style={{ display: 'flex', alignItems: 'flex-start', gap: '14px' }}>
                      <div style={{ width: '28px', height: '28px', borderRadius: '50%', background: 'var(--success-light)', display: 'flex', alignItems: 'center', justifyContent: 'center', flexShrink: 0, marginTop: '2px' }}>
                        <span style={{ color: 'var(--success)', fontSize: '14px' }}>‚úì</span>
                      </div>
                      <div>
                        <div style={{ fontWeight: 600, color: 'var(--navy-700)', marginBottom: '2px' }}>Role-specific surveys</div>
                        <div style={{ fontSize: '14px', color: 'var(--slate-600)' }}>Each person only sees steps assigned to their role</div>
                      </div>
                    </div>
                    <div style={{ display: 'flex', alignItems: 'flex-start', gap: '14px' }}>
                      <div style={{ width: '28px', height: '28px', borderRadius: '50%', background: 'var(--success-light)', display: 'flex', alignItems: 'center', justifyContent: 'center', flexShrink: 0, marginTop: '2px' }}>
                        <span style={{ color: 'var(--success)', fontSize: '14px' }}>‚úì</span>
                      </div>
                      <div>
                        <div style={{ fontWeight: 600, color: 'var(--navy-700)', marginBottom: '2px' }}>No login required</div>
                        <div style={{ fontSize: '14px', color: 'var(--slate-600)' }}>Mobile-friendly links work instantly for all respondents</div>
                      </div>
                    </div>
                    <div style={{ display: 'flex', alignItems: 'flex-start', gap: '14px' }}>
                      <div style={{ width: '28px', height: '28px', borderRadius: '50%', background: 'var(--success-light)', display: 'flex', alignItems: 'center', justifyContent: 'center', flexShrink: 0, marginTop: '2px' }}>
                        <span style={{ color: 'var(--success)', fontSize: '14px' }}>‚úì</span>
                      </div>
                      <div>
                        <div style={{ fontWeight: 600, color: 'var(--navy-700)', marginBottom: '2px' }}>Capture pain points & ideas</div>
                        <div style={{ fontSize: '14px', color: 'var(--slate-600)' }}>Time estimates, friction, regulatory notes, and improvement suggestions</div>
                      </div>
                    </div>
                    <div style={{ display: 'flex', alignItems: 'flex-start', gap: '14px' }}>
                      <div style={{ width: '28px', height: '28px', borderRadius: '50%', background: 'var(--success-light)', display: 'flex', alignItems: 'center', justifyContent: 'center', flexShrink: 0, marginTop: '2px' }}>
                        <span style={{ color: 'var(--success)', fontSize: '14px' }}>‚úì</span>
                      </div>
                      <div>
                        <div style={{ fontWeight: 600, color: 'var(--navy-700)', marginBottom: '2px' }}>Build trust, not resentment</div>
                        <div style={{ fontSize: '14px', color: 'var(--slate-600)' }}>People support change when they helped design it</div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </section>
          
          {/* Use Case Section */}
          <section id="use-cases" className="section section-alt">
            <div className="container">
              <div style={{ display: 'flex', gap: '80px', alignItems: 'center', flexWrap: 'wrap' }}>
                <div style={{ flex: '1 1 440px' }}>
                  <div style={{ 
                    padding: '10px 18px', 
                    background: 'var(--amber-100)', 
                    borderRadius: '24px', 
                    display: 'inline-block',
                    marginBottom: '24px',
                    fontSize: '13px',
                    color: 'var(--amber-700)',
                    fontWeight: 600,
                    letterSpacing: '0.5px'
                  }}>
                    BUILT FOR FINANCIAL SERVICES
                  </div>
                  <h2 style={{ fontSize: '36px', fontWeight: 300, marginBottom: '24px', color: 'var(--navy-700)', lineHeight: 1.25 }}>
                    Client onboarding is expensive. <br/>Now you can see exactly where.
                  </h2>
                  <p style={{ color: 'var(--slate-600)', fontSize: '17px', marginBottom: '20px', lineHeight: 1.8 }}>
                    UK Financial Services firms spend thousands onboarding each client. Multiple handoffs, compliance checks, data re-entry, and manual processes add up ‚Äî but until now, the true cost was invisible.
                  </p>
                  <p style={{ color: 'var(--slate-600)', fontSize: '17px', marginBottom: '32px', lineHeight: 1.8 }}>
                    Fathom was designed for exactly this challenge. Map your onboarding journey once, and see the cost of every step, every role, every drop-off. Make your business case with real numbers.
                  </p>
                  <button onClick={onGetStarted} className="btn btn-primary">
                    Start Mapping Your Journey
                  </button>
                </div>
                <div style={{ flex: '1 1 400px' }}>
                  <div style={{ 
                    background: 'linear-gradient(145deg, var(--navy-700) 0%, var(--navy-900) 100%)',
                    borderRadius: '20px',
                    padding: '44px',
                    color: '#FFF',
                    boxShadow: '0 24px 48px rgba(12, 22, 32, 0.3)'
                  }}>
                    <div style={{ fontSize: '12px', opacity: 0.6, marginBottom: '32px', textTransform: 'uppercase', letterSpacing: '1.5px', fontWeight: 600 }}>
                      Example Insight Report
                    </div>
                    <div style={{ fontSize: '52px', fontWeight: 300, marginBottom: '8px', letterSpacing: '-1px' }}>¬£2,847</div>
                    <div style={{ fontSize: '16px', opacity: 0.7, marginBottom: '40px' }}>Average cost per client onboarded</div>
                    
                    <div style={{ display: 'grid', gridTemplateColumns: '1fr 1fr', gap: '32px' }}>
                      <div>
                        <div style={{ fontSize: '28px', fontWeight: 600, color: 'var(--error)' }}>¬£892</div>
                        <div style={{ fontSize: '13px', opacity: 0.6, marginTop: '4px' }}>Wasted on drop-offs</div>
                      </div>
                      <div>
                        <div style={{ fontSize: '28px', fontWeight: 600, color: 'var(--amber-500)' }}>38%</div>
                        <div style={{ fontSize: '13px', opacity: 0.6, marginTop: '4px' }}>Automation potential</div>
                      </div>
                      <div>
                        <div style={{ fontSize: '28px', fontWeight: 600, color: 'var(--steel-400)' }}>4.2hrs</div>
                        <div style={{ fontSize: '13px', opacity: 0.6, marginTop: '4px' }}>Compliance time</div>
                      </div>
                      <div>
                        <div style={{ fontSize: '28px', fontWeight: 600, color: 'var(--success)' }}>¬£156k</div>
                        <div style={{ fontSize: '13px', opacity: 0.6, marginTop: '4px' }}>Potential annual saving</div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </section>
          
          {/* Templates Library Section */}
          <section id="templates" className="section">
            <div className="container">
              <div style={{ textAlign: 'center', marginBottom: '56px' }}>
                <div style={{ fontSize: '13px', color: 'var(--steel-500)', fontWeight: 600, letterSpacing: '1px', marginBottom: '12px' }}>STARTER TEMPLATES</div>
                <h2 style={{ fontSize: '40px', fontWeight: 300, marginBottom: '16px', color: 'var(--navy-700)' }}>
                  Hit the ground running with <span style={{ fontWeight: 600 }}>23 ready-made templates</span>
                </h2>
                <p style={{ fontSize: '18px', color: 'var(--slate-600)', maxWidth: '680px', margin: '0 auto' }}>
                  Don't start from scratch. Each template includes realistic stages, steps, personas, time estimates, and funnel data ‚Äî ready to customise for your organisation.
                </p>
              </div>
              
              {/* Template Categories */}
              <div style={{ display: 'flex', flexDirection: 'column', gap: '40px' }}>
                
                {/* Financial Services */}
                <div>
                  <div style={{ display: 'flex', alignItems: 'center', gap: '12px', marginBottom: '20px' }}>
                    <span style={{ fontSize: '24px' }}>üè¶</span>
                    <h3 style={{ fontSize: '20px', fontWeight: 600, color: 'var(--navy-700)', margin: 0 }}>Financial Services</h3>
                  </div>
                  <div style={{ display: 'grid', gridTemplateColumns: 'repeat(auto-fill, minmax(min(280px, 100%), 1fr))', gap: '16px' }}>
                    {[
                      { icon: 'üè¶', name: 'Client Onboarding', desc: 'Wealth management with KYC & compliance' },
                      { icon: 'üè†', name: 'Mortgage Application', desc: 'Enquiry to completion, 30-60 day cycle' },
                      { icon: 'üõ°Ô∏è', name: 'Insurance Claim', desc: 'FNOL to settlement with fraud checks' },
                      { icon: 'üí≥', name: 'Bank Account Opening', desc: 'Personal or business with AML screening' },
                      { icon: 'üíµ', name: 'Personal Loan', desc: 'Application to disbursement' }
                    ].map((t, i) => (
                      <div key={i} style={{ 
                        background: '#FFF', 
                        border: '1px solid var(--slate-200)', 
                        borderRadius: '12px', 
                        padding: '20px',
                        display: 'flex',
                        gap: '14px',
                        alignItems: 'flex-start',
                        transition: 'all 0.15s',
                        cursor: 'default'
                      }}>
                        <span style={{ fontSize: '24px' }}>{t.icon}</span>
                        <div>
                          <div style={{ fontWeight: 600, color: 'var(--navy-700)', marginBottom: '4px' }}>{t.name}</div>
                          <div style={{ fontSize: '13px', color: 'var(--slate-500)', lineHeight: 1.5 }}>{t.desc}</div>
                        </div>
                      </div>
                    ))}
                  </div>
                </div>
                
                {/* Healthcare */}
                <div>
                  <div style={{ display: 'flex', alignItems: 'center', gap: '12px', marginBottom: '20px' }}>
                    <span style={{ fontSize: '24px' }}>üè•</span>
                    <h3 style={{ fontSize: '20px', fontWeight: 600, color: 'var(--navy-700)', margin: 0 }}>Healthcare</h3>
                  </div>
                  <div style={{ display: 'grid', gridTemplateColumns: 'repeat(auto-fill, minmax(min(280px, 100%), 1fr))', gap: '16px' }}>
                    {[
                      { icon: 'üè®', name: 'Patient Registration & Admission', desc: 'Front door, insurance verification, consent' },
                      { icon: 'üè•', name: 'Patient Referral', desc: 'NHS/private pathway tracking' }
                    ].map((t, i) => (
                      <div key={i} style={{ 
                        background: '#FFF', 
                        border: '1px solid var(--slate-200)', 
                        borderRadius: '12px', 
                        padding: '20px',
                        display: 'flex',
                        gap: '14px',
                        alignItems: 'flex-start'
                      }}>
                        <span style={{ fontSize: '24px' }}>{t.icon}</span>
                        <div>
                          <div style={{ fontWeight: 600, color: 'var(--navy-700)', marginBottom: '4px' }}>{t.name}</div>
                          <div style={{ fontSize: '13px', color: 'var(--slate-500)', lineHeight: 1.5 }}>{t.desc}</div>
                        </div>
                      </div>
                    ))}
                  </div>
                </div>
                
                {/* HR / People Operations */}
                <div>
                  <div style={{ display: 'flex', alignItems: 'center', gap: '12px', marginBottom: '20px' }}>
                    <span style={{ fontSize: '24px' }}>üë•</span>
                    <h3 style={{ fontSize: '20px', fontWeight: 600, color: 'var(--navy-700)', margin: 0 }}>HR / People Operations</h3>
                  </div>
                  <div style={{ display: 'grid', gridTemplateColumns: 'repeat(auto-fill, minmax(min(280px, 100%), 1fr))', gap: '16px' }}>
                    {[
                      { icon: 'üëã', name: 'Employee Onboarding', desc: 'Offer acceptance to full productivity' },
                      { icon: 'üëî', name: 'Recruitment & Hiring', desc: 'Requisition to offer acceptance' },
                      { icon: 'üö™', name: 'Employee Offboarding', desc: 'Knowledge transfer, access revocation, exit' }
                    ].map((t, i) => (
                      <div key={i} style={{ 
                        background: '#FFF', 
                        border: '1px solid var(--slate-200)', 
                        borderRadius: '12px', 
                        padding: '20px',
                        display: 'flex',
                        gap: '14px',
                        alignItems: 'flex-start'
                      }}>
                        <span style={{ fontSize: '24px' }}>{t.icon}</span>
                        <div>
                          <div style={{ fontWeight: 600, color: 'var(--navy-700)', marginBottom: '4px' }}>{t.name}</div>
                          <div style={{ fontSize: '13px', color: 'var(--slate-500)', lineHeight: 1.5 }}>{t.desc}</div>
                        </div>
                      </div>
                    ))}
                  </div>
                </div>
                
                {/* Property & Real Estate */}
                <div>
                  <div style={{ display: 'flex', alignItems: 'center', gap: '12px', marginBottom: '20px' }}>
                    <span style={{ fontSize: '24px' }}>üè°</span>
                    <h3 style={{ fontSize: '20px', fontWeight: 600, color: 'var(--navy-700)', margin: 0 }}>Property & Real Estate</h3>
                  </div>
                  <div style={{ display: 'grid', gridTemplateColumns: 'repeat(auto-fill, minmax(min(280px, 100%), 1fr))', gap: '16px' }}>
                    {[
                      { icon: 'üè°', name: 'Property Purchase', desc: 'Conveyancing from offer to completion' },
                      { icon: 'üîë', name: 'Tenant Move-In', desc: 'References, contracts, key handover' }
                    ].map((t, i) => (
                      <div key={i} style={{ 
                        background: '#FFF', 
                        border: '1px solid var(--slate-200)', 
                        borderRadius: '12px', 
                        padding: '20px',
                        display: 'flex',
                        gap: '14px',
                        alignItems: 'flex-start'
                      }}>
                        <span style={{ fontSize: '24px' }}>{t.icon}</span>
                        <div>
                          <div style={{ fontWeight: 600, color: 'var(--navy-700)', marginBottom: '4px' }}>{t.name}</div>
                          <div style={{ fontSize: '13px', color: 'var(--slate-500)', lineHeight: 1.5 }}>{t.desc}</div>
                        </div>
                      </div>
                    ))}
                  </div>
                </div>
                
                {/* Legal & Professional Services */}
                <div>
                  <div style={{ display: 'flex', alignItems: 'center', gap: '12px', marginBottom: '20px' }}>
                    <span style={{ fontSize: '24px' }}>‚öñÔ∏è</span>
                    <h3 style={{ fontSize: '20px', fontWeight: 600, color: 'var(--navy-700)', margin: 0 }}>Legal & Professional Services</h3>
                  </div>
                  <div style={{ display: 'grid', gridTemplateColumns: 'repeat(auto-fill, minmax(min(280px, 100%), 1fr))', gap: '16px' }}>
                    {[
                      { icon: '‚öñÔ∏è', name: 'Client Intake (Law Firm)', desc: 'Conflict checks, engagement letters, AML/KYC' },
                      { icon: 'üìù', name: 'Contract Lifecycle', desc: 'Request, negotiation, approval, execution' }
                    ].map((t, i) => (
                      <div key={i} style={{ 
                        background: '#FFF', 
                        border: '1px solid var(--slate-200)', 
                        borderRadius: '12px', 
                        padding: '20px',
                        display: 'flex',
                        gap: '14px',
                        alignItems: 'flex-start'
                      }}>
                        <span style={{ fontSize: '24px' }}>{t.icon}</span>
                        <div>
                          <div style={{ fontWeight: 600, color: 'var(--navy-700)', marginBottom: '4px' }}>{t.name}</div>
                          <div style={{ fontSize: '13px', color: 'var(--slate-500)', lineHeight: 1.5 }}>{t.desc}</div>
                        </div>
                      </div>
                    ))}
                  </div>
                </div>
                
                {/* B2B / SaaS */}
                <div>
                  <div style={{ display: 'flex', alignItems: 'center', gap: '12px', marginBottom: '20px' }}>
                    <span style={{ fontSize: '24px' }}>üíº</span>
                    <h3 style={{ fontSize: '20px', fontWeight: 600, color: 'var(--navy-700)', margin: 0 }}>B2B / SaaS</h3>
                  </div>
                  <div style={{ display: 'grid', gridTemplateColumns: 'repeat(auto-fill, minmax(min(280px, 100%), 1fr))', gap: '16px' }}>
                    {[
                      { icon: 'üíª', name: 'Customer Onboarding (SaaS)', desc: 'Implementation to go-live' },
                      { icon: 'ü§ù', name: 'Vendor/Supplier Onboarding', desc: 'Due diligence, contracting, setup' },
                      { icon: 'üìà', name: 'Enterprise Sales Cycle', desc: 'Lead to closed deal with procurement' }
                    ].map((t, i) => (
                      <div key={i} style={{ 
                        background: '#FFF', 
                        border: '1px solid var(--slate-200)', 
                        borderRadius: '12px', 
                        padding: '20px',
                        display: 'flex',
                        gap: '14px',
                        alignItems: 'flex-start'
                      }}>
                        <span style={{ fontSize: '24px' }}>{t.icon}</span>
                        <div>
                          <div style={{ fontWeight: 600, color: 'var(--navy-700)', marginBottom: '4px' }}>{t.name}</div>
                          <div style={{ fontSize: '13px', color: 'var(--slate-500)', lineHeight: 1.5 }}>{t.desc}</div>
                        </div>
                      </div>
                    ))}
                  </div>
                </div>
                
                {/* Public Sector / Government */}
                <div>
                  <div style={{ display: 'flex', alignItems: 'center', gap: '12px', marginBottom: '20px' }}>
                    <span style={{ fontSize: '24px' }}>üèõÔ∏è</span>
                    <h3 style={{ fontSize: '20px', fontWeight: 600, color: 'var(--navy-700)', margin: 0 }}>Public Sector / Government</h3>
                  </div>
                  <div style={{ display: 'grid', gridTemplateColumns: 'repeat(auto-fill, minmax(min(280px, 100%), 1fr))', gap: '16px' }}>
                    {[
                      { icon: 'üí∞', name: 'Grant Application & Award', desc: 'Eligibility, assessment, disbursement' },
                      { icon: 'üèõÔ∏è', name: 'Permit/License Application', desc: 'Submission to issuance with appeals' }
                    ].map((t, i) => (
                      <div key={i} style={{ 
                        background: '#FFF', 
                        border: '1px solid var(--slate-200)', 
                        borderRadius: '12px', 
                        padding: '20px',
                        display: 'flex',
                        gap: '14px',
                        alignItems: 'flex-start'
                      }}>
                        <span style={{ fontSize: '24px' }}>{t.icon}</span>
                        <div>
                          <div style={{ fontWeight: 600, color: 'var(--navy-700)', marginBottom: '4px' }}>{t.name}</div>
                          <div style={{ fontSize: '13px', color: 'var(--slate-500)', lineHeight: 1.5 }}>{t.desc}</div>
                        </div>
                      </div>
                    ))}
                  </div>
                </div>
                
                {/* Operations / Service */}
                <div>
                  <div style={{ display: 'flex', alignItems: 'center', gap: '12px', marginBottom: '20px' }}>
                    <span style={{ fontSize: '24px' }}>‚öôÔ∏è</span>
                    <h3 style={{ fontSize: '20px', fontWeight: 600, color: 'var(--navy-700)', margin: 0 }}>Operations / Service</h3>
                  </div>
                  <div style={{ display: 'grid', gridTemplateColumns: 'repeat(auto-fill, minmax(min(280px, 100%), 1fr))', gap: '16px' }}>
                    {[
                      { icon: 'üì¢', name: 'Complaint Handling', desc: 'Receipt to resolution and learning' },
                      { icon: 'üì¶', name: 'Product Return & Refund', desc: 'E-commerce returns processing' },
                      { icon: 'üö®', name: 'IT Incident Management', desc: 'Detection to resolution and PIR' }
                    ].map((t, i) => (
                      <div key={i} style={{ 
                        background: '#FFF', 
                        border: '1px solid var(--slate-200)', 
                        borderRadius: '12px', 
                        padding: '20px',
                        display: 'flex',
                        gap: '14px',
                        alignItems: 'flex-start'
                      }}>
                        <span style={{ fontSize: '24px' }}>{t.icon}</span>
                        <div>
                          <div style={{ fontWeight: 600, color: 'var(--navy-700)', marginBottom: '4px' }}>{t.name}</div>
                          <div style={{ fontSize: '13px', color: 'var(--slate-500)', lineHeight: 1.5 }}>{t.desc}</div>
                        </div>
                      </div>
                    ))}
                  </div>
                </div>
              </div>
              
              {/* CTA */}
              <div style={{ textAlign: 'center', marginTop: '56px' }}>
                <p style={{ fontSize: '16px', color: 'var(--slate-600)', marginBottom: '20px' }}>
                  Don't see your industry? Start with a <strong>Blank Canvas</strong> and build your own.
                </p>
                <button onClick={onGetStarted} className="btn btn-primary" style={{ padding: '16px 36px' }}>
                  Browse All Templates ‚Üí
                </button>
              </div>
            </div>
          </section>
          
          {/* CTA Section */}
          <section className="cta-section">
            <div className="container" style={{ textAlign: 'center' }}>
              <h2 style={{ fontSize: '42px', fontWeight: 300, color: '#FFF', marginBottom: '20px', letterSpacing: '-0.5px' }}>
                Ready to see what your journeys <span style={{ fontWeight: 600 }}>really cost</span>?
              </h2>
              <p style={{ fontSize: '18px', color: 'var(--slate-300)', marginBottom: '40px', maxWidth: '480px', margin: '0 auto 40px' }}>
                Start mapping in minutes. No credit card required. Free to use.
              </p>
              <button onClick={onGetStarted} className="btn" style={{ background: '#FFF', color: 'var(--navy-700)', padding: '18px 48px', fontSize: '16px', fontWeight: 600 }}>
                Get Started Free ‚Üí
              </button>
            </div>
          </section>
          
          {/* Footer */}
          <footer style={{ background: 'var(--navy-950)', padding: '32px 24px', color: 'rgba(255,255,255,0.4)' }}>
            <div className="container" style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', flexWrap: 'wrap', gap: '16px' }}>
              <div style={{ display: 'flex', alignItems: 'center', gap: '12px' }}>
                <img src="logo_light.png" alt="FATHOM" style={{ height: '20px', opacity: 0.5 }} />
                <span style={{ fontSize: '11px', opacity: 0.6 }}>v{APP_VERSION}</span>
              </div>
              <div style={{ fontSize: '13px' }}>
                ¬© 2025 Fathom ¬∑ Journey intelligence for modern operations
              </div>
            </div>
          </footer>
          
          {/* NEW: Demo Modal */}
          {showDemo && (
            <InteractiveDemo 
              context={activeContext} 
              onClose={() => setShowDemo(false)} 
            />
          )}
        </div>
      );
    }
    
    // ============================================
    // LOGIN MODAL
    // ============================================
    function LoginModal({ onClose, onLogin }) {
      const [name, setName] = useState('');
      const [email, setEmail] = useState('');
      const [token, setToken] = useState('');
      const [error, setError] = useState('');
      const [isLoading, setIsLoading] = useState(false);

      const handleSubmit = async (e) => {
        e.preventDefault();
        if (!name.trim() || !email.trim()) {
          setError('Please enter your name and email');
          return;
        }
        if (!email.includes('@')) {
          setError('Please enter a valid email');
          return;
        }
        setIsLoading(true);
        await onLogin({ name: name.trim(), email: email.trim().toLowerCase() }, token.trim());
        setIsLoading(false);
      };

      return (
        <div className="modal-overlay" onClick={onClose}>
          <div className="modal" onClick={e => e.stopPropagation()}>
            <div style={{ padding: '36px' }}>
              <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '28px' }}>
                <img src="logo_dark.png" alt="FATHOM" style={{ height: '32px' }} />
                <button onClick={onClose} style={{ background: 'none', border: 'none', fontSize: '28px', color: 'var(--slate-400)', cursor: 'pointer', padding: '4px', lineHeight: 1 }}>√ó</button>
              </div>
              
              <h2 style={{ fontSize: '26px', fontWeight: 400, marginBottom: '8px', color: 'var(--navy-700)' }}>Welcome to Fathom</h2>
              <p className="text-muted" style={{ marginBottom: '28px', fontSize: '15px' }}>Enter your details to access your journey maps</p>

              {error && (
                <div style={{ padding: '14px 16px', background: 'var(--error-light)', borderRadius: '10px', marginBottom: '20px', color: 'var(--error)', fontSize: '14px' }}>
                  {error}
                </div>
              )}

              <form onSubmit={handleSubmit}>
                <div style={{ marginBottom: '18px' }}>
                  <label className="label">Your Name</label>
                  <input
                    type="text"
                    className="input"
                    value={name}
                    onChange={(e) => setName(e.target.value)}
                    placeholder="Steve Young"
                    autoFocus
                  />
                </div>

                <div style={{ marginBottom: '18px' }}>
                  <label className="label">Email Address</label>
                  <input
                    type="email"
                    className="input"
                    value={email}
                    onChange={(e) => setEmail(e.target.value)}
                    placeholder="steve@company.com"
                  />
                </div>

                <div style={{ marginBottom: '28px' }}>
                  <label className="label">GitHub Token <span style={{ fontWeight: 400, color: 'var(--slate-400)' }}>(optional)</span></label>
                  <input
                    type="password"
                    className="input"
                    value={token}
                    onChange={(e) => setToken(e.target.value)}
                    placeholder="ghp_xxxxxxxxxxxx"
                  />
                  <p className="text-muted text-small" style={{ marginTop: '8px' }}>
                    Required to create and edit maps. Without it, you can view existing maps only.
                  </p>
                </div>

                <button type="submit" className="btn btn-primary" style={{ width: '100%', padding: '16px' }} disabled={isLoading}>
                  {isLoading ? 'Signing in...' : 'Sign In to Fathom'}
                </button>
              </form>
            </div>
          </div>
        </div>
      );
    }
    
    // ============================================
    // DASHBOARD
    // ============================================
    function Dashboard({ user, token, onLogout, onUpdateToken }) {
      const [maps, setMaps] = useState([]);
      const [mapConfigs, setMapConfigs] = useState({}); // Store full configs for metrics
      const [loading, setLoading] = useState(true);
      const [error, setError] = useState('');
      const [showCreateModal, setShowCreateModal] = useState(false);
      const [showDeleteModal, setShowDeleteModal] = useState(null);
      const [showShareModal, setShowShareModal] = useState(null);
      const [showTokenModal, setShowTokenModal] = useState(false);
      const [activeTab, setActiveTab] = useState('my-maps');
      const [viewMode, setViewMode] = useState(() => localStorage.getItem('fathom-view-mode') || 'grid');
      const [manageMode, setManageMode] = useState(false);
      const [selectedMaps, setSelectedMaps] = useState(new Set());
      const [showMobileMenu, setShowMobileMenu] = useState(false);

      // Scroll to top on mount to fix iOS viewport issues
      useEffect(() => {
        window.scrollTo(0, 0);
      }, []);

      // Persist view mode
      useEffect(() => {
        localStorage.setItem('fathom-view-mode', viewMode);
      }, [viewMode]);

      // Auto-switch to grid view on mobile
      useEffect(() => {
        const checkMobile = () => {
          if (window.innerWidth <= 768 && viewMode === 'list') {
            setViewMode('grid');
          }
        };
        checkMobile();
        window.addEventListener('resize', checkMobile);
        return () => window.removeEventListener('resize', checkMobile);
      }, [viewMode]);

      useEffect(() => {
        fetchMaps();
      }, []);

      // Fetch full configs for metrics after maps are loaded
      useEffect(() => {
        if (maps.length > 0) {
          fetchMapConfigs();
        }
      }, [maps]);

      const fetchMaps = async () => {
        setLoading(true);
        setError('');
        try {
          const index = await fetchFromGitHub(GITHUB_CONFIG.indexFile);
          if (index && index.maps) {
            setMaps(index.maps);
          } else {
            setMaps([]);
          }
        } catch (err) {
          console.error('Failed to fetch maps:', err);
          setError('Failed to load maps. Please refresh.');
        }
        setLoading(false);
      };

      const fetchMapConfigs = async () => {
        const configs = {};
        for (const map of maps) {
          try {
            const config = await fetchFromGitHub(`${GITHUB_CONFIG.mapsPath}/${map.id}.json`);
            if (config) {
              configs[map.id] = config;
            }
          } catch (err) {
            console.warn(`Failed to fetch config for ${map.id}:`, err);
          }
        }
        setMapConfigs(configs);
      };

      // Calculate metrics from config
      const getMapMetrics = (mapId) => {
        const config = mapConfigs[mapId];
        if (!config || !config.stages) return null;
        
        const allSteps = config.stages.flatMap(s => s.steps || []);
        
        // Handle time field names: timeMinutes, duration, or time
        const totalTime = allSteps.reduce((acc, s) => acc + (s.timeMinutes || s.duration || s.time || 0), 0);
        const totalSteps = allSteps.length;
        const totalPainPoints = allSteps.reduce((acc, s) => acc + (s.painPoints?.length || 0), 0);
        const highImprovements = allSteps.filter(s => s.automationOpportunity === 'high').length;
        const totalRegReqs = allSteps.reduce((acc, s) => acc + (s.regulatoryRequirements?.length || 0), 0);
        
        // Map string friction to numbers
        const frictionMap = { none: 1, low: 2, medium: 3, high: 4, extreme: 5 };
        
        // Calculate average friction - handle numeric (frictionScore) or string (friction) formats
        const getFrictionValue = (step) => {
          if (typeof step.frictionScore === 'number') return step.frictionScore;
          if (typeof step.friction === 'number') return step.friction;
          if (typeof step.friction === 'string') return frictionMap[step.friction] || null;
          return null;
        };
        
        const frictionValues = allSteps.map(getFrictionValue).filter(v => v !== null);
        const avgFriction = frictionValues.length > 0 
          ? (frictionValues.reduce((acc, v) => acc + v, 0) / frictionValues.length).toFixed(1)
          : null;
        
        // Calculate total cost if personas exist with salaries
        let totalCost = 0;
        let hasCostData = false;
        if (config.personas && config.personas.length > 0) {
          allSteps.forEach(step => {
            // Handle both owner and personaId field names
            const personaId = step.owner || step.personaId;
            const persona = config.personas.find(p => p.id === personaId);
            if (persona && persona.salary > 0) {
              hasCostData = true;
              const hourlyRate = (persona.salary * (persona.burdenMultiplier || 1.4)) / (52 * (persona.hoursPerWeek || 37.5));
              const stepTime = step.timeMinutes || step.duration || step.time || 0;
              const stepCost = (stepTime / 60) * hourlyRate + (step.additionalCosts || 0);
              totalCost += stepCost;
            }
          });
        }
        
        return {
          totalTime,
          totalSteps,
          stageCount: config.stages.length,
          totalPainPoints,
          highImprovements,
          totalRegReqs,
          avgFriction,
          totalCost: hasCostData ? totalCost : null
        };
      };

      // Format time helper
      const formatTime = (minutes) => {
        if (!minutes) return '0m';
        const hrs = Math.floor(minutes / 60);
        const mins = minutes % 60;
        if (hrs === 0) return `${mins}m`;
        if (mins === 0) return `${hrs}h`;
        return `${hrs}h ${mins}m`;
      };

      // Format currency helper
      const formatCurrency = (amount) => {
        if (!amount) return null;
        return new Intl.NumberFormat('en-GB', { style: 'currency', currency: 'GBP', minimumFractionDigits: 0, maximumFractionDigits: 0 }).format(amount);
      };

      const myMaps = maps.filter(m => m.owner === user.email).sort((a, b) => {
        // Favourites first, then by updated date
        if (a.favourite && !b.favourite) return -1;
        if (!a.favourite && b.favourite) return 1;
        return new Date(b.updatedAt) - new Date(a.updatedAt);
      });
      const sharedMaps = maps.filter(m => 
        m.owner !== user.email && 
        m.sharedWith?.some(s => s.email === user.email)
      );

      const handleCreate = async (newMap) => {
        try {
          console.log('Creating map:', newMap.title);
          
          // Separate metadata from config
          const { config, ...mapMetadata } = newMap;
          
          // Add to maps array (metadata only for index)
          const updatedMaps = [...maps, mapMetadata];
          
          // Save metadata to index
          const indexResult = await saveToGitHub(
            GITHUB_CONFIG.indexFile,
            { maps: updatedMaps },
            token,
            `Add map: ${newMap.title}`
          );
          console.log('Index updated:', indexResult);
          
          // Save full config to separate file
          const mapResult = await saveToGitHub(
            `${GITHUB_CONFIG.mapsPath}/${newMap.id}.json`,
            config,
            token,
            `Create map: ${newMap.title}`
          );
          console.log('Map created:', mapResult);
          
          setMaps(updatedMaps);
          setShowCreateModal(false);
          
          // Show success message
          alert(`Map "${newMap.title}" created successfully!`);
        } catch (err) {
          console.error('Failed to create map:', err);
          alert(`Failed to create map: ${err.message}\n\nCheck your GitHub token has write permissions.`);
        }
      };

      const handleDelete = async (mapId) => {
        const mapToDelete = maps.find(m => m.id === mapId);
        if (!mapToDelete) return;
        
        // Check if locked
        if (mapToDelete.locked) {
          alert('This map is locked. Unlock it first to delete.');
          setShowDeleteModal(null);
          return;
        }
        
        try {
          await deleteFromGitHub(
            `${GITHUB_CONFIG.mapsPath}/${mapId}.json`,
            token,
            `Delete map: ${mapToDelete.title}`
          );
          
          const updatedMaps = maps.filter(m => m.id !== mapId);
          await saveToGitHub(
            GITHUB_CONFIG.indexFile,
            { maps: updatedMaps },
            token,
            `Remove map from index: ${mapToDelete.title}`
          );
          
          setMaps(updatedMaps);
          setShowDeleteModal(null);
          setSelectedMaps(prev => { const next = new Set(prev); next.delete(mapId); return next; });
        } catch (err) {
          console.error('Failed to delete:', err);
          alert('Failed to delete map.');
        }
      };

      const toggleFavourite = async (mapId) => {
        const map = maps.find(m => m.id === mapId);
        if (!map || map.owner !== user.email) return;
        
        const updatedMaps = maps.map(m => 
          m.id === mapId ? { ...m, favourite: !m.favourite } : m
        );
        
        try {
          await saveToGitHub(
            GITHUB_CONFIG.indexFile,
            { maps: updatedMaps },
            token,
            `Toggle favourite: ${map.title}`
          );
          setMaps(updatedMaps);
        } catch (err) {
          console.error('Failed to update favourite:', err);
        }
      };

      const toggleLock = async (mapId) => {
        const map = maps.find(m => m.id === mapId);
        if (!map || map.owner !== user.email) return;
        
        const updatedMaps = maps.map(m => 
          m.id === mapId ? { ...m, locked: !m.locked } : m
        );
        
        try {
          await saveToGitHub(
            GITHUB_CONFIG.indexFile,
            { maps: updatedMaps },
            token,
            `Toggle lock: ${map.title}`
          );
          setMaps(updatedMaps);
        } catch (err) {
          console.error('Failed to update lock:', err);
        }
      };

      const handleShare = async (mapId, shareEmail, permission) => {
        const map = maps.find(m => m.id === mapId);
        if (!map || map.owner !== user.email) return;
        
        const currentShares = map.sharedWith || [];
        const existingIndex = currentShares.findIndex(s => s.email === shareEmail);
        
        let newShares;
        if (existingIndex >= 0) {
          // Update existing share
          newShares = currentShares.map((s, i) => 
            i === existingIndex ? { ...s, permission } : s
          );
        } else {
          // Add new share
          newShares = [...currentShares, { email: shareEmail, permission }];
        }
        
        const updatedMaps = maps.map(m => 
          m.id === mapId ? { ...m, sharedWith: newShares } : m
        );
        
        try {
          await saveToGitHub(
            GITHUB_CONFIG.indexFile,
            { maps: updatedMaps },
            token,
            `Share map: ${map.title} with ${shareEmail}`
          );
          setMaps(updatedMaps);
          return true;
        } catch (err) {
          console.error('Failed to share:', err);
          return false;
        }
      };

      const removeShare = async (mapId, shareEmail) => {
        const map = maps.find(m => m.id === mapId);
        if (!map || map.owner !== user.email) return;
        
        const newShares = (map.sharedWith || []).filter(s => s.email !== shareEmail);
        
        const updatedMaps = maps.map(m => 
          m.id === mapId ? { ...m, sharedWith: newShares } : m
        );
        
        try {
          await saveToGitHub(
            GITHUB_CONFIG.indexFile,
            { maps: updatedMaps },
            token,
            `Remove share: ${map.title} from ${shareEmail}`
          );
          setMaps(updatedMaps);
        } catch (err) {
          console.error('Failed to remove share:', err);
        }
      };

      const handleBulkDelete = async () => {
        const toDelete = [...selectedMaps];
        const locked = toDelete.filter(id => maps.find(m => m.id === id)?.locked);
        
        if (locked.length > 0) {
          alert(`${locked.length} map(s) are locked and cannot be deleted. Unlock them first.`);
          return;
        }
        
        if (!confirm(`Delete ${toDelete.length} map(s)? This cannot be undone.`)) return;
        
        for (const mapId of toDelete) {
          await handleDelete(mapId);
        }
        setSelectedMaps(new Set());
        setManageMode(false);
      };

      const openMap = (mapId) => {
        if (manageMode) return; // Don't navigate in manage mode
        window.location.href = `editor.html?map=${mapId}`;
      };

      const toggleSelectMap = (mapId) => {
        setSelectedMaps(prev => {
          const next = new Set(prev);
          if (next.has(mapId)) {
            next.delete(mapId);
          } else {
            next.add(mapId);
          }
          return next;
        });
      };

      const getPermission = (map) => {
        if (map.owner === user.email) return 'owner';
        const share = map.sharedWith?.find(s => s.email === user.email);
        return share?.permission || 'view';
      };

      return (
        <div className="dashboard-bg">
          {/* Navigation */}
          <nav className="nav">
            <div className="nav-inner">
              <div className="nav-left">
                <a href="index.html">
                  <img src="logo_light.png" alt="FATHOM" className="nav-logo" />
                </a>
                <div className="nav-links">
                  <a href="index.html" className="nav-link active">Dashboard</a>
                  <div className="nav-dropdown">
                    <span className="nav-link">Surveys ‚ñæ</span>
                    <div className="nav-dropdown-menu">
                      <a href="survey-admin.html" className="nav-dropdown-item">Send Surveys</a>
                      <a href="responses.html" className="nav-dropdown-item">View Responses</a>
                    </div>
                  </div>
                  <a href="whats-new.html" className="nav-link">What's New</a>
                  <a href="about.html" className="nav-link">About</a>
                </div>
              </div>
              <div className="nav-right">
                <span className="nav-user">{user.name}</span>
                <button onClick={onLogout} className="nav-signout">Sign Out</button>
              </div>
              {/* Mobile hamburger */}
              <button className="nav-mobile-toggle" onClick={() => setShowMobileMenu(true)}>
                ‚ò∞
              </button>
            </div>
          </nav>
          
          {/* Mobile Menu - Threads-style */}
          <div className={`nav-mobile-backdrop ${showMobileMenu ? 'open' : ''}`} onClick={() => setShowMobileMenu(false)} />
          <div className={`nav-mobile-menu ${showMobileMenu ? 'open' : ''}`}>
            <div className="nav-mobile-header">
              <button className="nav-mobile-close" onClick={() => setShowMobileMenu(false)}>‚úï</button>
            </div>
            <div className="nav-mobile-links">
              <a href="index.html" className="nav-mobile-link active">Dashboard</a>
              <div className="nav-mobile-section-label">Surveys</div>
              <a href="survey-admin.html" className="nav-mobile-link">Send Surveys</a>
              <a href="responses.html" className="nav-mobile-link">View Responses</a>
              <div className="nav-mobile-section-label">Info</div>
              <a href="whats-new.html" className="nav-mobile-link">What's New</a>
              <a href="about.html" className="nav-mobile-link">About</a>
            </div>
            <div className="nav-mobile-user">
              <div className="nav-mobile-user-name">Signed in as {user.name}</div>
              <button onClick={() => { setShowMobileMenu(false); onLogout(); }} className="nav-mobile-signout">Sign Out</button>
            </div>
          </div>

          {/* Main Content */}
          <main className="dashboard-main" style={{ maxWidth: '1200px', margin: '0 auto' }}>
            <div className="dashboard-title-section" style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '36px' }}>
              <div>
                <h1 className="dashboard-title" style={{ fontSize: '32px', fontWeight: 400, marginBottom: '6px', color: 'var(--navy-700)' }}>Your Journey Maps</h1>
                <p className="text-muted">Create, manage, and share operational journey maps</p>
              </div>
              <button 
                onClick={() => token ? setShowCreateModal(true) : setShowTokenModal(true)} 
                className="btn btn-primary"
              >
                + New Map
              </button>
            </div>

            {/* Tabs + View Toggle + Manage */}
            <div className="dashboard-tabs" style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: manageMode ? '12px' : '28px', borderBottom: '1px solid var(--slate-200)', paddingBottom: '8px' }}>
              <div className="dashboard-tab-buttons" style={{ display: 'flex', gap: '8px', alignItems: 'center' }}>
                <button 
                  onClick={() => setActiveTab('my-maps')}
                  style={{ 
                    padding: '10px 20px', 
                    background: activeTab === 'my-maps' ? 'var(--navy-700)' : 'transparent',
                    color: activeTab === 'my-maps' ? '#FFF' : 'var(--slate-600)',
                    border: 'none',
                    borderRadius: '6px',
                    cursor: 'pointer',
                    fontFamily: 'inherit',
                    fontSize: '14px',
                    fontWeight: 500
                  }}
                >
                  My Maps ({myMaps.length})
                </button>
                <button 
                  onClick={() => setActiveTab('shared')}
                  style={{ 
                    padding: '10px 20px', 
                    background: activeTab === 'shared' ? 'var(--navy-700)' : 'transparent',
                    color: activeTab === 'shared' ? '#FFF' : 'var(--slate-600)',
                    border: 'none',
                    borderRadius: '6px',
                    cursor: 'pointer',
                    fontFamily: 'inherit',
                    fontSize: '14px',
                    fontWeight: 500
                  }}
                >
                  Shared with Me ({sharedMaps.length})
                </button>
              </div>
              
              <div className="dashboard-tab-actions" style={{ display: 'flex', gap: '12px', alignItems: 'center' }}>
                {/* Manage Toggle - only for My Maps */}
                {activeTab === 'my-maps' && token && (
                  <button
                    onClick={() => { setManageMode(!manageMode); setSelectedMaps(new Set()); }}
                    style={{
                      padding: '8px 14px',
                      background: manageMode ? 'var(--amber-500)' : 'transparent',
                      color: manageMode ? '#FFF' : 'var(--slate-500)',
                      border: manageMode ? 'none' : '1px solid var(--slate-200)',
                      borderRadius: '6px',
                      cursor: 'pointer',
                      fontFamily: 'inherit',
                      fontSize: '13px',
                      fontWeight: 500,
                      display: 'flex',
                      alignItems: 'center',
                      gap: '6px'
                    }}
                  >
                    {manageMode ? '‚úì Done' : '‚öôÔ∏è Manage'}
                  </button>
                )}
                
                {/* View Toggle */}
                <div className="view-toggle" style={{ display: 'flex', gap: '4px', border: '1px solid var(--slate-200)', borderRadius: '6px', padding: '2px' }}>
                  <button
                    onClick={() => setViewMode('grid')}
                    title="Grid view"
                    style={{
                      padding: '6px 10px',
                      background: viewMode === 'grid' ? 'var(--navy-700)' : 'transparent',
                      color: viewMode === 'grid' ? '#FFF' : 'var(--slate-500)',
                      border: 'none',
                      borderRadius: '4px',
                      cursor: 'pointer',
                    fontSize: '14px'
                  }}
                >
                  ‚ñ¶
                </button>
                <button
                  onClick={() => setViewMode('list')}
                  title="List view"
                  style={{
                    padding: '6px 10px',
                    background: viewMode === 'list' ? 'var(--navy-700)' : 'transparent',
                    color: viewMode === 'list' ? '#FFF' : 'var(--slate-500)',
                    border: 'none',
                    borderRadius: '4px',
                    cursor: 'pointer',
                    fontSize: '14px'
                  }}
                >
                  ‚ò∞
                </button>
              </div>
              </div>
            </div>

            {/* Bulk Action Bar - when in manage mode */}
            {manageMode && (
              <div style={{ 
                display: 'flex', 
                justifyContent: 'space-between', 
                alignItems: 'center',
                padding: '12px 20px',
                background: 'var(--amber-50)',
                borderRadius: '8px',
                marginBottom: '20px',
                border: '1px solid var(--amber-200)'
              }}>
                <div style={{ display: 'flex', alignItems: 'center', gap: '12px' }}>
                  <span style={{ fontSize: '13px', color: 'var(--amber-700)', fontWeight: 500 }}>
                    {selectedMaps.size} selected
                  </span>
                  {selectedMaps.size > 0 && (
                    <button
                      onClick={() => setSelectedMaps(new Set())}
                      style={{
                        padding: '4px 10px',
                        background: 'transparent',
                        color: 'var(--slate-500)',
                        border: '1px solid var(--slate-300)',
                        borderRadius: '4px',
                        cursor: 'pointer',
                        fontSize: '12px'
                      }}
                    >
                      Clear
                    </button>
                  )}
                </div>
                <div style={{ display: 'flex', gap: '8px' }}>
                  {selectedMaps.size > 0 && (
                    <button
                      onClick={handleBulkDelete}
                      style={{
                        padding: '8px 14px',
                        background: 'var(--error)',
                        color: '#FFF',
                        border: 'none',
                        borderRadius: '6px',
                        cursor: 'pointer',
                        fontSize: '13px',
                        fontWeight: 500
                      }}
                    >
                      üóëÔ∏è Delete Selected
                    </button>
                  )}
                </div>
              </div>
            )}

            {/* Loading / Error / Maps */}
            {loading ? (
              <div style={{ textAlign: 'center', padding: '80px', color: 'var(--slate-500)' }}>
                Loading maps...
              </div>
            ) : error ? (
              <div style={{ textAlign: 'center', padding: '80px', color: 'var(--error)' }}>
                {error}
              </div>
            ) : viewMode === 'grid' ? (
              /* Grid View */
              <div style={{ display: 'grid', gridTemplateColumns: 'repeat(auto-fill, minmax(min(340px, 100%), 1fr))', gap: '24px' }}>
                {(activeTab === 'my-maps' ? myMaps : sharedMaps).map(map => {
                  const metrics = getMapMetrics(map.id);
                  const isSelected = selectedMaps.has(map.id);
                  const isOwner = map.owner === user.email;
                  return (
                  <div 
                    key={map.id} 
                    className="card" 
                    style={{ 
                      padding: '24px', 
                      cursor: manageMode ? 'default' : 'pointer', 
                      transition: 'all 0.2s',
                      border: isSelected ? '2px solid var(--amber-500)' : '1px solid var(--slate-200)',
                      position: 'relative'
                    }} 
                    onClick={() => manageMode ? (isOwner && toggleSelectMap(map.id)) : openMap(map.id)}
                  >
                    {/* Status Indicators */}
                    <div style={{ position: 'absolute', top: '12px', right: '12px', display: 'flex', gap: '6px' }}>
                      {map.favourite && <span title="Favourite" style={{ fontSize: '16px' }}>‚≠ê</span>}
                      {map.locked && <span title="Locked" style={{ fontSize: '16px' }}>üîí</span>}
                    </div>
                    
                    {/* Manage Mode Checkbox */}
                    {manageMode && isOwner && (
                      <div 
                        style={{ 
                          position: 'absolute', 
                          top: '12px', 
                          left: '12px',
                          width: '24px',
                          height: '24px',
                          borderRadius: '6px',
                          border: isSelected ? '2px solid var(--amber-500)' : '2px solid var(--slate-300)',
                          background: isSelected ? 'var(--amber-500)' : '#FFF',
                          display: 'flex',
                          alignItems: 'center',
                          justifyContent: 'center',
                          cursor: 'pointer',
                          color: '#FFF',
                          fontSize: '14px',
                          fontWeight: 'bold'
                        }}
                      >
                        {isSelected && '‚úì'}
                      </div>
                    )}
                    
                    <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'flex-start', marginBottom: '10px', paddingLeft: manageMode && isOwner ? '32px' : 0 }}>
                      <h3 style={{ fontSize: '18px', fontWeight: 600, color: 'var(--navy-700)', lineHeight: 1.3, paddingRight: (map.favourite || map.locked) ? '50px' : 0 }}>{map.title}</h3>
                      {activeTab === 'shared' && (
                        <span className={`badge badge-${getPermission(map)}`} style={{ marginRight: (map.favourite || map.locked) ? '40px' : 0 }}>{getPermission(map)}</span>
                      )}
                    </div>
                    <p className="text-muted" style={{ marginBottom: '16px', fontSize: '13px', lineHeight: 1.5 }}>
                      {map.description || 'No description'}
                    </p>
                    
                    {/* Metrics Row */}
                    {metrics ? (
                      <div style={{ 
                        display: 'flex', 
                        flexWrap: 'wrap',
                        gap: '8px', 
                        marginBottom: '16px',
                        padding: '12px',
                        background: 'var(--slate-50)',
                        borderRadius: '8px'
                      }}>
                        <div style={{ display: 'flex', alignItems: 'center', gap: '4px' }} title="Total time">
                          <span style={{ fontSize: '12px' }}>‚è±Ô∏è</span>
                          <span style={{ fontSize: '12px', fontWeight: 600, color: 'var(--navy-700)' }}>{formatTime(metrics.totalTime)}</span>
                        </div>
                        <span style={{ color: 'var(--slate-300)' }}>¬∑</span>
                        <div style={{ display: 'flex', alignItems: 'center', gap: '4px' }} title={`${metrics.stageCount} stages, ${metrics.totalSteps} steps`}>
                          <span style={{ fontSize: '12px' }}>üìã</span>
                          <span style={{ fontSize: '12px', color: 'var(--slate-600)' }}>{metrics.stageCount} / {metrics.totalSteps}</span>
                        </div>
                        {metrics.avgFriction && (
                          <>
                            <span style={{ color: 'var(--slate-300)' }}>¬∑</span>
                            <div style={{ display: 'flex', alignItems: 'center', gap: '4px' }} title="Average friction">
                              <span style={{ fontSize: '12px' }}>{metrics.avgFriction >= 4 ? 'üò∞' : metrics.avgFriction >= 3 ? 'üòê' : 'üôÇ'}</span>
                              <span style={{ fontSize: '12px', color: metrics.avgFriction >= 4 ? 'var(--error)' : 'var(--slate-600)' }}>{metrics.avgFriction}/5</span>
                            </div>
                          </>
                        )}
                        {metrics.totalPainPoints > 0 && (
                          <>
                            <span style={{ color: 'var(--slate-300)' }}>¬∑</span>
                            <div style={{ display: 'flex', alignItems: 'center', gap: '4px' }} title={`${metrics.totalPainPoints} pain points`}>
                              <span style={{ fontSize: '12px' }}>‚ö†Ô∏è</span>
                              <span style={{ fontSize: '12px', color: 'var(--error)' }}>{metrics.totalPainPoints}</span>
                            </div>
                          </>
                        )}
                        {metrics.highImprovements > 0 && (
                          <>
                            <span style={{ color: 'var(--slate-300)' }}>¬∑</span>
                            <div style={{ display: 'flex', alignItems: 'center', gap: '4px' }} title={`${metrics.highImprovements} high improvement opportunities`}>
                              <span style={{ fontSize: '12px' }}>üéØ</span>
                              <span style={{ fontSize: '12px', color: 'var(--success)' }}>{metrics.highImprovements}</span>
                            </div>
                          </>
                        )}
                        {metrics.totalCost !== null && (
                          <>
                            <span style={{ color: 'var(--slate-300)' }}>¬∑</span>
                            <div style={{ display: 'flex', alignItems: 'center', gap: '4px' }} title="Total cost per journey">
                              <span style={{ fontSize: '12px' }}>üí∑</span>
                              <span style={{ fontSize: '12px', fontWeight: 600, color: 'var(--navy-700)' }}>{formatCurrency(metrics.totalCost)}</span>
                            </div>
                          </>
                        )}
                      </div>
                    ) : (
                      <div style={{ 
                        height: '44px',
                        marginBottom: '16px',
                        padding: '12px',
                        background: 'var(--slate-50)',
                        borderRadius: '8px',
                        display: 'flex',
                        alignItems: 'center',
                        justifyContent: 'center'
                      }}>
                        <span style={{ fontSize: '12px', color: 'var(--slate-400)' }}>Loading metrics...</span>
                      </div>
                    )}
                    
                    {/* Footer */}
                    <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>
                      <span className="text-muted text-small">
                        Updated {formatDate(map.updatedAt)}
                        {map.sharedWith?.length > 0 && <span title={`Shared with ${map.sharedWith.length} people`}> ¬∑ üë• {map.sharedWith.length}</span>}
                      </span>
                      
                      {/* Normal Mode Actions */}
                      {!manageMode && isOwner && (
                        <div style={{ display: 'flex', gap: '6px' }} onClick={e => e.stopPropagation()}>
                          <button 
                            onClick={() => window.location.href = `responses.html?map=${map.id}`}
                            className="btn btn-ghost"
                            style={{ padding: '6px 12px', color: 'var(--steel-500)', fontSize: '13px' }}
                            title="View survey responses"
                          >
                            üìä Responses
                          </button>
                          <button 
                            onClick={() => setShowShareModal(map.id)}
                            className="btn btn-ghost"
                            style={{ padding: '6px 12px', color: 'var(--steel-500)', fontSize: '13px' }}
                          >
                            Share
                          </button>
                        </div>
                      )}
                      
                      {/* Manage Mode Actions */}
                      {manageMode && isOwner && (
                        <div style={{ display: 'flex', gap: '6px' }} onClick={e => e.stopPropagation()}>
                          <button
                            onClick={() => toggleFavourite(map.id)}
                            title={map.favourite ? 'Remove favourite' : 'Add favourite'}
                            style={{
                              padding: '6px 10px',
                              background: map.favourite ? 'var(--amber-100)' : 'transparent',
                              border: '1px solid var(--slate-200)',
                              borderRadius: '4px',
                              cursor: 'pointer',
                              fontSize: '14px'
                            }}
                          >
                            {map.favourite ? '‚≠ê' : '‚òÜ'}
                          </button>
                          <button
                            onClick={() => toggleLock(map.id)}
                            title={map.locked ? 'Unlock map' : 'Lock map'}
                            style={{
                              padding: '6px 10px',
                              background: map.locked ? 'var(--slate-200)' : 'transparent',
                              border: '1px solid var(--slate-200)',
                              borderRadius: '4px',
                              cursor: 'pointer',
                              fontSize: '14px'
                            }}
                          >
                            {map.locked ? 'üîí' : 'üîì'}
                          </button>
                          <button
                            onClick={() => setShowShareModal(map.id)}
                            title="Share map"
                            style={{
                              padding: '6px 10px',
                              background: 'transparent',
                              border: '1px solid var(--slate-200)',
                              borderRadius: '4px',
                              cursor: 'pointer',
                              fontSize: '14px'
                            }}
                          >
                            üë•
                          </button>
                          <button
                            onClick={() => !map.locked && setShowDeleteModal(map.id)}
                            title={map.locked ? 'Unlock to delete' : 'Delete map'}
                            style={{
                              padding: '6px 10px',
                              background: 'transparent',
                              border: '1px solid var(--slate-200)',
                              borderRadius: '4px',
                              cursor: map.locked ? 'not-allowed' : 'pointer',
                              fontSize: '14px',
                              opacity: map.locked ? 0.4 : 1
                            }}
                          >
                            üóëÔ∏è
                          </button>
                        </div>
                      )}
                    </div>
                  </div>
                  );
                })}
                {(activeTab === 'my-maps' ? myMaps : sharedMaps).length === 0 && (
                  <div style={{ gridColumn: '1 / -1', textAlign: 'center', padding: '80px', color: 'var(--slate-500)' }}>
                    {activeTab === 'my-maps' ? 'No maps yet. Create your first one!' : 'No maps shared with you yet.'}
                  </div>
                )}
              </div>
            ) : (
              /* List View */
              <div className="list-view-container" style={{ display: 'flex', flexDirection: 'column', gap: '8px', overflowX: 'auto' }}>
                {/* List Header */}
                <div style={{ 
                  display: 'grid', 
                  gridTemplateColumns: manageMode ? '40px 2.5fr 70px 70px 60px 60px 60px 80px 90px 140px' : '2.5fr 70px 70px 60px 60px 60px 80px 90px 100px',
                  gap: '12px',
                  padding: '12px 16px',
                  background: 'var(--slate-100)',
                  borderRadius: '8px',
                  fontSize: '10px',
                  fontWeight: 600,
                  color: 'var(--slate-500)',
                  textTransform: 'uppercase',
                  letterSpacing: '0.5px',
                  minWidth: manageMode ? '950px' : '850px',
                  alignItems: 'center'
                }}>
                  {manageMode && <div></div>}
                  <div>Journey</div>
                  <div style={{ textAlign: 'center' }}>Time</div>
                  <div style={{ textAlign: 'center' }}>Steps</div>
                  <div style={{ textAlign: 'center' }}>Friction</div>
                  <div style={{ textAlign: 'center' }}>Pain</div>
                  <div style={{ textAlign: 'center' }}>Opps</div>
                  <div style={{ textAlign: 'right' }}>Cost</div>
                  <div style={{ textAlign: 'right' }}>Updated</div>
                  <div style={{ textAlign: 'right' }}>Actions</div>
                </div>
                
                {/* List Rows */}
                {(activeTab === 'my-maps' ? myMaps : sharedMaps).map(map => {
                  const metrics = getMapMetrics(map.id);
                  const isSelected = selectedMaps.has(map.id);
                  const isOwner = map.owner === user.email;
                  return (
                    <div 
                      key={map.id} 
                      className="card"
                      onClick={() => manageMode ? (isOwner && toggleSelectMap(map.id)) : openMap(map.id)}
                      style={{ 
                        display: 'grid', 
                        gridTemplateColumns: manageMode ? '40px 2.5fr 70px 70px 60px 60px 60px 80px 90px 140px' : '2.5fr 70px 70px 60px 60px 60px 80px 90px 100px',
                        gap: '12px',
                        padding: '14px 16px',
                        cursor: manageMode ? (isOwner ? 'pointer' : 'default') : 'pointer',
                        alignItems: 'center',
                        transition: 'all 0.15s',
                        minWidth: manageMode ? '950px' : '850px',
                        border: isSelected ? '2px solid var(--amber-500)' : '1px solid var(--slate-200)'
                      }}
                    >
                      {/* Checkbox */}
                      {manageMode && (
                        <div style={{ display: 'flex', justifyContent: 'center' }}>
                          {isOwner && (
                            <div 
                              style={{ 
                                width: '22px',
                                height: '22px',
                                borderRadius: '5px',
                                border: isSelected ? '2px solid var(--amber-500)' : '2px solid var(--slate-300)',
                                background: isSelected ? 'var(--amber-500)' : '#FFF',
                                display: 'flex',
                                alignItems: 'center',
                                justifyContent: 'center',
                                color: '#FFF',
                                fontSize: '12px',
                                fontWeight: 'bold'
                              }}
                            >
                              {isSelected && '‚úì'}
                            </div>
                          )}
                        </div>
                      )}
                      
                      {/* Journey Title & Description */}
                      <div style={{ minWidth: 0 }}>
                        <div style={{ display: 'flex', alignItems: 'center', gap: '8px', marginBottom: '3px' }}>
                          <span style={{ fontWeight: 600, color: 'var(--navy-700)', fontSize: '14px' }}>{map.title}</span>
                          {map.favourite && <span title="Favourite" style={{ fontSize: '12px' }}>‚≠ê</span>}
                          {map.locked && <span title="Locked" style={{ fontSize: '12px' }}>üîí</span>}
                          {/* Only show badge in Shared with Me tab */}
                          {activeTab === 'shared' && (
                            <span className={`badge badge-${getPermission(map)}`} style={{ fontSize: '9px', padding: '2px 6px' }}>{getPermission(map)}</span>
                          )}
                        </div>
                        <div style={{ 
                          fontSize: '12px', 
                          color: 'var(--slate-500)', 
                          overflow: 'hidden',
                          display: '-webkit-box',
                          WebkitLineClamp: 2,
                          WebkitBoxOrient: 'vertical',
                          lineHeight: '1.4'
                        }}>
                          {map.description || 'No description'}
                        </div>
                      </div>
                      
                      {/* Metrics */}
                      <div style={{ textAlign: 'center', fontWeight: 600, fontSize: '12px', color: 'var(--navy-700)' }}>
                        {metrics ? formatTime(metrics.totalTime) : '...'}
                      </div>
                      <div style={{ textAlign: 'center', fontSize: '12px', color: 'var(--slate-600)' }}>
                        {metrics ? `${metrics.stageCount}/${metrics.totalSteps}` : '...'}
                      </div>
                      <div style={{ textAlign: 'center', fontSize: '12px', color: metrics?.avgFriction >= 4 ? 'var(--error)' : 'var(--slate-600)' }}>
                        {metrics?.avgFriction ? `${metrics.avgFriction}` : '‚Äî'}
                      </div>
                      <div style={{ textAlign: 'center', fontSize: '12px', color: metrics?.totalPainPoints > 0 ? 'var(--error)' : 'var(--slate-400)' }}>
                        {metrics?.totalPainPoints || '‚Äî'}
                      </div>
                      <div style={{ textAlign: 'center', fontSize: '12px', color: metrics?.highImprovements > 0 ? 'var(--success)' : 'var(--slate-400)' }}>
                        {metrics?.highImprovements || '‚Äî'}
                      </div>
                      <div style={{ textAlign: 'right', fontWeight: 600, fontSize: '12px', color: 'var(--navy-700)' }}>
                        {metrics && metrics.totalCost !== null ? formatCurrency(metrics.totalCost) : '‚Äî'}
                      </div>
                      <div style={{ textAlign: 'right', fontSize: '11px', color: 'var(--slate-500)' }}>
                        {formatDate(map.updatedAt)}
                      </div>
                      
                      {/* Actions */}
                      <div style={{ display: 'flex', gap: '4px', justifyContent: 'flex-end' }} onClick={e => e.stopPropagation()}>
                        {manageMode && isOwner ? (
                          <>
                            <button
                              onClick={() => toggleFavourite(map.id)}
                              title={map.favourite ? 'Remove favourite' : 'Add favourite'}
                              style={{
                                padding: '5px 8px',
                                background: map.favourite ? 'var(--amber-100)' : 'transparent',
                                border: '1px solid var(--slate-200)',
                                borderRadius: '4px',
                                cursor: 'pointer',
                                fontSize: '12px'
                              }}
                            >
                              {map.favourite ? '‚≠ê' : '‚òÜ'}
                            </button>
                            <button
                              onClick={() => toggleLock(map.id)}
                              title={map.locked ? 'Unlock' : 'Lock'}
                              style={{
                                padding: '5px 8px',
                                background: map.locked ? 'var(--slate-200)' : 'transparent',
                                border: '1px solid var(--slate-200)',
                                borderRadius: '4px',
                                cursor: 'pointer',
                                fontSize: '12px'
                              }}
                            >
                              {map.locked ? 'üîí' : 'üîì'}
                            </button>
                            <button
                              onClick={() => setShowShareModal(map.id)}
                              title="Share"
                              style={{
                                padding: '5px 8px',
                                background: 'transparent',
                                border: '1px solid var(--slate-200)',
                                borderRadius: '4px',
                                cursor: 'pointer',
                                fontSize: '12px'
                              }}
                            >
                              üë•
                            </button>
                            <button
                              onClick={() => !map.locked && setShowDeleteModal(map.id)}
                              title={map.locked ? 'Unlock to delete' : 'Delete'}
                              style={{
                                padding: '5px 8px',
                                background: 'transparent',
                                border: '1px solid var(--slate-200)',
                                borderRadius: '4px',
                                cursor: map.locked ? 'not-allowed' : 'pointer',
                                fontSize: '12px',
                                opacity: map.locked ? 0.4 : 1
                              }}
                            >
                              üóëÔ∏è
                            </button>
                          </>
                        ) : isOwner ? (
                          <>
                            <button
                              onClick={() => window.location.href = `responses.html?map=${map.id}`}
                              title="Survey Responses"
                              style={{
                                padding: '5px 10px',
                                background: 'transparent',
                                border: '1px solid var(--slate-200)',
                                borderRadius: '4px',
                                cursor: 'pointer',
                                fontSize: '11px',
                                color: 'var(--steel-500)',
                                fontWeight: 500
                              }}
                            >
                              üìä
                            </button>
                            <button
                              onClick={() => setShowShareModal(map.id)}
                              style={{
                                padding: '5px 10px',
                                background: 'transparent',
                                border: '1px solid var(--slate-200)',
                                borderRadius: '4px',
                                cursor: 'pointer',
                                fontSize: '11px',
                                color: 'var(--steel-500)',
                                fontWeight: 500
                              }}
                            >
                              Share
                            </button>
                          </>
                        ) : null}
                      </div>
                    </div>
                  );
                })}
                {(activeTab === 'my-maps' ? myMaps : sharedMaps).length === 0 && (
                  <div style={{ textAlign: 'center', padding: '80px', color: 'var(--slate-500)' }}>
                    {activeTab === 'my-maps' ? 'No maps yet. Create your first one!' : 'No maps shared with you yet.'}
                  </div>
                )}
              </div>
            )}
          </main>

          {/* Create Modal */}
          {showCreateModal && (
            <CreateMapModal 
              onClose={() => setShowCreateModal(false)} 
              onCreate={handleCreate}
              userEmail={user.email}
            />
          )}

          {/* Delete Confirmation */}
          {showDeleteModal && (
            <div className="modal-overlay" onClick={() => setShowDeleteModal(null)}>
              <div className="modal" onClick={e => e.stopPropagation()} style={{ maxWidth: '400px' }}>
                <div style={{ padding: '36px', textAlign: 'center' }}>
                  <div style={{ fontSize: '48px', marginBottom: '20px' }}>üóëÔ∏è</div>
                  <h3 style={{ marginBottom: '10px', fontSize: '20px' }}>Delete this map?</h3>
                  <p className="text-muted" style={{ marginBottom: '28px' }}>This action cannot be undone.</p>
                  <div style={{ display: 'flex', gap: '12px' }}>
                    <button onClick={() => setShowDeleteModal(null)} className="btn btn-secondary" style={{ flex: 1, padding: '12px' }}>
                      Cancel
                    </button>
                    <button onClick={() => handleDelete(showDeleteModal)} className="btn" style={{ flex: 1, padding: '12px', background: 'var(--error)', color: '#FFF' }}>
                      Delete
                    </button>
                  </div>
                </div>
              </div>
            </div>
          )}

          {/* Share Modal */}
          {showShareModal && (() => {
            const mapToShare = maps.find(m => m.id === showShareModal);
            if (!mapToShare) return null;
            
            const ShareModalContent = () => {
              const [shareEmail, setShareEmail] = React.useState('');
              const [sharePermission, setSharePermission] = React.useState('view');
              const [sharing, setSharing] = React.useState(false);
              
              const doShare = async () => {
                if (!shareEmail.trim() || !shareEmail.includes('@')) {
                  alert('Please enter a valid email address');
                  return;
                }
                setSharing(true);
                const success = await handleShare(showShareModal, shareEmail.trim(), sharePermission);
                setSharing(false);
                if (success) {
                  setShareEmail('');
                }
              };
              
              return (
                <div style={{ padding: '32px' }}>
                  <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '24px' }}>
                    <h3 style={{ fontSize: '20px', margin: 0 }}>Share "{mapToShare.title}"</h3>
                    <button 
                      onClick={() => setShowShareModal(null)}
                      style={{ background: 'none', border: 'none', fontSize: '24px', cursor: 'pointer', color: 'var(--slate-400)' }}
                    >
                      √ó
                    </button>
                  </div>
                  
                  {/* Add new share */}
                  <div style={{ display: 'flex', gap: '8px', marginBottom: '24px' }}>
                    <input
                      type="email"
                      className="input"
                      placeholder="Enter email address"
                      value={shareEmail}
                      onChange={(e) => setShareEmail(e.target.value)}
                      style={{ flex: 1 }}
                      onKeyDown={(e) => e.key === 'Enter' && doShare()}
                    />
                    <select
                      className="input"
                      value={sharePermission}
                      onChange={(e) => setSharePermission(e.target.value)}
                      style={{ width: '100px' }}
                    >
                      <option value="view">View</option>
                      <option value="edit">Edit</option>
                    </select>
                    <button
                      onClick={doShare}
                      disabled={sharing}
                      className="btn btn-primary"
                      style={{ padding: '10px 16px' }}
                    >
                      {sharing ? '...' : 'Share'}
                    </button>
                  </div>
                  
                  {/* Current shares */}
                  <div>
                    <div style={{ fontSize: '12px', color: 'var(--slate-500)', textTransform: 'uppercase', letterSpacing: '0.5px', marginBottom: '12px' }}>
                      Shared with
                    </div>
                    {(!mapToShare.sharedWith || mapToShare.sharedWith.length === 0) ? (
                      <p className="text-muted" style={{ fontSize: '14px', fontStyle: 'italic' }}>
                        Not shared with anyone yet
                      </p>
                    ) : (
                      <div style={{ display: 'flex', flexDirection: 'column', gap: '8px' }}>
                        {mapToShare.sharedWith.map((share, i) => (
                          <div key={i} style={{ 
                            display: 'flex', 
                            justifyContent: 'space-between', 
                            alignItems: 'center',
                            padding: '10px 12px',
                            background: 'var(--slate-50)',
                            borderRadius: '6px'
                          }}>
                            <div>
                              <div style={{ fontWeight: 500, fontSize: '14px' }}>{share.email}</div>
                              <div style={{ fontSize: '12px', color: 'var(--slate-500)' }}>Can {share.permission}</div>
                            </div>
                            <button
                              onClick={() => removeShare(showShareModal, share.email)}
                              style={{
                                background: 'none',
                                border: 'none',
                                color: 'var(--error)',
                                cursor: 'pointer',
                                fontSize: '18px',
                                padding: '4px 8px'
                              }}
                              title="Remove access"
                            >
                              √ó
                            </button>
                          </div>
                        ))}
                      </div>
                    )}
                  </div>
                  
                  <div style={{ marginTop: '24px', paddingTop: '16px', borderTop: '1px solid var(--slate-200)' }}>
                    <button 
                      onClick={() => setShowShareModal(null)} 
                      className="btn btn-secondary" 
                      style={{ width: '100%' }}
                    >
                      Done
                    </button>
                  </div>
                </div>
              );
            };
            
            return (
              <div className="modal-overlay" onClick={() => setShowShareModal(null)}>
                <div className="modal" onClick={e => e.stopPropagation()} style={{ maxWidth: '480px' }}>
                  <ShareModalContent />
                </div>
              </div>
            );
          })()}

          {/* Token Modal */}
          {showTokenModal && (
            <div className="modal-overlay" onClick={() => setShowTokenModal(false)}>
              <div className="modal" onClick={e => e.stopPropagation()} style={{ maxWidth: '440px' }}>
                <div style={{ padding: '36px' }}>
                  <h3 style={{ marginBottom: '10px', fontSize: '20px' }}>GitHub Token Required</h3>
                  <p className="text-muted" style={{ marginBottom: '24px' }}>
                    To create and edit maps, you need to provide a GitHub personal access token.
                  </p>
                  <input
                    type="password"
                    className="input"
                    placeholder="ghp_xxxxxxxxxxxx"
                    style={{ marginBottom: '16px' }}
                    onChange={(e) => {
                      if (e.target.value.trim()) {
                        onUpdateToken(e.target.value.trim());
                        setShowTokenModal(false);
                        setShowCreateModal(true);
                      }
                    }}
                  />
                  <button onClick={() => setShowTokenModal(false)} className="btn btn-secondary" style={{ width: '100%' }}>
                    Cancel
                  </button>
                </div>
              </div>
            </div>
          )}
        </div>
      );
    }
    
    // ============================================
    // JOURNEY TEMPLATES
    // ============================================
    const JOURNEY_TEMPLATES = [
      {
        id: 'blank',
        name: 'Blank Canvas',
        description: 'Start from scratch with an empty journey map',
        icon: 'üìÑ',
        industry: 'Any',
        stageCount: 1,
        config: {
          title: 'New Journey Map',
          currency: '¬£',
          stages: [
            { id: 'stage-1', name: 'Stage 1', steps: [{ id: 'step-1-1', name: 'First Step', time: 30, personaId: null, friction: 'none', notes: '' }] }
          ],
          personas: [
            { id: 'customer', name: 'Customer', salary: 0, isExternal: true },
            { id: 'staff', name: 'Staff Member', salary: 35000, isExternal: false }
          ],
          funnelConfig: { enabled: false, startVolume: 100, stages: {} }
        }
      },
      {
        id: 'financial_client_onboarding',
        name: 'Client Onboarding',
        description: 'Wealth management or advisory client onboarding with KYC, compliance, and account setup',
        icon: 'üè¶',
        industry: 'Financial Services',
        stageCount: 6,
        config: {
          title: 'Client Onboarding Journey',
          currency: '¬£',
          stages: [
            { id: 'stage-discovery', name: 'Discovery & Qualification', steps: [
              { id: 'step-1-1', name: 'Initial Enquiry Received', time: 15, personaId: 'administrator', friction: 'none', notes: 'Via web form, phone, or referral' },
              { id: 'step-1-2', name: 'Qualification Call', time: 45, personaId: 'advisor', friction: 'low', notes: 'Assess fit and requirements' },
              { id: 'step-1-3', name: 'Send Welcome Pack', time: 20, personaId: 'administrator', friction: 'none', notes: '' },
              { id: 'step-1-4', name: 'Schedule Discovery Meeting', time: 15, personaId: 'administrator', friction: 'none', notes: '' }
            ]},
            { id: 'stage-kyc', name: 'KYC & Compliance', steps: [
              { id: 'step-2-1', name: 'Collect ID Documents', time: 30, personaId: 'client', friction: 'medium', notes: 'Passport, proof of address' },
              { id: 'step-2-2', name: 'Verify Identity (AML Check)', time: 45, personaId: 'compliance', friction: 'low', notes: '' },
              { id: 'step-2-3', name: 'Source of Wealth Declaration', time: 60, personaId: 'client', friction: 'high', notes: 'Often requires chasing' },
              { id: 'step-2-4', name: 'Compliance Review & Sign-off', time: 30, personaId: 'compliance', friction: 'medium', notes: '' },
              { id: 'step-2-5', name: 'Risk Profiling Questionnaire', time: 25, personaId: 'client', friction: 'low', notes: '' }
            ]},
            { id: 'stage-factfind', name: 'Fact Find & Analysis', steps: [
              { id: 'step-3-1', name: 'Discovery Meeting', time: 90, personaId: 'advisor', friction: 'none', notes: '' },
              { id: 'step-3-2', name: 'Gather Financial Information', time: 120, personaId: 'client', friction: 'high', notes: '' },
              { id: 'step-3-3', name: 'Input Data to Planning System', time: 60, personaId: 'paraplanner', friction: 'medium', notes: '' },
              { id: 'step-3-4', name: 'Cash Flow Modelling', time: 120, personaId: 'paraplanner', friction: 'low', notes: '' },
              { id: 'step-3-5', name: 'Research & Provider Selection', time: 180, personaId: 'paraplanner', friction: 'medium', notes: '' }
            ]},
            { id: 'stage-advice', name: 'Advice & Recommendation', steps: [
              { id: 'step-4-1', name: 'Draft Suitability Report', time: 240, personaId: 'paraplanner', friction: 'medium', notes: '' },
              { id: 'step-4-2', name: 'Advisor Review', time: 60, personaId: 'advisor', friction: 'low', notes: '' },
              { id: 'step-4-3', name: 'Compliance Review', time: 45, personaId: 'compliance', friction: 'medium', notes: '' },
              { id: 'step-4-4', name: 'Recommendation Meeting', time: 90, personaId: 'advisor', friction: 'none', notes: '' }
            ]},
            { id: 'stage-implementation', name: 'Implementation', steps: [
              { id: 'step-5-1', name: 'Prepare Application Forms', time: 45, personaId: 'administrator', friction: 'medium', notes: '' },
              { id: 'step-5-2', name: 'Client Signatures', time: 30, personaId: 'client', friction: 'medium', notes: '' },
              { id: 'step-5-3', name: 'Submit Applications', time: 30, personaId: 'administrator', friction: 'low', notes: '' },
              { id: 'step-5-4', name: 'Chase Providers', time: 60, personaId: 'administrator', friction: 'high', notes: '' }
            ]},
            { id: 'stage-handover', name: 'Handover & Review', steps: [
              { id: 'step-6-1', name: 'Welcome to Service Call', time: 30, personaId: 'advisor', friction: 'none', notes: '' },
              { id: 'step-6-2', name: 'Portal Setup', time: 20, personaId: 'administrator', friction: 'low', notes: '' },
              { id: 'step-6-3', name: 'Schedule Annual Review', time: 10, personaId: 'administrator', friction: 'none', notes: '' }
            ]}
          ],
          personas: [
            { id: 'client', name: 'Client', salary: 0, isExternal: true },
            { id: 'advisor', name: 'Financial Advisor', salary: 75000, isExternal: false },
            { id: 'paraplanner', name: 'Paraplanner', salary: 45000, isExternal: false },
            { id: 'administrator', name: 'Administrator', salary: 28000, isExternal: false },
            { id: 'compliance', name: 'Compliance Officer', salary: 55000, isExternal: false }
          ],
          funnelConfig: { enabled: true, startVolume: 100, stages: { 'stage-discovery': { dropOff: 25 }, 'stage-kyc': { dropOff: 10 }, 'stage-factfind': { dropOff: 5 }, 'stage-advice': { dropOff: 10 }, 'stage-implementation': { dropOff: 5 }, 'stage-handover': { dropOff: 0 } }}
        }
      },
      {
        id: 'employee_onboarding',
        name: 'Employee Onboarding',
        description: 'New hire onboarding from offer acceptance through to full productivity',
        icon: 'üëã',
        industry: 'Human Resources',
        stageCount: 6,
        config: {
          title: 'Employee Onboarding Journey',
          currency: '¬£',
          stages: [
            { id: 'stage-preboarding', name: 'Pre-boarding', steps: [
              { id: 'step-1-1', name: 'Send Offer Letter', time: 30, personaId: 'hr', friction: 'none', notes: '' },
              { id: 'step-1-2', name: 'Receive Signed Contract', time: 15, personaId: 'new-hire', friction: 'low', notes: '' },
              { id: 'step-1-3', name: 'Collect Personal Details', time: 20, personaId: 'new-hire', friction: 'low', notes: '' },
              { id: 'step-1-4', name: 'Right to Work Check', time: 30, personaId: 'hr', friction: 'medium', notes: '' },
              { id: 'step-1-5', name: 'Send Welcome Email', time: 15, personaId: 'hr', friction: 'none', notes: '' }
            ]},
            { id: 'stage-it-setup', name: 'IT & Access Setup', steps: [
              { id: 'step-2-1', name: 'Create User Accounts', time: 45, personaId: 'it', friction: 'low', notes: '' },
              { id: 'step-2-2', name: 'Provision Equipment', time: 60, personaId: 'it', friction: 'medium', notes: '' },
              { id: 'step-2-3', name: 'Configure Access Permissions', time: 30, personaId: 'it', friction: 'medium', notes: '' },
              { id: 'step-2-4', name: 'Create Building Pass', time: 20, personaId: 'facilities', friction: 'none', notes: '' }
            ]},
            { id: 'stage-day-one', name: 'First Day', steps: [
              { id: 'step-3-1', name: 'Reception & Welcome', time: 15, personaId: 'hr', friction: 'none', notes: '' },
              { id: 'step-3-2', name: 'IT Equipment Handover', time: 30, personaId: 'it', friction: 'low', notes: '' },
              { id: 'step-3-3', name: 'HR Paperwork Session', time: 60, personaId: 'hr', friction: 'medium', notes: '' },
              { id: 'step-3-4', name: 'Manager Welcome Meeting', time: 45, personaId: 'manager', friction: 'none', notes: '' },
              { id: 'step-3-5', name: 'Team Introductions', time: 30, personaId: 'manager', friction: 'none', notes: '' }
            ]},
            { id: 'stage-first-week', name: 'First Week', steps: [
              { id: 'step-4-1', name: 'Company Induction', time: 120, personaId: 'hr', friction: 'low', notes: '' },
              { id: 'step-4-2', name: 'Health & Safety Training', time: 60, personaId: 'new-hire', friction: 'low', notes: '' },
              { id: 'step-4-3', name: 'Role-Specific Orientation', time: 180, personaId: 'manager', friction: 'low', notes: '' },
              { id: 'step-4-4', name: 'End of Week Check-in', time: 30, personaId: 'manager', friction: 'none', notes: '' }
            ]},
            { id: 'stage-first-month', name: 'First Month', steps: [
              { id: 'step-5-1', name: 'Complete Compliance Training', time: 240, personaId: 'new-hire', friction: 'medium', notes: '' },
              { id: 'step-5-2', name: 'Weekly 1:1s', time: 120, personaId: 'manager', friction: 'none', notes: '4 sessions' },
              { id: 'step-5-3', name: '30-Day Review', time: 45, personaId: 'manager', friction: 'low', notes: '' }
            ]},
            { id: 'stage-probation', name: 'Probation & Sign-off', steps: [
              { id: 'step-6-1', name: '90-Day Review', time: 60, personaId: 'manager', friction: 'low', notes: '' },
              { id: 'step-6-2', name: 'Probation Sign-off', time: 30, personaId: 'hr', friction: 'medium', notes: '' },
              { id: 'step-6-3', name: 'Onboarding Survey', time: 15, personaId: 'new-hire', friction: 'none', notes: '' }
            ]}
          ],
          personas: [
            { id: 'new-hire', name: 'New Hire', salary: 40000, isExternal: false },
            { id: 'manager', name: 'Hiring Manager', salary: 65000, isExternal: false },
            { id: 'hr', name: 'HR Coordinator', salary: 32000, isExternal: false },
            { id: 'it', name: 'IT Support', salary: 35000, isExternal: false },
            { id: 'facilities', name: 'Facilities', salary: 28000, isExternal: false }
          ],
          funnelConfig: { enabled: true, startVolume: 50, stages: { 'stage-preboarding': { dropOff: 3 }, 'stage-it-setup': { dropOff: 0 }, 'stage-day-one': { dropOff: 1 }, 'stage-first-week': { dropOff: 1 }, 'stage-first-month': { dropOff: 2 }, 'stage-probation': { dropOff: 2 } }}
        }
      },
      {
        id: 'recruitment_hiring',
        name: 'Recruitment & Hiring',
        description: 'End-to-end hiring process from job requisition to offer acceptance',
        icon: 'üéØ',
        industry: 'Human Resources',
        stageCount: 6,
        config: {
          title: 'Recruitment Journey',
          currency: '¬£',
          stages: [
            { id: 'stage-requisition', name: 'Requisition & Planning', steps: [
              { id: 'step-1-1', name: 'Hiring Need Identified', time: 30, personaId: 'hiring-manager', friction: 'none', notes: '' },
              { id: 'step-1-2', name: 'Complete Job Requisition', time: 45, personaId: 'hiring-manager', friction: 'low', notes: '' },
              { id: 'step-1-3', name: 'Budget Approval', time: 30, personaId: 'finance', friction: 'medium', notes: '' },
              { id: 'step-1-4', name: 'Draft Job Description', time: 60, personaId: 'recruiter', friction: 'low', notes: '' }
            ]},
            { id: 'stage-sourcing', name: 'Sourcing & Advertising', steps: [
              { id: 'step-2-1', name: 'Post to Job Boards', time: 30, personaId: 'recruiter', friction: 'none', notes: '' },
              { id: 'step-2-2', name: 'Direct Sourcing', time: 180, personaId: 'recruiter', friction: 'medium', notes: '' },
              { id: 'step-2-3', name: 'Referral Outreach', time: 30, personaId: 'recruiter', friction: 'none', notes: '' }
            ]},
            { id: 'stage-screening', name: 'Screening', steps: [
              { id: 'step-3-1', name: 'CV Review', time: 120, personaId: 'recruiter', friction: 'medium', notes: '' },
              { id: 'step-3-2', name: 'Phone Screens', time: 180, personaId: 'recruiter', friction: 'low', notes: '' },
              { id: 'step-3-3', name: 'Shortlist Review', time: 30, personaId: 'hiring-manager', friction: 'low', notes: '' },
              { id: 'step-3-4', name: 'Schedule Interviews', time: 45, personaId: 'recruiter', friction: 'medium', notes: '' }
            ]},
            { id: 'stage-interview', name: 'Interviews', steps: [
              { id: 'step-4-1', name: 'First Round Interview', time: 60, personaId: 'hiring-manager', friction: 'low', notes: '' },
              { id: 'step-4-2', name: 'Technical Interview', time: 90, personaId: 'interviewer', friction: 'low', notes: '' },
              { id: 'step-4-3', name: 'Final Round', time: 90, personaId: 'hiring-manager', friction: 'low', notes: '' },
              { id: 'step-4-4', name: 'Interview Debrief', time: 30, personaId: 'hiring-manager', friction: 'none', notes: '' }
            ]},
            { id: 'stage-offer', name: 'Offer & Negotiation', steps: [
              { id: 'step-5-1', name: 'Reference Checks', time: 60, personaId: 'recruiter', friction: 'medium', notes: '' },
              { id: 'step-5-2', name: 'Prepare Offer', time: 45, personaId: 'recruiter', friction: 'low', notes: '' },
              { id: 'step-5-3', name: 'Verbal Offer', time: 30, personaId: 'hiring-manager', friction: 'low', notes: '' },
              { id: 'step-5-4', name: 'Negotiation', time: 45, personaId: 'recruiter', friction: 'medium', notes: '' }
            ]},
            { id: 'stage-close', name: 'Close & Handover', steps: [
              { id: 'step-6-1', name: 'Receive Signed Offer', time: 15, personaId: 'candidate', friction: 'low', notes: '' },
              { id: 'step-6-2', name: 'Reject Other Candidates', time: 45, personaId: 'recruiter', friction: 'low', notes: '' },
              { id: 'step-6-3', name: 'Handover to Onboarding', time: 20, personaId: 'recruiter', friction: 'none', notes: '' }
            ]}
          ],
          personas: [
            { id: 'candidate', name: 'Candidate', salary: 0, isExternal: true },
            { id: 'hiring-manager', name: 'Hiring Manager', salary: 65000, isExternal: false },
            { id: 'recruiter', name: 'Recruiter', salary: 38000, isExternal: false },
            { id: 'interviewer', name: 'Interview Panel', salary: 55000, isExternal: false },
            { id: 'finance', name: 'Finance Approver', salary: 60000, isExternal: false }
          ],
          funnelConfig: { enabled: true, startVolume: 150, stages: { 'stage-requisition': { dropOff: 0 }, 'stage-sourcing': { dropOff: 0 }, 'stage-screening': { dropOff: 120 }, 'stage-interview': { dropOff: 20 }, 'stage-offer': { dropOff: 5 }, 'stage-close': { dropOff: 2 } }}
        }
      },
      {
        id: 'saas_customer_onboarding',
        name: 'Customer Onboarding (SaaS)',
        description: 'Enterprise software implementation and activation journey',
        icon: 'üöÄ',
        industry: 'Technology / SaaS',
        stageCount: 6,
        config: {
          title: 'Customer Onboarding Journey',
          currency: '¬£',
          stages: [
            { id: 'stage-handoff', name: 'Sales Handoff', steps: [
              { id: 'step-1-1', name: 'Deal Closed', time: 15, personaId: 'sales', friction: 'none', notes: '' },
              { id: 'step-1-2', name: 'Internal Handoff Meeting', time: 30, personaId: 'csm', friction: 'low', notes: '' },
              { id: 'step-1-3', name: 'Assign Implementation Team', time: 15, personaId: 'csm', friction: 'none', notes: '' },
              { id: 'step-1-4', name: 'Send Welcome Email', time: 15, personaId: 'csm', friction: 'none', notes: '' }
            ]},
            { id: 'stage-kickoff', name: 'Kickoff', steps: [
              { id: 'step-2-1', name: 'Kickoff Meeting', time: 60, personaId: 'csm', friction: 'none', notes: '' },
              { id: 'step-2-2', name: 'Gather Requirements', time: 45, personaId: 'implementation', friction: 'medium', notes: '' },
              { id: 'step-2-3', name: 'Define Success Criteria', time: 30, personaId: 'csm', friction: 'low', notes: '' },
              { id: 'step-2-4', name: 'Create Implementation Plan', time: 60, personaId: 'implementation', friction: 'low', notes: '' }
            ]},
            { id: 'stage-setup', name: 'Technical Setup', steps: [
              { id: 'step-3-1', name: 'Provision Environment', time: 30, personaId: 'implementation', friction: 'none', notes: '' },
              { id: 'step-3-2', name: 'SSO Setup', time: 90, personaId: 'implementation', friction: 'high', notes: '' },
              { id: 'step-3-3', name: 'Data Migration', time: 180, personaId: 'implementation', friction: 'high', notes: '' },
              { id: 'step-3-4', name: 'Integration Setup', time: 120, personaId: 'implementation', friction: 'high', notes: '' },
              { id: 'step-3-5', name: 'Custom Configuration', time: 90, personaId: 'implementation', friction: 'medium', notes: '' }
            ]},
            { id: 'stage-training', name: 'Training', steps: [
              { id: 'step-4-1', name: 'Admin Training', time: 90, personaId: 'implementation', friction: 'low', notes: '' },
              { id: 'step-4-2', name: 'End User Training', time: 240, personaId: 'implementation', friction: 'low', notes: 'Multiple sessions' },
              { id: 'step-4-3', name: 'Create Documentation', time: 60, personaId: 'csm', friction: 'medium', notes: '' }
            ]},
            { id: 'stage-golive', name: 'Go-Live', steps: [
              { id: 'step-5-1', name: 'User Acceptance Testing', time: 120, personaId: 'customer', friction: 'medium', notes: '' },
              { id: 'step-5-2', name: 'Fix UAT Issues', time: 90, personaId: 'implementation', friction: 'medium', notes: '' },
              { id: 'step-5-3', name: 'Go-Live Support', time: 120, personaId: 'support', friction: 'medium', notes: '' }
            ]},
            { id: 'stage-adoption', name: 'Adoption & Handover', steps: [
              { id: 'step-6-1', name: 'Monitor Adoption', time: 30, personaId: 'csm', friction: 'low', notes: '' },
              { id: 'step-6-2', name: '30-Day Success Review', time: 45, personaId: 'csm', friction: 'none', notes: '' },
              { id: 'step-6-3', name: 'Transition to BAU', time: 30, personaId: 'csm', friction: 'none', notes: '' },
              { id: 'step-6-4', name: 'Collect NPS', time: 15, personaId: 'customer', friction: 'none', notes: '' }
            ]}
          ],
          personas: [
            { id: 'customer', name: 'Customer', salary: 0, isExternal: true },
            { id: 'sales', name: 'Account Executive', salary: 70000, isExternal: false },
            { id: 'csm', name: 'Customer Success Manager', salary: 50000, isExternal: false },
            { id: 'implementation', name: 'Implementation Specialist', salary: 45000, isExternal: false },
            { id: 'support', name: 'Support Engineer', salary: 38000, isExternal: false }
          ],
          funnelConfig: { enabled: true, startVolume: 20, stages: { 'stage-handoff': { dropOff: 0 }, 'stage-kickoff': { dropOff: 1 }, 'stage-setup': { dropOff: 1 }, 'stage-training': { dropOff: 0 }, 'stage-golive': { dropOff: 1 }, 'stage-adoption': { dropOff: 0 } }}
        }
      },
      {
        id: 'insurance_claim',
        name: 'Insurance Claim',
        description: 'End-to-end claim processing from first notice to settlement',
        icon: 'üõ°Ô∏è',
        industry: 'Insurance',
        stageCount: 6,
        config: {
          title: 'Insurance Claim Journey',
          currency: '¬£',
          stages: [
            { id: 'stage-fnol', name: 'First Notice of Loss', steps: [
              { id: 'step-1-1', name: 'Claim Reported', time: 20, personaId: 'claimant', friction: 'medium', notes: '' },
              { id: 'step-1-2', name: 'Initial Logging', time: 15, personaId: 'agent', friction: 'none', notes: '' },
              { id: 'step-1-3', name: 'Policy Verification', time: 10, personaId: 'agent', friction: 'low', notes: '' },
              { id: 'step-1-4', name: 'Gather Incident Details', time: 25, personaId: 'agent', friction: 'low', notes: '' }
            ]},
            { id: 'stage-documentation', name: 'Documentation', steps: [
              { id: 'step-2-1', name: 'Request Documents', time: 15, personaId: 'agent', friction: 'none', notes: '' },
              { id: 'step-2-2', name: 'Claimant Gathers Evidence', time: 60, personaId: 'claimant', friction: 'high', notes: '' },
              { id: 'step-2-3', name: 'Chase Missing Documents', time: 30, personaId: 'agent', friction: 'high', notes: '' },
              { id: 'step-2-4', name: 'Document Review', time: 20, personaId: 'agent', friction: 'low', notes: '' }
            ]},
            { id: 'stage-assessment', name: 'Assessment', steps: [
              { id: 'step-3-1', name: 'Assign to Assessor', time: 10, personaId: 'agent', friction: 'none', notes: '' },
              { id: 'step-3-2', name: 'Review Claim Details', time: 30, personaId: 'assessor', friction: 'low', notes: '' },
              { id: 'step-3-3', name: 'Conduct Assessment', time: 90, personaId: 'assessor', friction: 'medium', notes: '' },
              { id: 'step-3-4', name: 'Write Assessment Report', time: 45, personaId: 'assessor', friction: 'low', notes: '' }
            ]},
            { id: 'stage-adjudication', name: 'Adjudication', steps: [
              { id: 'step-4-1', name: 'Review Assessment', time: 30, personaId: 'adjuster', friction: 'low', notes: '' },
              { id: 'step-4-2', name: 'Check Policy Terms', time: 20, personaId: 'adjuster', friction: 'low', notes: '' },
              { id: 'step-4-3', name: 'Fraud Screening', time: 15, personaId: 'adjuster', friction: 'low', notes: '' },
              { id: 'step-4-4', name: 'Calculate Settlement', time: 25, personaId: 'adjuster', friction: 'low', notes: '' },
              { id: 'step-4-5', name: 'Manager Approval', time: 20, personaId: 'manager', friction: 'medium', notes: '' }
            ]},
            { id: 'stage-settlement', name: 'Settlement', steps: [
              { id: 'step-5-1', name: 'Communicate Decision', time: 20, personaId: 'agent', friction: 'low', notes: '' },
              { id: 'step-5-2', name: 'Handle Disputes', time: 30, personaId: 'agent', friction: 'medium', notes: '' },
              { id: 'step-5-3', name: 'Process Payment', time: 15, personaId: 'payments', friction: 'low', notes: '' }
            ]},
            { id: 'stage-close', name: 'Closure', steps: [
              { id: 'step-6-1', name: 'Final Documentation', time: 15, personaId: 'agent', friction: 'none', notes: '' },
              { id: 'step-6-2', name: 'Close Claim', time: 10, personaId: 'agent', friction: 'none', notes: '' },
              { id: 'step-6-3', name: 'Customer Survey', time: 5, personaId: 'claimant', friction: 'none', notes: '' }
            ]}
          ],
          personas: [
            { id: 'claimant', name: 'Claimant', salary: 0, isExternal: true },
            { id: 'agent', name: 'Claims Agent', salary: 28000, isExternal: false },
            { id: 'assessor', name: 'Loss Assessor', salary: 42000, isExternal: false },
            { id: 'adjuster', name: 'Claims Adjuster', salary: 38000, isExternal: false },
            { id: 'manager', name: 'Claims Manager', salary: 55000, isExternal: false },
            { id: 'payments', name: 'Payments Team', salary: 30000, isExternal: false }
          ],
          funnelConfig: { enabled: true, startVolume: 500, stages: { 'stage-fnol': { dropOff: 25 }, 'stage-documentation': { dropOff: 40 }, 'stage-assessment': { dropOff: 15 }, 'stage-adjudication': { dropOff: 30 }, 'stage-settlement': { dropOff: 5 }, 'stage-close': { dropOff: 0 } }}
        }
      },
      {
        id: 'contract_lifecycle',
        name: 'Contract Lifecycle',
        description: 'Contract request through negotiation, approval, and execution',
        icon: 'üìù',
        industry: 'Legal / Procurement',
        stageCount: 6,
        config: {
          title: 'Contract Lifecycle Journey',
          currency: '¬£',
          stages: [
            { id: 'stage-request', name: 'Request & Intake', steps: [
              { id: 'step-1-1', name: 'Contract Request', time: 20, personaId: 'requestor', friction: 'low', notes: '' },
              { id: 'step-1-2', name: 'Initial Triage', time: 15, personaId: 'legal-ops', friction: 'none', notes: '' },
              { id: 'step-1-3', name: 'Assign to Counsel', time: 10, personaId: 'legal-ops', friction: 'none', notes: '' },
              { id: 'step-1-4', name: 'Gather Requirements', time: 30, personaId: 'legal', friction: 'low', notes: '' }
            ]},
            { id: 'stage-draft', name: 'Drafting', steps: [
              { id: 'step-2-1', name: 'Select Template', time: 15, personaId: 'legal', friction: 'none', notes: '' },
              { id: 'step-2-2', name: 'Draft Contract', time: 120, personaId: 'legal', friction: 'medium', notes: '' },
              { id: 'step-2-3', name: 'Internal Review', time: 45, personaId: 'legal', friction: 'low', notes: '' },
              { id: 'step-2-4', name: 'Requestor Review', time: 30, personaId: 'requestor', friction: 'low', notes: '' }
            ]},
            { id: 'stage-negotiation', name: 'Negotiation', steps: [
              { id: 'step-3-1', name: 'Send to Counterparty', time: 15, personaId: 'legal', friction: 'none', notes: '' },
              { id: 'step-3-2', name: 'Counterparty Review', time: 60, personaId: 'counterparty', friction: 'medium', notes: '' },
              { id: 'step-3-3', name: 'Review Redlines', time: 90, personaId: 'legal', friction: 'medium', notes: '' },
              { id: 'step-3-4', name: 'Negotiate Key Terms', time: 60, personaId: 'legal', friction: 'high', notes: '' }
            ]},
            { id: 'stage-approval', name: 'Approval', steps: [
              { id: 'step-4-1', name: 'Business Approval', time: 30, personaId: 'requestor', friction: 'low', notes: '' },
              { id: 'step-4-2', name: 'Finance Review', time: 45, personaId: 'finance', friction: 'medium', notes: '' },
              { id: 'step-4-3', name: 'Legal Sign-off', time: 20, personaId: 'legal', friction: 'none', notes: '' },
              { id: 'step-4-4', name: 'Executive Approval', time: 30, personaId: 'executive', friction: 'medium', notes: '' }
            ]},
            { id: 'stage-execution', name: 'Execution', steps: [
              { id: 'step-5-1', name: 'Internal Signature', time: 20, personaId: 'signatory', friction: 'low', notes: '' },
              { id: 'step-5-2', name: 'Send for Signature', time: 10, personaId: 'legal-ops', friction: 'none', notes: '' },
              { id: 'step-5-3', name: 'Chase Counterparty', time: 30, personaId: 'legal-ops', friction: 'medium', notes: '' },
              { id: 'step-5-4', name: 'Receive Executed Contract', time: 15, personaId: 'counterparty', friction: 'low', notes: '' }
            ]},
            { id: 'stage-post', name: 'Post-Execution', steps: [
              { id: 'step-6-1', name: 'Upload to CLM', time: 15, personaId: 'legal-ops', friction: 'none', notes: '' },
              { id: 'step-6-2', name: 'Extract Key Terms', time: 20, personaId: 'legal-ops', friction: 'low', notes: '' },
              { id: 'step-6-3', name: 'Set Reminders', time: 10, personaId: 'legal-ops', friction: 'none', notes: '' },
              { id: 'step-6-4', name: 'Close Request', time: 5, personaId: 'legal-ops', friction: 'none', notes: '' }
            ]}
          ],
          personas: [
            { id: 'counterparty', name: 'Counterparty', salary: 0, isExternal: true },
            { id: 'requestor', name: 'Business Requestor', salary: 55000, isExternal: false },
            { id: 'legal', name: 'Legal Counsel', salary: 85000, isExternal: false },
            { id: 'legal-ops', name: 'Legal Operations', salary: 38000, isExternal: false },
            { id: 'finance', name: 'Finance', salary: 60000, isExternal: false },
            { id: 'signatory', name: 'Authorised Signatory', salary: 90000, isExternal: false },
            { id: 'executive', name: 'Executive Approver', salary: 120000, isExternal: false }
          ],
          funnelConfig: { enabled: true, startVolume: 50, stages: { 'stage-request': { dropOff: 2 }, 'stage-draft': { dropOff: 3 }, 'stage-negotiation': { dropOff: 5 }, 'stage-approval': { dropOff: 2 }, 'stage-execution': { dropOff: 1 }, 'stage-post': { dropOff: 0 } }}
        }
      },
      {
        id: 'property_purchase',
        name: 'Property Purchase (UK)',
        description: 'Residential property purchase from offer to completion',
        icon: 'üè†',
        industry: 'Property / Real Estate',
        stageCount: 6,
        config: {
          title: 'Property Purchase Journey',
          currency: '¬£',
          stages: [
            { id: 'stage-offer', name: 'Offer & Instruction', steps: [
              { id: 'step-1-1', name: 'Offer Accepted', time: 15, personaId: 'buyer', friction: 'none', notes: '' },
              { id: 'step-1-2', name: 'Instruct Solicitor', time: 30, personaId: 'buyer', friction: 'low', notes: '' },
              { id: 'step-1-3', name: 'Client Care Forms', time: 45, personaId: 'buyer', friction: 'medium', notes: '' },
              { id: 'step-1-4', name: 'Pay Initial Fees', time: 15, personaId: 'buyer', friction: 'low', notes: '' }
            ]},
            { id: 'stage-mortgage', name: 'Mortgage Application', steps: [
              { id: 'step-2-1', name: 'Gather Documents', time: 90, personaId: 'buyer', friction: 'high', notes: '' },
              { id: 'step-2-2', name: 'Submit Application', time: 45, personaId: 'broker', friction: 'low', notes: '' },
              { id: 'step-2-3', name: 'Lender Processing', time: 30, personaId: 'lender', friction: 'medium', notes: '' },
              { id: 'step-2-4', name: 'Valuation', time: 60, personaId: 'surveyor', friction: 'low', notes: '' },
              { id: 'step-2-5', name: 'Mortgage Offer Issued', time: 15, personaId: 'lender', friction: 'none', notes: '' }
            ]},
            { id: 'stage-searches', name: 'Searches & Enquiries', steps: [
              { id: 'step-3-1', name: 'Order Searches', time: 20, personaId: 'solicitor', friction: 'none', notes: '' },
              { id: 'step-3-2', name: 'Receive Results', time: 30, personaId: 'solicitor', friction: 'medium', notes: '2-4 weeks' },
              { id: 'step-3-3', name: 'Review Title', time: 60, personaId: 'solicitor', friction: 'low', notes: '' },
              { id: 'step-3-4', name: 'Raise Enquiries', time: 45, personaId: 'solicitor', friction: 'medium', notes: '' },
              { id: 'step-3-5', name: 'Chase Responses', time: 60, personaId: 'solicitor', friction: 'high', notes: '' }
            ]},
            { id: 'stage-survey', name: 'Survey', steps: [
              { id: 'step-4-1', name: 'Instruct Surveyor', time: 20, personaId: 'buyer', friction: 'low', notes: '' },
              { id: 'step-4-2', name: 'Survey Conducted', time: 180, personaId: 'surveyor', friction: 'low', notes: '' },
              { id: 'step-4-3', name: 'Review Report', time: 45, personaId: 'buyer', friction: 'medium', notes: '' },
              { id: 'step-4-4', name: 'Renegotiate if Required', time: 60, personaId: 'estate-agent', friction: 'high', notes: '' }
            ]},
            { id: 'stage-exchange', name: 'Exchange', steps: [
              { id: 'step-5-1', name: 'Report on Title', time: 45, personaId: 'solicitor', friction: 'low', notes: '' },
              { id: 'step-5-2', name: 'Sign Contract', time: 30, personaId: 'buyer', friction: 'low', notes: '' },
              { id: 'step-5-3', name: 'Transfer Deposit', time: 30, personaId: 'buyer', friction: 'medium', notes: '' },
              { id: 'step-5-4', name: 'Exchange Contracts', time: 30, personaId: 'solicitor', friction: 'low', notes: '' }
            ]},
            { id: 'stage-completion', name: 'Completion', steps: [
              { id: 'step-6-1', name: 'Final Checks', time: 30, personaId: 'solicitor', friction: 'low', notes: '' },
              { id: 'step-6-2', name: 'Transfer Funds', time: 30, personaId: 'buyer', friction: 'medium', notes: '' },
              { id: 'step-6-3', name: 'Complete Purchase', time: 15, personaId: 'solicitor', friction: 'none', notes: '' },
              { id: 'step-6-4', name: 'Pay Stamp Duty', time: 15, personaId: 'solicitor', friction: 'none', notes: '' },
              { id: 'step-6-5', name: 'Register with Land Registry', time: 30, personaId: 'solicitor', friction: 'low', notes: '' }
            ]}
          ],
          personas: [
            { id: 'buyer', name: 'Buyer', salary: 0, isExternal: true },
            { id: 'solicitor', name: 'Conveyancer', salary: 48000, isExternal: false },
            { id: 'broker', name: 'Mortgage Broker', salary: 45000, isExternal: false },
            { id: 'surveyor', name: 'Surveyor', salary: 50000, isExternal: false },
            { id: 'estate-agent', name: 'Estate Agent', salary: 35000, isExternal: false },
            { id: 'lender', name: 'Mortgage Lender', salary: 40000, isExternal: false }
          ],
          funnelConfig: { enabled: true, startVolume: 100, stages: { 'stage-offer': { dropOff: 5 }, 'stage-mortgage': { dropOff: 10 }, 'stage-searches': { dropOff: 8 }, 'stage-survey': { dropOff: 12 }, 'stage-exchange': { dropOff: 5 }, 'stage-completion': { dropOff: 2 } }}
        }
      },
      {
        id: 'vendor_onboarding',
        name: 'Vendor/Supplier Onboarding',
        description: 'Third-party vendor setup with due diligence and compliance',
        icon: 'ü§ù',
        industry: 'Procurement',
        stageCount: 6,
        config: {
          title: 'Vendor Onboarding Journey',
          currency: '¬£',
          stages: [
            { id: 'stage-request', name: 'Request & Justification', steps: [
              { id: 'step-1-1', name: 'New Vendor Request', time: 20, personaId: 'requestor', friction: 'low', notes: '' },
              { id: 'step-1-2', name: 'Business Justification', time: 30, personaId: 'requestor', friction: 'medium', notes: '' },
              { id: 'step-1-3', name: 'Check Existing Vendors', time: 15, personaId: 'procurement', friction: 'none', notes: '' },
              { id: 'step-1-4', name: 'Initial Approval', time: 20, personaId: 'manager', friction: 'low', notes: '' }
            ]},
            { id: 'stage-collection', name: 'Information Collection', steps: [
              { id: 'step-2-1', name: 'Send Vendor Questionnaire', time: 15, personaId: 'procurement', friction: 'none', notes: '' },
              { id: 'step-2-2', name: 'Vendor Completes Forms', time: 60, personaId: 'vendor', friction: 'medium', notes: '' },
              { id: 'step-2-3', name: 'Collect Certifications', time: 30, personaId: 'vendor', friction: 'medium', notes: '' },
              { id: 'step-2-4', name: 'Chase Missing Information', time: 45, personaId: 'procurement', friction: 'high', notes: '' }
            ]},
            { id: 'stage-due-diligence', name: 'Due Diligence', steps: [
              { id: 'step-3-1', name: 'Financial Health Check', time: 30, personaId: 'finance', friction: 'low', notes: '' },
              { id: 'step-3-2', name: 'Compliance Screening', time: 30, personaId: 'compliance', friction: 'low', notes: '' },
              { id: 'step-3-3', name: 'Security Assessment', time: 45, personaId: 'it-security', friction: 'medium', notes: '' },
              { id: 'step-3-4', name: 'Risk Assessment', time: 30, personaId: 'procurement', friction: 'low', notes: '' }
            ]},
            { id: 'stage-contract', name: 'Contracting', steps: [
              { id: 'step-4-1', name: 'Draft Contract', time: 60, personaId: 'legal', friction: 'low', notes: '' },
              { id: 'step-4-2', name: 'Negotiate Terms', time: 90, personaId: 'legal', friction: 'medium', notes: '' },
              { id: 'step-4-3', name: 'Obtain Signatures', time: 30, personaId: 'procurement', friction: 'low', notes: '' }
            ]},
            { id: 'stage-setup', name: 'System Setup', steps: [
              { id: 'step-5-1', name: 'Create in ERP', time: 30, personaId: 'finance', friction: 'low', notes: '' },
              { id: 'step-5-2', name: 'Set Up Payment Terms', time: 20, personaId: 'finance', friction: 'none', notes: '' },
              { id: 'step-5-3', name: 'Grant System Access', time: 20, personaId: 'it', friction: 'low', notes: '' }
            ]},
            { id: 'stage-activation', name: 'Activation', steps: [
              { id: 'step-6-1', name: 'Send Welcome Pack', time: 15, personaId: 'procurement', friction: 'none', notes: '' },
              { id: 'step-6-2', name: 'Test Transaction', time: 20, personaId: 'finance', friction: 'low', notes: '' },
              { id: 'step-6-3', name: 'Notify Stakeholders', time: 15, personaId: 'procurement', friction: 'none', notes: '' }
            ]}
          ],
          personas: [
            { id: 'vendor', name: 'Vendor Contact', salary: 0, isExternal: true },
            { id: 'requestor', name: 'Business Requestor', salary: 50000, isExternal: false },
            { id: 'procurement', name: 'Procurement Specialist', salary: 42000, isExternal: false },
            { id: 'manager', name: 'Approving Manager', salary: 65000, isExternal: false },
            { id: 'finance', name: 'Finance Team', salary: 35000, isExternal: false },
            { id: 'legal', name: 'Legal Counsel', salary: 75000, isExternal: false },
            { id: 'compliance', name: 'Compliance Officer', salary: 55000, isExternal: false },
            { id: 'it-security', name: 'IT Security', salary: 60000, isExternal: false },
            { id: 'it', name: 'IT Support', salary: 35000, isExternal: false }
          ],
          funnelConfig: { enabled: true, startVolume: 80, stages: { 'stage-request': { dropOff: 10 }, 'stage-collection': { dropOff: 8 }, 'stage-due-diligence': { dropOff: 12 }, 'stage-contract': { dropOff: 5 }, 'stage-setup': { dropOff: 2 }, 'stage-activation': { dropOff: 0 } }}
        }
      },
      {
        id: 'mortgage_application',
        name: 'Mortgage Application',
        description: 'Residential mortgage from enquiry to completion',
        icon: 'üè†',
        industry: 'Financial Services',
        stageCount: 6,
        config: {
          title: 'Mortgage Application Journey',
          currency: '¬£',
          stages: [
            { id: 'stage-enquiry', name: 'Enquiry', steps: [
              { id: 'step-1-1', name: 'Initial Enquiry', time: 15, personaId: 'applicant', friction: 'none', notes: '' },
              { id: 'step-1-2', name: 'Affordability Assessment', time: 30, personaId: 'advisor', friction: 'low', notes: '' },
              { id: 'step-1-3', name: 'Product Recommendation', time: 45, personaId: 'advisor', friction: 'low', notes: '' }
            ]},
            { id: 'stage-application', name: 'Application', steps: [
              { id: 'step-2-1', name: 'Full Application Form', time: 60, personaId: 'applicant', friction: 'high', notes: '' },
              { id: 'step-2-2', name: 'Gather Supporting Documents', time: 90, personaId: 'applicant', friction: 'high', notes: '' },
              { id: 'step-2-3', name: 'Submit to Lender', time: 30, personaId: 'advisor', friction: 'low', notes: '' }
            ]},
            { id: 'stage-underwriting', name: 'Underwriting', steps: [
              { id: 'step-3-1', name: 'Credit Check', time: 15, personaId: 'underwriter', friction: 'none', notes: '' },
              { id: 'step-3-2', name: 'Income Verification', time: 45, personaId: 'underwriter', friction: 'medium', notes: '' },
              { id: 'step-3-3', name: 'Property Valuation', time: 60, personaId: 'valuer', friction: 'low', notes: '' },
              { id: 'step-3-4', name: 'Underwriting Decision', time: 30, personaId: 'underwriter', friction: 'medium', notes: '' }
            ]},
            { id: 'stage-offer', name: 'Offer', steps: [
              { id: 'step-4-1', name: 'Issue Mortgage Offer', time: 20, personaId: 'lender', friction: 'none', notes: '' },
              { id: 'step-4-2', name: 'Review Offer Terms', time: 30, personaId: 'applicant', friction: 'low', notes: '' },
              { id: 'step-4-3', name: 'Accept Offer', time: 15, personaId: 'applicant', friction: 'none', notes: '' }
            ]},
            { id: 'stage-legal', name: 'Legal', steps: [
              { id: 'step-5-1', name: 'Instruct Solicitor', time: 30, personaId: 'applicant', friction: 'low', notes: '' },
              { id: 'step-5-2', name: 'Property Searches', time: 45, personaId: 'solicitor', friction: 'medium', notes: '' },
              { id: 'step-5-3', name: 'Review Title', time: 60, personaId: 'solicitor', friction: 'low', notes: '' },
              { id: 'step-5-4', name: 'Exchange Contracts', time: 30, personaId: 'solicitor', friction: 'low', notes: '' }
            ]},
            { id: 'stage-completion', name: 'Completion', steps: [
              { id: 'step-6-1', name: 'Transfer Funds', time: 30, personaId: 'lender', friction: 'low', notes: '' },
              { id: 'step-6-2', name: 'Complete Purchase', time: 30, personaId: 'solicitor', friction: 'none', notes: '' },
              { id: 'step-6-3', name: 'Register Mortgage', time: 20, personaId: 'solicitor', friction: 'none', notes: '' }
            ]}
          ],
          personas: [
            { id: 'applicant', name: 'Applicant', salary: 0, isExternal: true },
            { id: 'advisor', name: 'Mortgage Advisor', salary: 45000, isExternal: false },
            { id: 'underwriter', name: 'Underwriter', salary: 42000, isExternal: false },
            { id: 'valuer', name: 'Valuer', salary: 38000, isExternal: false },
            { id: 'lender', name: 'Lender', salary: 40000, isExternal: false },
            { id: 'solicitor', name: 'Conveyancer', salary: 48000, isExternal: false }
          ],
          funnelConfig: { enabled: true, startVolume: 100, stages: { 'stage-enquiry': { dropOff: 20 }, 'stage-application': { dropOff: 15 }, 'stage-underwriting': { dropOff: 10 }, 'stage-offer': { dropOff: 5 }, 'stage-legal': { dropOff: 5 }, 'stage-completion': { dropOff: 2 } }}
        }
      },
      {
        id: 'patient_referral',
        name: 'Patient Referral',
        description: 'NHS or private healthcare referral pathway',
        icon: 'üè•',
        industry: 'Healthcare',
        stageCount: 6,
        config: {
          title: 'Patient Referral Journey',
          currency: '¬£',
          stages: [
            { id: 'stage-presentation', name: 'Presentation', steps: [
              { id: 'step-1-1', name: 'Patient Presents', time: 20, personaId: 'patient', friction: 'low', notes: '' },
              { id: 'step-1-2', name: 'GP Assessment', time: 30, personaId: 'gp', friction: 'low', notes: '' },
              { id: 'step-1-3', name: 'Referral Decision', time: 15, personaId: 'gp', friction: 'none', notes: '' }
            ]},
            { id: 'stage-referral', name: 'Referral Creation', steps: [
              { id: 'step-2-1', name: 'Create Referral', time: 20, personaId: 'gp', friction: 'medium', notes: '' },
              { id: 'step-2-2', name: 'Attach Documents', time: 15, personaId: 'practice-admin', friction: 'low', notes: '' },
              { id: 'step-2-3', name: 'Submit to Hospital', time: 10, personaId: 'practice-admin', friction: 'none', notes: '' }
            ]},
            { id: 'stage-triage', name: 'Triage', steps: [
              { id: 'step-3-1', name: 'Receive Referral', time: 10, personaId: 'hospital-admin', friction: 'none', notes: '' },
              { id: 'step-3-2', name: 'Clinical Triage', time: 20, personaId: 'consultant', friction: 'low', notes: '' },
              { id: 'step-3-3', name: 'Assign Priority', time: 10, personaId: 'consultant', friction: 'none', notes: '' }
            ]},
            { id: 'stage-booking', name: 'Booking', steps: [
              { id: 'step-4-1', name: 'Identify Available Slots', time: 15, personaId: 'hospital-admin', friction: 'low', notes: '' },
              { id: 'step-4-2', name: 'Contact Patient', time: 20, personaId: 'hospital-admin', friction: 'medium', notes: '' },
              { id: 'step-4-3', name: 'Book Appointment', time: 15, personaId: 'patient', friction: 'low', notes: '' },
              { id: 'step-4-4', name: 'Send Confirmation', time: 10, personaId: 'hospital-admin', friction: 'none', notes: '' }
            ]},
            { id: 'stage-consultation', name: 'Consultation', steps: [
              { id: 'step-5-1', name: 'Patient Attends', time: 15, personaId: 'patient', friction: 'low', notes: '' },
              { id: 'step-5-2', name: 'Consultant Assessment', time: 45, personaId: 'consultant', friction: 'low', notes: '' },
              { id: 'step-5-3', name: 'Order Tests', time: 15, personaId: 'consultant', friction: 'none', notes: '' }
            ]},
            { id: 'stage-outcome', name: 'Outcome', steps: [
              { id: 'step-6-1', name: 'Review Results', time: 20, personaId: 'consultant', friction: 'low', notes: '' },
              { id: 'step-6-2', name: 'Treatment Decision', time: 15, personaId: 'consultant', friction: 'low', notes: '' },
              { id: 'step-6-3', name: 'Discharge or Follow-up', time: 15, personaId: 'hospital-admin', friction: 'none', notes: '' },
              { id: 'step-6-4', name: 'Letter to GP', time: 20, personaId: 'consultant', friction: 'low', notes: '' }
            ]}
          ],
          personas: [
            { id: 'patient', name: 'Patient', salary: 0, isExternal: true },
            { id: 'gp', name: 'GP', salary: 100000, isExternal: false },
            { id: 'practice-admin', name: 'Practice Admin', salary: 25000, isExternal: false },
            { id: 'hospital-admin', name: 'Hospital Admin', salary: 28000, isExternal: false },
            { id: 'consultant', name: 'Consultant', salary: 120000, isExternal: false }
          ],
          funnelConfig: { enabled: true, startVolume: 100, stages: { 'stage-presentation': { dropOff: 10 }, 'stage-referral': { dropOff: 5 }, 'stage-triage': { dropOff: 8 }, 'stage-booking': { dropOff: 12 }, 'stage-consultation': { dropOff: 5 }, 'stage-outcome': { dropOff: 0 } }}
        }
      },
      {
        id: 'complaint_handling',
        name: 'Complaint Handling',
        description: 'Customer complaint from receipt to resolution',
        icon: 'üì¢',
        industry: 'Customer Service',
        stageCount: 5,
        config: {
          title: 'Complaint Handling Journey',
          currency: '¬£',
          stages: [
            { id: 'stage-receipt', name: 'Receipt', steps: [
              { id: 'step-1-1', name: 'Complaint Received', time: 15, personaId: 'customer', friction: 'medium', notes: '' },
              { id: 'step-1-2', name: 'Log Complaint', time: 10, personaId: 'agent', friction: 'none', notes: '' },
              { id: 'step-1-3', name: 'Acknowledge Receipt', time: 10, personaId: 'agent', friction: 'none', notes: '' },
              { id: 'step-1-4', name: 'Assign Handler', time: 10, personaId: 'supervisor', friction: 'none', notes: '' }
            ]},
            { id: 'stage-investigation', name: 'Investigation', steps: [
              { id: 'step-2-1', name: 'Review History', time: 20, personaId: 'handler', friction: 'low', notes: '' },
              { id: 'step-2-2', name: 'Gather Information', time: 45, personaId: 'handler', friction: 'medium', notes: '' },
              { id: 'step-2-3', name: 'Contact Customer', time: 20, personaId: 'handler', friction: 'low', notes: '' },
              { id: 'step-2-4', name: 'Root Cause Analysis', time: 30, personaId: 'handler', friction: 'medium', notes: '' }
            ]},
            { id: 'stage-resolution', name: 'Resolution', steps: [
              { id: 'step-3-1', name: 'Determine Resolution', time: 20, personaId: 'handler', friction: 'low', notes: '' },
              { id: 'step-3-2', name: 'Approval if Needed', time: 15, personaId: 'supervisor', friction: 'low', notes: '' },
              { id: 'step-3-3', name: 'Implement Resolution', time: 30, personaId: 'handler', friction: 'low', notes: '' }
            ]},
            { id: 'stage-communication', name: 'Communication', steps: [
              { id: 'step-4-1', name: 'Final Response', time: 30, personaId: 'handler', friction: 'low', notes: '' },
              { id: 'step-4-2', name: 'Customer Acceptance', time: 15, personaId: 'customer', friction: 'low', notes: '' },
              { id: 'step-4-3', name: 'Handle Escalation', time: 45, personaId: 'supervisor', friction: 'high', notes: 'If required' }
            ]},
            { id: 'stage-closure', name: 'Closure', steps: [
              { id: 'step-5-1', name: 'Close Case', time: 10, personaId: 'handler', friction: 'none', notes: '' },
              { id: 'step-5-2', name: 'Satisfaction Survey', time: 5, personaId: 'customer', friction: 'none', notes: '' },
              { id: 'step-5-3', name: 'Log Learnings', time: 15, personaId: 'handler', friction: 'low', notes: '' }
            ]}
          ],
          personas: [
            { id: 'customer', name: 'Customer', salary: 0, isExternal: true },
            { id: 'agent', name: 'Contact Agent', salary: 25000, isExternal: false },
            { id: 'handler', name: 'Complaint Handler', salary: 32000, isExternal: false },
            { id: 'supervisor', name: 'Team Supervisor', salary: 42000, isExternal: false }
          ],
          funnelConfig: { enabled: true, startVolume: 100, stages: { 'stage-receipt': { dropOff: 5 }, 'stage-investigation': { dropOff: 10 }, 'stage-resolution': { dropOff: 5 }, 'stage-communication': { dropOff: 15 }, 'stage-closure': { dropOff: 0 } }}
        }
      },
      {
        id: 'grant_application',
        name: 'Grant Application',
        description: 'Funding application from discovery to delivery',
        icon: 'üí∞',
        industry: 'Public Sector',
        stageCount: 6,
        config: {
          title: 'Grant Application Journey',
          currency: '¬£',
          stages: [
            { id: 'stage-discovery', name: 'Discovery', steps: [
              { id: 'step-1-1', name: 'Identify Opportunity', time: 30, personaId: 'applicant', friction: 'low', notes: '' },
              { id: 'step-1-2', name: 'Review Eligibility', time: 45, personaId: 'applicant', friction: 'medium', notes: '' },
              { id: 'step-1-3', name: 'Decision to Apply', time: 20, personaId: 'applicant', friction: 'low', notes: '' }
            ]},
            { id: 'stage-preparation', name: 'Preparation', steps: [
              { id: 'step-2-1', name: 'Gather Documents', time: 120, personaId: 'applicant', friction: 'high', notes: '' },
              { id: 'step-2-2', name: 'Write Proposal', time: 240, personaId: 'applicant', friction: 'high', notes: '' },
              { id: 'step-2-3', name: 'Budget Preparation', time: 90, personaId: 'applicant', friction: 'medium', notes: '' },
              { id: 'step-2-4', name: 'Internal Review', time: 60, personaId: 'manager', friction: 'low', notes: '' }
            ]},
            { id: 'stage-submission', name: 'Submission', steps: [
              { id: 'step-3-1', name: 'Complete Application', time: 60, personaId: 'applicant', friction: 'medium', notes: '' },
              { id: 'step-3-2', name: 'Upload Documents', time: 30, personaId: 'applicant', friction: 'low', notes: '' },
              { id: 'step-3-3', name: 'Submit Application', time: 15, personaId: 'applicant', friction: 'none', notes: '' }
            ]},
            { id: 'stage-assessment', name: 'Assessment', steps: [
              { id: 'step-4-1', name: 'Initial Review', time: 30, personaId: 'assessor', friction: 'low', notes: '' },
              { id: 'step-4-2', name: 'Detailed Assessment', time: 90, personaId: 'assessor', friction: 'medium', notes: '' },
              { id: 'step-4-3', name: 'Request Clarifications', time: 30, personaId: 'assessor', friction: 'medium', notes: '' },
              { id: 'step-4-4', name: 'Respond to Queries', time: 60, personaId: 'applicant', friction: 'medium', notes: '' }
            ]},
            { id: 'stage-decision', name: 'Decision', steps: [
              { id: 'step-5-1', name: 'Panel Review', time: 60, personaId: 'panel', friction: 'low', notes: '' },
              { id: 'step-5-2', name: 'Final Decision', time: 30, personaId: 'panel', friction: 'low', notes: '' },
              { id: 'step-5-3', name: 'Notify Applicant', time: 15, personaId: 'assessor', friction: 'none', notes: '' }
            ]},
            { id: 'stage-delivery', name: 'Delivery', steps: [
              { id: 'step-6-1', name: 'Grant Agreement', time: 45, personaId: 'applicant', friction: 'low', notes: '' },
              { id: 'step-6-2', name: 'First Disbursement', time: 30, personaId: 'finance', friction: 'low', notes: '' },
              { id: 'step-6-3', name: 'Progress Reporting', time: 60, personaId: 'applicant', friction: 'medium', notes: '' }
            ]}
          ],
          personas: [
            { id: 'applicant', name: 'Applicant', salary: 0, isExternal: true },
            { id: 'manager', name: 'Project Manager', salary: 55000, isExternal: false },
            { id: 'assessor', name: 'Grant Assessor', salary: 45000, isExternal: false },
            { id: 'panel', name: 'Review Panel', salary: 65000, isExternal: false },
            { id: 'finance', name: 'Finance Team', salary: 38000, isExternal: false }
          ],
          funnelConfig: { enabled: true, startVolume: 100, stages: { 'stage-discovery': { dropOff: 30 }, 'stage-preparation': { dropOff: 20 }, 'stage-submission': { dropOff: 5 }, 'stage-assessment': { dropOff: 10 }, 'stage-decision': { dropOff: 40 }, 'stage-delivery': { dropOff: 5 } }}
        }
      },
      {
        id: 'product_return',
        name: 'Product Return & Refund',
        description: 'E-commerce returns processing',
        icon: 'üì¶',
        industry: 'Retail',
        stageCount: 5,
        config: {
          title: 'Product Return Journey',
          currency: '¬£',
          stages: [
            { id: 'stage-request', name: 'Request', steps: [
              { id: 'step-1-1', name: 'Initiate Return', time: 10, personaId: 'customer', friction: 'low', notes: '' },
              { id: 'step-1-2', name: 'Select Reason', time: 5, personaId: 'customer', friction: 'none', notes: '' },
              { id: 'step-1-3', name: 'Generate Label', time: 5, personaId: 'system', friction: 'none', notes: '' }
            ]},
            { id: 'stage-shipping', name: 'Shipping', steps: [
              { id: 'step-2-1', name: 'Package Item', time: 15, personaId: 'customer', friction: 'medium', notes: '' },
              { id: 'step-2-2', name: 'Drop at Carrier', time: 20, personaId: 'customer', friction: 'medium', notes: '' },
              { id: 'step-2-3', name: 'In Transit', time: 10, personaId: 'carrier', friction: 'none', notes: '' }
            ]},
            { id: 'stage-processing', name: 'Processing', steps: [
              { id: 'step-3-1', name: 'Receive at Warehouse', time: 10, personaId: 'warehouse', friction: 'none', notes: '' },
              { id: 'step-3-2', name: 'Inspect Item', time: 15, personaId: 'warehouse', friction: 'low', notes: '' },
              { id: 'step-3-3', name: 'Update Inventory', time: 5, personaId: 'warehouse', friction: 'none', notes: '' }
            ]},
            { id: 'stage-refund', name: 'Refund', steps: [
              { id: 'step-4-1', name: 'Approve Refund', time: 10, personaId: 'cs-team', friction: 'low', notes: '' },
              { id: 'step-4-2', name: 'Process Payment', time: 5, personaId: 'finance', friction: 'none', notes: '' },
              { id: 'step-4-3', name: 'Send Confirmation', time: 5, personaId: 'system', friction: 'none', notes: '' }
            ]},
            { id: 'stage-exceptions', name: 'Exceptions', steps: [
              { id: 'step-5-1', name: 'Review Disputed Items', time: 20, personaId: 'cs-team', friction: 'medium', notes: '' },
              { id: 'step-5-2', name: 'Contact Customer', time: 15, personaId: 'cs-team', friction: 'low', notes: '' },
              { id: 'step-5-3', name: 'Resolution Decision', time: 15, personaId: 'supervisor', friction: 'low', notes: '' }
            ]}
          ],
          personas: [
            { id: 'customer', name: 'Customer', salary: 0, isExternal: true },
            { id: 'system', name: 'System', salary: 0, isExternal: false },
            { id: 'carrier', name: 'Carrier', salary: 0, isExternal: true },
            { id: 'warehouse', name: 'Warehouse Staff', salary: 25000, isExternal: false },
            { id: 'cs-team', name: 'Customer Service', salary: 28000, isExternal: false },
            { id: 'finance', name: 'Finance', salary: 35000, isExternal: false },
            { id: 'supervisor', name: 'Supervisor', salary: 38000, isExternal: false }
          ],
          funnelConfig: { enabled: true, startVolume: 100, stages: { 'stage-request': { dropOff: 5 }, 'stage-shipping': { dropOff: 10 }, 'stage-processing': { dropOff: 5 }, 'stage-refund': { dropOff: 2 }, 'stage-exceptions': { dropOff: 0 } }}
        }
      },
      {
        id: 'bank_account_opening',
        name: 'Bank Account Opening',
        description: 'Personal or business account opening with AML',
        icon: 'üí≥',
        industry: 'Financial Services',
        stageCount: 5,
        config: {
          title: 'Bank Account Opening Journey',
          currency: '¬£',
          stages: [
            { id: 'stage-application', name: 'Application', steps: [
              { id: 'step-1-1', name: 'Start Application', time: 10, personaId: 'customer', friction: 'none', notes: '' },
              { id: 'step-1-2', name: 'Personal Details', time: 15, personaId: 'customer', friction: 'low', notes: '' },
              { id: 'step-1-3', name: 'Employment Info', time: 10, personaId: 'customer', friction: 'low', notes: '' },
              { id: 'step-1-4', name: 'Product Selection', time: 10, personaId: 'customer', friction: 'none', notes: '' }
            ]},
            { id: 'stage-verification', name: 'Verification', steps: [
              { id: 'step-2-1', name: 'ID Upload', time: 10, personaId: 'customer', friction: 'low', notes: '' },
              { id: 'step-2-2', name: 'Selfie Verification', time: 5, personaId: 'customer', friction: 'low', notes: '' },
              { id: 'step-2-3', name: 'Address Verification', time: 10, personaId: 'customer', friction: 'low', notes: '' }
            ]},
            { id: 'stage-checks', name: 'Compliance Checks', steps: [
              { id: 'step-3-1', name: 'ID Verification', time: 5, personaId: 'system', friction: 'none', notes: '' },
              { id: 'step-3-2', name: 'Credit Check', time: 5, personaId: 'system', friction: 'none', notes: '' },
              { id: 'step-3-3', name: 'AML Screening', time: 10, personaId: 'compliance', friction: 'low', notes: '' },
              { id: 'step-3-4', name: 'Manual Review', time: 20, personaId: 'compliance', friction: 'medium', notes: 'If flagged' }
            ]},
            { id: 'stage-approval', name: 'Approval', steps: [
              { id: 'step-4-1', name: 'Application Decision', time: 10, personaId: 'system', friction: 'none', notes: '' },
              { id: 'step-4-2', name: 'Terms Acceptance', time: 10, personaId: 'customer', friction: 'low', notes: '' },
              { id: 'step-4-3', name: 'E-Signature', time: 5, personaId: 'customer', friction: 'none', notes: '' }
            ]},
            { id: 'stage-activation', name: 'Activation', steps: [
              { id: 'step-5-1', name: 'Create Account', time: 5, personaId: 'system', friction: 'none', notes: '' },
              { id: 'step-5-2', name: 'Issue Card', time: 10, personaId: 'operations', friction: 'none', notes: '' },
              { id: 'step-5-3', name: 'Welcome Email', time: 5, personaId: 'system', friction: 'none', notes: '' },
              { id: 'step-5-4', name: 'First Login', time: 10, personaId: 'customer', friction: 'low', notes: '' }
            ]}
          ],
          personas: [
            { id: 'customer', name: 'Customer', salary: 0, isExternal: true },
            { id: 'system', name: 'System', salary: 0, isExternal: false },
            { id: 'compliance', name: 'Compliance Team', salary: 45000, isExternal: false },
            { id: 'operations', name: 'Operations', salary: 32000, isExternal: false }
          ],
          funnelConfig: { enabled: true, startVolume: 100, stages: { 'stage-application': { dropOff: 25 }, 'stage-verification': { dropOff: 15 }, 'stage-checks': { dropOff: 10 }, 'stage-approval': { dropOff: 5 }, 'stage-activation': { dropOff: 2 } }}
        }
      },
      {
        id: 'tenant_move_in',
        name: 'Tenant Move-In',
        description: 'Residential tenancy from application to move-in',
        icon: 'üîë',
        industry: 'Property',
        stageCount: 6,
        config: {
          title: 'Tenant Move-In Journey',
          currency: '¬£',
          stages: [
            { id: 'stage-enquiry', name: 'Enquiry', steps: [
              { id: 'step-1-1', name: 'Property Enquiry', time: 10, personaId: 'tenant', friction: 'none', notes: '' },
              { id: 'step-1-2', name: 'Schedule Viewing', time: 15, personaId: 'agent', friction: 'low', notes: '' },
              { id: 'step-1-3', name: 'Conduct Viewing', time: 30, personaId: 'agent', friction: 'low', notes: '' }
            ]},
            { id: 'stage-application', name: 'Application', steps: [
              { id: 'step-2-1', name: 'Submit Application', time: 30, personaId: 'tenant', friction: 'medium', notes: '' },
              { id: 'step-2-2', name: 'Pay Application Fee', time: 10, personaId: 'tenant', friction: 'low', notes: '' },
              { id: 'step-2-3', name: 'Employer Reference', time: 20, personaId: 'referencing', friction: 'medium', notes: '' },
              { id: 'step-2-4', name: 'Previous Landlord Reference', time: 30, personaId: 'referencing', friction: 'medium', notes: '' },
              { id: 'step-2-5', name: 'Credit Check', time: 10, personaId: 'referencing', friction: 'low', notes: '' }
            ]},
            { id: 'stage-approval', name: 'Approval', steps: [
              { id: 'step-3-1', name: 'Review References', time: 20, personaId: 'agent', friction: 'low', notes: '' },
              { id: 'step-3-2', name: 'Landlord Decision', time: 30, personaId: 'landlord', friction: 'low', notes: '' },
              { id: 'step-3-3', name: 'Notify Tenant', time: 10, personaId: 'agent', friction: 'none', notes: '' }
            ]},
            { id: 'stage-documentation', name: 'Documentation', steps: [
              { id: 'step-4-1', name: 'Prepare AST', time: 30, personaId: 'agent', friction: 'low', notes: '' },
              { id: 'step-4-2', name: 'Review & Sign', time: 30, personaId: 'tenant', friction: 'medium', notes: '' },
              { id: 'step-4-3', name: 'Right to Rent Check', time: 20, personaId: 'agent', friction: 'low', notes: '' },
              { id: 'step-4-4', name: 'Guarantor Agreement', time: 30, personaId: 'guarantor', friction: 'medium', notes: 'If required' }
            ]},
            { id: 'stage-payment', name: 'Payment', steps: [
              { id: 'step-5-1', name: 'Pay Deposit', time: 15, personaId: 'tenant', friction: 'medium', notes: '' },
              { id: 'step-5-2', name: 'Protect Deposit', time: 15, personaId: 'agent', friction: 'low', notes: '' },
              { id: 'step-5-3', name: 'Pay First Month Rent', time: 15, personaId: 'tenant', friction: 'low', notes: '' }
            ]},
            { id: 'stage-movein', name: 'Move-In', steps: [
              { id: 'step-6-1', name: 'Property Check-In', time: 45, personaId: 'agent', friction: 'low', notes: '' },
              { id: 'step-6-2', name: 'Inventory Sign-Off', time: 20, personaId: 'tenant', friction: 'low', notes: '' },
              { id: 'step-6-3', name: 'Hand Over Keys', time: 15, personaId: 'agent', friction: 'none', notes: '' },
              { id: 'step-6-4', name: 'Utility Registration', time: 20, personaId: 'tenant', friction: 'low', notes: '' }
            ]}
          ],
          personas: [
            { id: 'tenant', name: 'Tenant', salary: 0, isExternal: true },
            { id: 'agent', name: 'Letting Agent', salary: 28000, isExternal: false },
            { id: 'landlord', name: 'Landlord', salary: 0, isExternal: true },
            { id: 'referencing', name: 'Referencing Agency', salary: 30000, isExternal: false },
            { id: 'guarantor', name: 'Guarantor', salary: 0, isExternal: true }
          ],
          funnelConfig: { enabled: true, startVolume: 100, stages: { 'stage-enquiry': { dropOff: 30 }, 'stage-application': { dropOff: 20 }, 'stage-approval': { dropOff: 15 }, 'stage-documentation': { dropOff: 5 }, 'stage-payment': { dropOff: 5 }, 'stage-movein': { dropOff: 0 } }}
        }
      },
      {
        id: 'personal_loan',
        name: 'Personal Loan Application',
        description: 'Unsecured loan from application to disbursement',
        icon: 'üíµ',
        industry: 'Financial Services',
        stageCount: 6,
        config: {
          title: 'Personal Loan Journey',
          currency: '¬£',
          stages: [
            { id: 'stage-quote', name: 'Quote', steps: [
              { id: 'step-1-1', name: 'Enter Loan Amount', time: 5, personaId: 'applicant', friction: 'none', notes: '' },
              { id: 'step-1-2', name: 'Soft Credit Check', time: 5, personaId: 'system', friction: 'none', notes: '' },
              { id: 'step-1-3', name: 'View Quote', time: 5, personaId: 'applicant', friction: 'none', notes: '' }
            ]},
            { id: 'stage-application', name: 'Application', steps: [
              { id: 'step-2-1', name: 'Personal Details', time: 15, personaId: 'applicant', friction: 'low', notes: '' },
              { id: 'step-2-2', name: 'Employment Details', time: 10, personaId: 'applicant', friction: 'low', notes: '' },
              { id: 'step-2-3', name: 'Income & Expenses', time: 15, personaId: 'applicant', friction: 'medium', notes: '' },
              { id: 'step-2-4', name: 'Bank Account Details', time: 5, personaId: 'applicant', friction: 'low', notes: '' }
            ]},
            { id: 'stage-verification', name: 'Verification', steps: [
              { id: 'step-3-1', name: 'ID Verification', time: 10, personaId: 'applicant', friction: 'low', notes: '' },
              { id: 'step-3-2', name: 'Income Verification', time: 15, personaId: 'applicant', friction: 'medium', notes: '' },
              { id: 'step-3-3', name: 'Open Banking Connect', time: 10, personaId: 'applicant', friction: 'medium', notes: '' }
            ]},
            { id: 'stage-underwriting', name: 'Underwriting', steps: [
              { id: 'step-4-1', name: 'Hard Credit Check', time: 5, personaId: 'system', friction: 'none', notes: '' },
              { id: 'step-4-2', name: 'Affordability Assessment', time: 10, personaId: 'system', friction: 'none', notes: '' },
              { id: 'step-4-3', name: 'Manual Review', time: 30, personaId: 'underwriter', friction: 'medium', notes: 'If required' },
              { id: 'step-4-4', name: 'Decision', time: 5, personaId: 'system', friction: 'none', notes: '' }
            ]},
            { id: 'stage-offer', name: 'Offer', steps: [
              { id: 'step-5-1', name: 'Review Loan Terms', time: 10, personaId: 'applicant', friction: 'low', notes: '' },
              { id: 'step-5-2', name: 'Accept Offer', time: 5, personaId: 'applicant', friction: 'none', notes: '' },
              { id: 'step-5-3', name: 'E-Sign Agreement', time: 10, personaId: 'applicant', friction: 'low', notes: '' }
            ]},
            { id: 'stage-disbursement', name: 'Disbursement', steps: [
              { id: 'step-6-1', name: 'Final Checks', time: 10, personaId: 'operations', friction: 'none', notes: '' },
              { id: 'step-6-2', name: 'Transfer Funds', time: 5, personaId: 'system', friction: 'none', notes: '' },
              { id: 'step-6-3', name: 'Welcome Pack', time: 5, personaId: 'system', friction: 'none', notes: '' }
            ]}
          ],
          personas: [
            { id: 'applicant', name: 'Applicant', salary: 0, isExternal: true },
            { id: 'system', name: 'System', salary: 0, isExternal: false },
            { id: 'underwriter', name: 'Underwriter', salary: 42000, isExternal: false },
            { id: 'operations', name: 'Operations', salary: 32000, isExternal: false }
          ],
          funnelConfig: { enabled: true, startVolume: 100, stages: { 'stage-quote': { dropOff: 40 }, 'stage-application': { dropOff: 20 }, 'stage-verification': { dropOff: 10 }, 'stage-underwriting': { dropOff: 15 }, 'stage-offer': { dropOff: 5 }, 'stage-disbursement': { dropOff: 2 } }}
        }
      },
      {
        id: 'incident_management',
        name: 'IT Incident Management',
        description: 'IT incident from detection to resolution',
        icon: 'üö®',
        industry: 'IT Service Management',
        stageCount: 5,
        config: {
          title: 'IT Incident Journey',
          currency: '¬£',
          stages: [
            { id: 'stage-detection', name: 'Detection', steps: [
              { id: 'step-1-1', name: 'Incident Reported', time: 10, personaId: 'user', friction: 'low', notes: '' },
              { id: 'step-1-2', name: 'Log Ticket', time: 5, personaId: 'service-desk', friction: 'none', notes: '' },
              { id: 'step-1-3', name: 'Categorise & Prioritise', time: 10, personaId: 'service-desk', friction: 'low', notes: '' },
              { id: 'step-1-4', name: 'Initial Acknowledgement', time: 5, personaId: 'service-desk', friction: 'none', notes: '' }
            ]},
            { id: 'stage-diagnosis', name: 'Diagnosis', steps: [
              { id: 'step-2-1', name: 'Initial Investigation', time: 20, personaId: 'service-desk', friction: 'low', notes: '' },
              { id: 'step-2-2', name: 'Check Known Errors', time: 10, personaId: 'service-desk', friction: 'none', notes: '' },
              { id: 'step-2-3', name: 'Escalate if Needed', time: 10, personaId: 'service-desk', friction: 'low', notes: '' },
              { id: 'step-2-4', name: 'Deep Diagnosis', time: 45, personaId: 'l2-support', friction: 'medium', notes: '' }
            ]},
            { id: 'stage-resolution', name: 'Resolution', steps: [
              { id: 'step-3-1', name: 'Identify Solution', time: 20, personaId: 'l2-support', friction: 'low', notes: '' },
              { id: 'step-3-2', name: 'Implement Fix', time: 30, personaId: 'l2-support', friction: 'medium', notes: '' },
              { id: 'step-3-3', name: 'Test Resolution', time: 15, personaId: 'l2-support', friction: 'low', notes: '' },
              { id: 'step-3-4', name: 'User Verification', time: 10, personaId: 'user', friction: 'low', notes: '' }
            ]},
            { id: 'stage-closure', name: 'Closure', steps: [
              { id: 'step-4-1', name: 'Document Resolution', time: 15, personaId: 'l2-support', friction: 'low', notes: '' },
              { id: 'step-4-2', name: 'Update Knowledge Base', time: 20, personaId: 'l2-support', friction: 'low', notes: '' },
              { id: 'step-4-3', name: 'Close Ticket', time: 5, personaId: 'service-desk', friction: 'none', notes: '' },
              { id: 'step-4-4', name: 'Satisfaction Survey', time: 5, personaId: 'user', friction: 'none', notes: '' }
            ]},
            { id: 'stage-review', name: 'Review', steps: [
              { id: 'step-5-1', name: 'Major Incident Review', time: 60, personaId: 'manager', friction: 'medium', notes: 'If major' },
              { id: 'step-5-2', name: 'Identify Improvements', time: 30, personaId: 'manager', friction: 'low', notes: '' },
              { id: 'step-5-3', name: 'Create Problem Record', time: 15, personaId: 'manager', friction: 'low', notes: 'If recurring' }
            ]}
          ],
          personas: [
            { id: 'user', name: 'End User', salary: 0, isExternal: true },
            { id: 'service-desk', name: 'Service Desk', salary: 28000, isExternal: false },
            { id: 'l2-support', name: 'L2 Support', salary: 42000, isExternal: false },
            { id: 'manager', name: 'IT Manager', salary: 60000, isExternal: false }
          ],
          funnelConfig: { enabled: true, startVolume: 100, stages: { 'stage-detection': { dropOff: 5 }, 'stage-diagnosis': { dropOff: 10 }, 'stage-resolution': { dropOff: 5 }, 'stage-closure': { dropOff: 0 }, 'stage-review': { dropOff: 0 } }}
        }
      },
      {
        id: 'patient_admission',
        name: 'Patient Registration & Admission',
        description: 'Hospital patient admission process',
        icon: 'üè®',
        industry: 'Healthcare',
        stageCount: 6,
        config: {
          title: 'Patient Admission Journey',
          currency: '¬£',
          stages: [
            { id: 'stage-arrival', name: 'Arrival', steps: [
              { id: 'step-1-1', name: 'Patient Arrives', time: 5, personaId: 'patient', friction: 'none', notes: '' },
              { id: 'step-1-2', name: 'Check-In at Reception', time: 10, personaId: 'receptionist', friction: 'low', notes: '' },
              { id: 'step-1-3', name: 'Verify Demographics', time: 10, personaId: 'receptionist', friction: 'low', notes: '' }
            ]},
            { id: 'stage-insurance', name: 'Insurance Verification', steps: [
              { id: 'step-2-1', name: 'Collect Insurance Info', time: 10, personaId: 'receptionist', friction: 'low', notes: '' },
              { id: 'step-2-2', name: 'Verify Coverage', time: 15, personaId: 'billing', friction: 'medium', notes: '' },
              { id: 'step-2-3', name: 'Pre-Authorisation', time: 20, personaId: 'billing', friction: 'medium', notes: '' }
            ]},
            { id: 'stage-consent', name: 'Consent Forms', steps: [
              { id: 'step-3-1', name: 'General Consent', time: 10, personaId: 'patient', friction: 'low', notes: '' },
              { id: 'step-3-2', name: 'Treatment Consent', time: 15, personaId: 'patient', friction: 'medium', notes: '' },
              { id: 'step-3-3', name: 'Privacy Notice', time: 5, personaId: 'patient', friction: 'none', notes: '' }
            ]},
            { id: 'stage-clinical', name: 'Clinical Assessment', steps: [
              { id: 'step-4-1', name: 'Vital Signs', time: 15, personaId: 'nurse', friction: 'none', notes: '' },
              { id: 'step-4-2', name: 'Medical History', time: 20, personaId: 'nurse', friction: 'low', notes: '' },
              { id: 'step-4-3', name: 'Medication Review', time: 15, personaId: 'nurse', friction: 'low', notes: '' },
              { id: 'step-4-4', name: 'Initial Assessment', time: 30, personaId: 'doctor', friction: 'low', notes: '' }
            ]},
            { id: 'stage-bed', name: 'Bed Allocation', steps: [
              { id: 'step-5-1', name: 'Check Availability', time: 10, personaId: 'bed-manager', friction: 'low', notes: '' },
              { id: 'step-5-2', name: 'Assign Bed', time: 10, personaId: 'bed-manager', friction: 'low', notes: '' },
              { id: 'step-5-3', name: 'Prepare Room', time: 15, personaId: 'porter', friction: 'none', notes: '' }
            ]},
            { id: 'stage-admission', name: 'Admission Complete', steps: [
              { id: 'step-6-1', name: 'Escort to Ward', time: 15, personaId: 'porter', friction: 'none', notes: '' },
              { id: 'step-6-2', name: 'Ward Orientation', time: 15, personaId: 'nurse', friction: 'none', notes: '' },
              { id: 'step-6-3', name: 'Treatment Plan', time: 30, personaId: 'doctor', friction: 'low', notes: '' }
            ]}
          ],
          personas: [
            { id: 'patient', name: 'Patient', salary: 0, isExternal: true },
            { id: 'receptionist', name: 'Receptionist', salary: 25000, isExternal: false },
            { id: 'billing', name: 'Billing Team', salary: 32000, isExternal: false },
            { id: 'nurse', name: 'Nurse', salary: 35000, isExternal: false },
            { id: 'doctor', name: 'Doctor', salary: 85000, isExternal: false },
            { id: 'bed-manager', name: 'Bed Manager', salary: 40000, isExternal: false },
            { id: 'porter', name: 'Porter', salary: 22000, isExternal: false }
          ],
          funnelConfig: { enabled: true, startVolume: 100, stages: { 'stage-arrival': { dropOff: 5 }, 'stage-insurance': { dropOff: 3 }, 'stage-consent': { dropOff: 2 }, 'stage-clinical': { dropOff: 2 }, 'stage-bed': { dropOff: 5 }, 'stage-admission': { dropOff: 0 } }}
        }
      },
      {
        id: 'employee_offboarding',
        name: 'Employee Offboarding',
        description: 'Employee exit from notice to final day',
        icon: 'üö™',
        industry: 'Human Resources',
        stageCount: 6,
        config: {
          title: 'Employee Offboarding Journey',
          currency: '¬£',
          stages: [
            { id: 'stage-notification', name: 'Notification', steps: [
              { id: 'step-1-1', name: 'Resignation Received', time: 15, personaId: 'employee', friction: 'low', notes: '' },
              { id: 'step-1-2', name: 'Manager Discussion', time: 30, personaId: 'manager', friction: 'low', notes: '' },
              { id: 'step-1-3', name: 'HR Notification', time: 15, personaId: 'manager', friction: 'none', notes: '' },
              { id: 'step-1-4', name: 'Confirm Last Day', time: 10, personaId: 'hr', friction: 'none', notes: '' }
            ]},
            { id: 'stage-knowledge', name: 'Knowledge Transfer', steps: [
              { id: 'step-2-1', name: 'Document Responsibilities', time: 120, personaId: 'employee', friction: 'medium', notes: '' },
              { id: 'step-2-2', name: 'Identify Successor', time: 30, personaId: 'manager', friction: 'low', notes: '' },
              { id: 'step-2-3', name: 'Handover Sessions', time: 180, personaId: 'employee', friction: 'medium', notes: '' },
              { id: 'step-2-4', name: 'Update Documentation', time: 60, personaId: 'employee', friction: 'low', notes: '' }
            ]},
            { id: 'stage-access', name: 'Access Revocation', steps: [
              { id: 'step-3-1', name: 'List Systems Access', time: 20, personaId: 'it', friction: 'low', notes: '' },
              { id: 'step-3-2', name: 'Schedule Deactivation', time: 15, personaId: 'it', friction: 'none', notes: '' },
              { id: 'step-3-3', name: 'Revoke Physical Access', time: 15, personaId: 'facilities', friction: 'none', notes: '' }
            ]},
            { id: 'stage-assets', name: 'Asset Recovery', steps: [
              { id: 'step-4-1', name: 'List Company Assets', time: 15, personaId: 'it', friction: 'low', notes: '' },
              { id: 'step-4-2', name: 'Collect Equipment', time: 30, personaId: 'it', friction: 'low', notes: '' },
              { id: 'step-4-3', name: 'Collect Access Cards', time: 10, personaId: 'facilities', friction: 'none', notes: '' },
              { id: 'step-4-4', name: 'Data Backup', time: 30, personaId: 'it', friction: 'low', notes: '' }
            ]},
            { id: 'stage-final', name: 'Final Pay', steps: [
              { id: 'step-5-1', name: 'Calculate Final Pay', time: 30, personaId: 'payroll', friction: 'low', notes: '' },
              { id: 'step-5-2', name: 'Holiday Adjustment', time: 15, personaId: 'payroll', friction: 'low', notes: '' },
              { id: 'step-5-3', name: 'Process Payment', time: 15, personaId: 'payroll', friction: 'none', notes: '' },
              { id: 'step-5-4', name: 'P45 Generation', time: 10, personaId: 'payroll', friction: 'none', notes: '' }
            ]},
            { id: 'stage-exit', name: 'Exit', steps: [
              { id: 'step-6-1', name: 'Exit Interview', time: 45, personaId: 'hr', friction: 'low', notes: '' },
              { id: 'step-6-2', name: 'Reference Arrangement', time: 15, personaId: 'hr', friction: 'none', notes: '' },
              { id: 'step-6-3', name: 'Farewell', time: 30, personaId: 'manager', friction: 'none', notes: '' },
              { id: 'step-6-4', name: 'Archive Records', time: 15, personaId: 'hr', friction: 'none', notes: '' }
            ]}
          ],
          personas: [
            { id: 'employee', name: 'Departing Employee', salary: 45000, isExternal: false },
            { id: 'manager', name: 'Line Manager', salary: 60000, isExternal: false },
            { id: 'hr', name: 'HR Coordinator', salary: 35000, isExternal: false },
            { id: 'it', name: 'IT Support', salary: 35000, isExternal: false },
            { id: 'facilities', name: 'Facilities', salary: 28000, isExternal: false },
            { id: 'payroll', name: 'Payroll', salary: 38000, isExternal: false }
          ],
          funnelConfig: { enabled: false, startVolume: 100, stages: {} }
        }
      },
      {
        id: 'law_firm_intake',
        name: 'Client Intake (Law Firm)',
        description: 'Legal client onboarding with conflict checks',
        icon: '‚öñÔ∏è',
        industry: 'Legal',
        stageCount: 6,
        config: {
          title: 'Legal Client Intake Journey',
          currency: '¬£',
          stages: [
            { id: 'stage-enquiry', name: 'Enquiry', steps: [
              { id: 'step-1-1', name: 'Initial Contact', time: 15, personaId: 'client', friction: 'low', notes: '' },
              { id: 'step-1-2', name: 'Capture Details', time: 20, personaId: 'receptionist', friction: 'low', notes: '' },
              { id: 'step-1-3', name: 'Assign to Lawyer', time: 10, personaId: 'intake', friction: 'none', notes: '' }
            ]},
            { id: 'stage-consultation', name: 'Consultation', steps: [
              { id: 'step-2-1', name: 'Schedule Meeting', time: 15, personaId: 'pa', friction: 'low', notes: '' },
              { id: 'step-2-2', name: 'Initial Consultation', time: 60, personaId: 'lawyer', friction: 'none', notes: '' },
              { id: 'step-2-3', name: 'Assess Merits', time: 30, personaId: 'lawyer', friction: 'low', notes: '' }
            ]},
            { id: 'stage-conflict', name: 'Conflict Check', steps: [
              { id: 'step-3-1', name: 'Search Conflicts Database', time: 20, personaId: 'intake', friction: 'low', notes: '' },
              { id: 'step-3-2', name: 'Check Related Parties', time: 30, personaId: 'intake', friction: 'medium', notes: '' },
              { id: 'step-3-3', name: 'Conflict Clearance', time: 15, personaId: 'compliance', friction: 'low', notes: '' }
            ]},
            { id: 'stage-aml', name: 'AML/KYC', steps: [
              { id: 'step-4-1', name: 'Collect ID Documents', time: 20, personaId: 'client', friction: 'medium', notes: '' },
              { id: 'step-4-2', name: 'Verify Identity', time: 15, personaId: 'intake', friction: 'low', notes: '' },
              { id: 'step-4-3', name: 'Source of Funds', time: 30, personaId: 'client', friction: 'high', notes: '' },
              { id: 'step-4-4', name: 'AML Sign-Off', time: 15, personaId: 'compliance', friction: 'low', notes: '' }
            ]},
            { id: 'stage-engagement', name: 'Engagement', steps: [
              { id: 'step-5-1', name: 'Prepare Engagement Letter', time: 30, personaId: 'lawyer', friction: 'low', notes: '' },
              { id: 'step-5-2', name: 'Fee Estimate', time: 20, personaId: 'lawyer', friction: 'low', notes: '' },
              { id: 'step-5-3', name: 'Client Review & Sign', time: 20, personaId: 'client', friction: 'low', notes: '' },
              { id: 'step-5-4', name: 'Collect Retainer', time: 15, personaId: 'accounts', friction: 'low', notes: '' }
            ]},
            { id: 'stage-setup', name: 'Matter Setup', steps: [
              { id: 'step-6-1', name: 'Open Matter in System', time: 20, personaId: 'intake', friction: 'low', notes: '' },
              { id: 'step-6-2', name: 'Set Up File', time: 15, personaId: 'pa', friction: 'none', notes: '' },
              { id: 'step-6-3', name: 'Assign Team', time: 10, personaId: 'lawyer', friction: 'none', notes: '' },
              { id: 'step-6-4', name: 'Welcome Email', time: 10, personaId: 'pa', friction: 'none', notes: '' }
            ]}
          ],
          personas: [
            { id: 'client', name: 'Client', salary: 0, isExternal: true },
            { id: 'receptionist', name: 'Receptionist', salary: 26000, isExternal: false },
            { id: 'intake', name: 'Intake Coordinator', salary: 32000, isExternal: false },
            { id: 'lawyer', name: 'Lawyer', salary: 85000, isExternal: false },
            { id: 'pa', name: 'PA/Secretary', salary: 30000, isExternal: false },
            { id: 'compliance', name: 'Compliance Officer', salary: 55000, isExternal: false },
            { id: 'accounts', name: 'Accounts', salary: 35000, isExternal: false }
          ],
          funnelConfig: { enabled: true, startVolume: 100, stages: { 'stage-enquiry': { dropOff: 20 }, 'stage-consultation': { dropOff: 25 }, 'stage-conflict': { dropOff: 5 }, 'stage-aml': { dropOff: 8 }, 'stage-engagement': { dropOff: 10 }, 'stage-setup': { dropOff: 0 } }}
        }
      },
      {
        id: 'enterprise_sales',
        name: 'Enterprise Sales Cycle',
        description: 'B2B sales from lead to closed deal',
        icon: 'üìà',
        industry: 'B2B/SaaS',
        stageCount: 6,
        config: {
          title: 'Enterprise Sales Journey',
          currency: '¬£',
          stages: [
            { id: 'stage-prospecting', name: 'Prospecting', steps: [
              { id: 'step-1-1', name: 'Identify Target Account', time: 30, personaId: 'sdr', friction: 'low', notes: '' },
              { id: 'step-1-2', name: 'Research Company', time: 45, personaId: 'sdr', friction: 'low', notes: '' },
              { id: 'step-1-3', name: 'Outreach Sequence', time: 30, personaId: 'sdr', friction: 'medium', notes: '' },
              { id: 'step-1-4', name: 'Initial Response', time: 15, personaId: 'prospect', friction: 'low', notes: '' }
            ]},
            { id: 'stage-discovery', name: 'Discovery', steps: [
              { id: 'step-2-1', name: 'Discovery Call', time: 45, personaId: 'ae', friction: 'low', notes: '' },
              { id: 'step-2-2', name: 'Qualify Opportunity', time: 30, personaId: 'ae', friction: 'low', notes: '' },
              { id: 'step-2-3', name: 'Identify Stakeholders', time: 30, personaId: 'ae', friction: 'medium', notes: '' },
              { id: 'step-2-4', name: 'Document Requirements', time: 45, personaId: 'ae', friction: 'low', notes: '' }
            ]},
            { id: 'stage-demo', name: 'Demo & Evaluation', steps: [
              { id: 'step-3-1', name: 'Prepare Demo', time: 60, personaId: 'se', friction: 'low', notes: '' },
              { id: 'step-3-2', name: 'Deliver Demo', time: 90, personaId: 'se', friction: 'low', notes: '' },
              { id: 'step-3-3', name: 'Technical Q&A', time: 60, personaId: 'se', friction: 'medium', notes: '' },
              { id: 'step-3-4', name: 'POC/Trial', time: 120, personaId: 'prospect', friction: 'medium', notes: 'If required' }
            ]},
            { id: 'stage-proposal', name: 'Proposal', steps: [
              { id: 'step-4-1', name: 'Build Business Case', time: 90, personaId: 'ae', friction: 'medium', notes: '' },
              { id: 'step-4-2', name: 'Prepare Proposal', time: 60, personaId: 'ae', friction: 'low', notes: '' },
              { id: 'step-4-3', name: 'Present Proposal', time: 60, personaId: 'ae', friction: 'low', notes: '' },
              { id: 'step-4-4', name: 'Handle Objections', time: 60, personaId: 'ae', friction: 'medium', notes: '' }
            ]},
            { id: 'stage-procurement', name: 'Procurement', steps: [
              { id: 'step-5-1', name: 'Security Review', time: 90, personaId: 'prospect', friction: 'high', notes: '' },
              { id: 'step-5-2', name: 'Legal Review', time: 120, personaId: 'legal', friction: 'medium', notes: '' },
              { id: 'step-5-3', name: 'Contract Negotiation', time: 90, personaId: 'legal', friction: 'high', notes: '' },
              { id: 'step-5-4', name: 'Procurement Process', time: 60, personaId: 'prospect', friction: 'medium', notes: '' }
            ]},
            { id: 'stage-close', name: 'Close', steps: [
              { id: 'step-6-1', name: 'Final Approval', time: 30, personaId: 'prospect', friction: 'low', notes: '' },
              { id: 'step-6-2', name: 'Contract Signature', time: 30, personaId: 'ae', friction: 'low', notes: '' },
              { id: 'step-6-3', name: 'Handoff to CS', time: 30, personaId: 'ae', friction: 'none', notes: '' }
            ]}
          ],
          personas: [
            { id: 'prospect', name: 'Prospect', salary: 0, isExternal: true },
            { id: 'sdr', name: 'SDR', salary: 35000, isExternal: false },
            { id: 'ae', name: 'Account Executive', salary: 70000, isExternal: false },
            { id: 'se', name: 'Sales Engineer', salary: 65000, isExternal: false },
            { id: 'legal', name: 'Legal', salary: 75000, isExternal: false }
          ],
          funnelConfig: { enabled: true, startVolume: 100, stages: { 'stage-prospecting': { dropOff: 60 }, 'stage-discovery': { dropOff: 30 }, 'stage-demo': { dropOff: 20 }, 'stage-proposal': { dropOff: 25 }, 'stage-procurement': { dropOff: 15 }, 'stage-close': { dropOff: 5 } }}
        }
      },
      {
        id: 'permit_application',
        name: 'Permit/License Application',
        description: 'Government permit application process',
        icon: 'üèõÔ∏è',
        industry: 'Public Sector',
        stageCount: 6,
        config: {
          title: 'Permit Application Journey',
          currency: '¬£',
          stages: [
            { id: 'stage-preparation', name: 'Preparation', steps: [
              { id: 'step-1-1', name: 'Research Requirements', time: 45, personaId: 'applicant', friction: 'medium', notes: '' },
              { id: 'step-1-2', name: 'Gather Documents', time: 120, personaId: 'applicant', friction: 'high', notes: '' },
              { id: 'step-1-3', name: 'Complete Forms', time: 60, personaId: 'applicant', friction: 'medium', notes: '' }
            ]},
            { id: 'stage-submission', name: 'Submission', steps: [
              { id: 'step-2-1', name: 'Submit Application', time: 30, personaId: 'applicant', friction: 'low', notes: '' },
              { id: 'step-2-2', name: 'Pay Fees', time: 15, personaId: 'applicant', friction: 'low', notes: '' },
              { id: 'step-2-3', name: 'Receive Confirmation', time: 10, personaId: 'clerk', friction: 'none', notes: '' }
            ]},
            { id: 'stage-validation', name: 'Validation', steps: [
              { id: 'step-3-1', name: 'Check Completeness', time: 20, personaId: 'clerk', friction: 'low', notes: '' },
              { id: 'step-3-2', name: 'Request Missing Info', time: 30, personaId: 'clerk', friction: 'medium', notes: '' },
              { id: 'step-3-3', name: 'Assign to Officer', time: 10, personaId: 'clerk', friction: 'none', notes: '' }
            ]},
            { id: 'stage-assessment', name: 'Assessment', steps: [
              { id: 'step-4-1', name: 'Technical Review', time: 60, personaId: 'officer', friction: 'medium', notes: '' },
              { id: 'step-4-2', name: 'Site Inspection', time: 90, personaId: 'inspector', friction: 'medium', notes: 'If required' },
              { id: 'step-4-3', name: 'Consultation Period', time: 30, personaId: 'officer', friction: 'low', notes: 'If required' },
              { id: 'step-4-4', name: 'Prepare Recommendation', time: 45, personaId: 'officer', friction: 'low', notes: '' }
            ]},
            { id: 'stage-decision', name: 'Decision', steps: [
              { id: 'step-5-1', name: 'Committee Review', time: 60, personaId: 'committee', friction: 'medium', notes: 'If required' },
              { id: 'step-5-2', name: 'Final Decision', time: 30, personaId: 'senior', friction: 'low', notes: '' },
              { id: 'step-5-3', name: 'Notify Applicant', time: 15, personaId: 'clerk', friction: 'none', notes: '' }
            ]},
            { id: 'stage-post', name: 'Post-Decision', steps: [
              { id: 'step-6-1', name: 'Issue Permit', time: 20, personaId: 'clerk', friction: 'none', notes: '' },
              { id: 'step-6-2', name: 'Set Conditions', time: 30, personaId: 'officer', friction: 'low', notes: '' },
              { id: 'step-6-3', name: 'Appeal Process', time: 60, personaId: 'applicant', friction: 'high', notes: 'If refused' }
            ]}
          ],
          personas: [
            { id: 'applicant', name: 'Applicant', salary: 0, isExternal: true },
            { id: 'clerk', name: 'Admin Clerk', salary: 26000, isExternal: false },
            { id: 'officer', name: 'Case Officer', salary: 38000, isExternal: false },
            { id: 'inspector', name: 'Inspector', salary: 42000, isExternal: false },
            { id: 'committee', name: 'Committee', salary: 50000, isExternal: false },
            { id: 'senior', name: 'Senior Officer', salary: 55000, isExternal: false }
          ],
          funnelConfig: { enabled: true, startVolume: 100, stages: { 'stage-preparation': { dropOff: 15 }, 'stage-submission': { dropOff: 5 }, 'stage-validation': { dropOff: 10 }, 'stage-assessment': { dropOff: 5 }, 'stage-decision': { dropOff: 20 }, 'stage-post': { dropOff: 0 } }}
        }
      }
    ];
    
    // ============================================
    // CREATE MAP MODAL WITH TEMPLATE PICKER
    // ============================================
    function CreateMapModal({ onClose, onCreate, userEmail }) {
      const [step, setStep] = useState(1);
      const [selectedTemplate, setSelectedTemplate] = useState(null);
      const [title, setTitle] = useState('');
      const [description, setDescription] = useState('');
      
      const handleSelectTemplate = (template) => {
        setSelectedTemplate(template);
        setTitle(template.config.title);
        setDescription(template.description);
        setStep(2);
      };
      
      const handleCreate = () => {
        if (!title.trim() || !selectedTemplate) return;
        
        // Deep clone the template config
        const templateConfig = JSON.parse(JSON.stringify(selectedTemplate.config));
        
        const newMap = {
          id: Date.now().toString(36) + Math.random().toString(36).substr(2, 5),
          title: title.trim(),
          description: description.trim(),
          owner: userEmail,
          createdAt: new Date().toISOString(),
          updatedAt: new Date().toISOString(),
          sharedWith: [],
          config: {
            meta: {
              title: title.trim(),
              version: "1.0",
              product: `FATHOM v${APP_VERSION}`,
              lastUpdated: new Date().toISOString(),
              template: selectedTemplate.id
            },
            funnel: { 
              enabled: templateConfig.funnelConfig?.enabled || false, 
              initialVolume: templateConfig.funnelConfig?.startVolume || 100,
              periodLabel: 'per month'
            },
            personas: templateConfig.personas.map(p => ({
              id: p.id,
              label: p.name,
              salary: p.salary,
              isExternal: p.isExternal,
              color: p.isExternal ? '#2D8A6E' : '#5B8A9A'
            })),
            stages: templateConfig.stages.map(stage => ({
              id: stage.id,
              name: stage.name,
              dropOffCount: templateConfig.funnelConfig?.stages?.[stage.id]?.dropOff || 0,
              steps: stage.steps.map(step => ({
                id: step.id,
                name: step.name,
                persona: step.personaId,
                duration: step.time,
                friction: step.friction || 'none',
                notes: step.notes || ''
              }))
            }))
          }
        };
        
        onCreate(newMap);
      };
      
      const handleBack = () => {
        setStep(1);
      };
      
      // Group templates by industry
      const templatesByIndustry = JOURNEY_TEMPLATES.reduce((acc, t) => {
        if (!acc[t.industry]) acc[t.industry] = [];
        acc[t.industry].push(t);
        return acc;
      }, {});
      
      return (
        <div className="modal-overlay" onClick={onClose}>
          <div className="modal" onClick={e => e.stopPropagation()} style={{ maxWidth: step === 1 ? '520px' : '480px', width: '95%' }}>
            <div style={{ padding: '36px' }}>
              {/* Header */}
              <div style={{ display: 'flex', alignItems: 'center', gap: '16px', marginBottom: '28px' }}>
                {step === 2 && (
                  <button onClick={handleBack} style={{ background: 'none', border: 'none', cursor: 'pointer', fontSize: '18px', color: 'var(--slate-400)', padding: '4px' }}>
                    ‚Üê
                  </button>
                )}
                <h2 style={{ fontSize: '24px', fontWeight: 400, color: 'var(--navy-700)', margin: 0 }}>
                  {step === 1 ? 'Choose a Template' : 'Customise Your Map'}
                </h2>
              </div>
              
              {step === 1 ? (
                <>
                  <p style={{ color: 'var(--slate-500)', marginBottom: '24px', fontSize: '15px', lineHeight: 1.6 }}>
                    Start with a pre-built template or create from scratch.
                  </p>
                  
                  {/* Blank Canvas - Featured */}
                  <button
                    onClick={() => handleSelectTemplate(JOURNEY_TEMPLATES.find(t => t.id === 'blank'))}
                    style={{
                      display: 'flex',
                      alignItems: 'center',
                      gap: '16px',
                      width: '100%',
                      padding: '16px 20px',
                      background: 'var(--slate-50)',
                      border: '2px dashed var(--slate-300)',
                      borderRadius: '12px',
                      cursor: 'pointer',
                      textAlign: 'left',
                      marginBottom: '24px',
                      transition: 'all 0.15s',
                      fontFamily: "'Interstate', sans-serif"
                    }}
                    onMouseOver={(e) => { e.currentTarget.style.borderColor = 'var(--steel-400)'; e.currentTarget.style.background = 'var(--steel-50)'; }}
                    onMouseOut={(e) => { e.currentTarget.style.borderColor = 'var(--slate-300)'; e.currentTarget.style.background = 'var(--slate-50)'; }}
                  >
                    <div style={{ fontSize: '24px' }}>üìÑ</div>
                    <div style={{ flex: 1 }}>
                      <div style={{ fontWeight: 600, color: 'var(--navy-700)', fontSize: '15px' }}>Blank Canvas</div>
                      <div style={{ fontSize: '13px', color: 'var(--slate-500)' }}>Start from scratch with an empty journey</div>
                    </div>
                    <div style={{ color: 'var(--slate-400)', fontSize: '18px' }}>‚Üí</div>
                  </button>
                  
                  {/* Template List */}
                  <div style={{ maxHeight: '400px', overflowY: 'auto', marginRight: '-8px', paddingRight: '8px' }}>
                    {Object.entries(templatesByIndustry).filter(([industry]) => industry !== 'Any').map(([industry, templates]) => (
                      <div key={industry} style={{ marginBottom: '20px' }}>
                        <h3 style={{ fontSize: '11px', fontWeight: 600, color: 'var(--slate-400)', textTransform: 'uppercase', letterSpacing: '1px', marginBottom: '8px', paddingLeft: '4px' }}>
                          {industry}
                        </h3>
                        <div style={{ display: 'flex', flexDirection: 'column', gap: '4px' }}>
                          {templates.map(template => (
                            <button
                              key={template.id}
                              onClick={() => handleSelectTemplate(template)}
                              style={{
                                display: 'flex',
                                alignItems: 'center',
                                gap: '12px',
                                width: '100%',
                                padding: '12px 16px',
                                background: '#FFF',
                                border: '1px solid transparent',
                                borderRadius: '8px',
                                cursor: 'pointer',
                                textAlign: 'left',
                                transition: 'all 0.1s',
                                fontFamily: "'Interstate', sans-serif"
                              }}
                              onMouseOver={(e) => { e.currentTarget.style.background = 'var(--slate-50)'; e.currentTarget.style.borderColor = 'var(--slate-200)'; }}
                              onMouseOut={(e) => { e.currentTarget.style.background = '#FFF'; e.currentTarget.style.borderColor = 'transparent'; }}
                            >
                              <div style={{ fontSize: '20px', width: '28px', textAlign: 'center' }}>{template.icon}</div>
                              <div style={{ flex: 1, minWidth: 0 }}>
                                <div style={{ fontWeight: 600, color: 'var(--navy-700)', fontSize: '14px' }}>{template.name}</div>
                              </div>
                              <div style={{ fontSize: '12px', color: 'var(--slate-400)', whiteSpace: 'nowrap' }}>
                                {template.stageCount} stages
                              </div>
                              <div style={{ color: 'var(--slate-300)', fontSize: '14px' }}>‚Ä∫</div>
                            </button>
                          ))}
                        </div>
                      </div>
                    ))}
                  </div>
                </>
              ) : (
                <>
                  {/* Selected Template Preview */}
                  <div style={{ display: 'flex', alignItems: 'center', gap: '16px', padding: '16px', background: 'var(--slate-50)', borderRadius: '12px', marginBottom: '24px' }}>
                    <div style={{ fontSize: '36px' }}>{selectedTemplate.icon}</div>
                    <div>
                      <div style={{ fontWeight: 600, color: 'var(--navy-700)', marginBottom: '2px' }}>{selectedTemplate.name}</div>
                      <div style={{ fontSize: '13px', color: 'var(--slate-500)' }}>
                        {selectedTemplate.id === 'blank' ? 'Empty template' : `${selectedTemplate.stageCount} stages ‚Ä¢ ${selectedTemplate.config.personas.length} roles`}
                      </div>
                    </div>
                  </div>
                  
                  <div style={{ marginBottom: '18px' }}>
                    <label className="label">Map Title</label>
                    <input
                      type="text"
                      className="input"
                      value={title}
                      onChange={(e) => setTitle(e.target.value)}
                      placeholder="e.g., Client Onboarding Journey"
                      autoFocus
                    />
                  </div>
                  
                  <div style={{ marginBottom: '28px' }}>
                    <label className="label">Description <span style={{ fontWeight: 400, color: 'var(--slate-400)' }}>(optional)</span></label>
                    <textarea
                      className="input"
                      value={description}
                      onChange={(e) => setDescription(e.target.value)}
                      placeholder="Brief description of this journey map"
                      rows={3}
                      style={{ resize: 'vertical' }}
                    />
                  </div>
                  
                  <div style={{ display: 'flex', gap: '12px' }}>
                    <button onClick={onClose} className="btn btn-secondary" style={{ flex: 1, padding: '14px' }}>
                      Cancel
                    </button>
                    <button onClick={handleCreate} className="btn btn-primary" style={{ flex: 1, padding: '14px' }} disabled={!title.trim()}>
                      Create Map
                    </button>
                  </div>
                </>
              )}
            </div>
          </div>
        </div>
      );
    }
    
    // ============================================
    // MAIN APP
    // ============================================
    function App() {
      const [isLoaded, setIsLoaded] = useState(false);
      
      useEffect(() => {
        setIsLoaded(true);
      }, []);
      
      if (!isLoaded) {
        return (
          <div style={{ minHeight: '100vh', display: 'flex', alignItems: 'center', justifyContent: 'center', background: 'var(--navy-700)' }}>
            <img src="logo_light.png" alt="FATHOM" style={{ height: '40px', opacity: 0.5 }} />
          </div>
        );
      }
      
      // Show landing page - auth is handled in dashboard.html
      return (
        <LandingPage onGetStarted={() => window.location.href = 'dashboard.html'} />
      );
    }
    
    ReactDOM.createRoot(document.getElementById('root')).render(<App />);
  </script>
</body>
</html>
